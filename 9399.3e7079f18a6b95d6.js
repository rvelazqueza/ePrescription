"use strict";(self.webpackChunkeprescription_angular=self.webpackChunkeprescription_angular||[]).push([[9399],{9399:(w,C,c)=>{c.r(C),c.d(C,{NuevaPrescripcionComponent:()=>qe});var e=c(4438),u=c(177),d=c(4341),v=c(8359),s=c(8516),p=c(8961),h=c(7473);function b(i,a){if(1&i){const t=e.RV6();e.j41(0,"div",2)(1,"div",3)(2,"div",4)(3,"div",5),e.nrm(4,"lucide-icon",6),e.k0s(),e.j41(5,"div",7)(6,"h3",8),e.EFF(7,"Seleccione un paciente"),e.k0s(),e.j41(8,"p",9),e.EFF(9,"Debe seleccionar un paciente antes de poder prescribir medicamentos"),e.k0s()()(),e.j41(10,"button",10),e.bIt("click",function(){e.eBV(t);const n=e.XpG();return e.Njj(n.onSelectPatient())}),e.nrm(11,"lucide-icon",11),e.j41(12,"span",12),e.EFF(13,"Seleccionar Paciente"),e.k0s(),e.j41(14,"span",13),e.EFF(15,"Seleccionar"),e.k0s()()()()}if(2&i){const t=e.XpG();e.R7$(4),e.Y8G("img",t.userIcon),e.R7$(7),e.Y8G("img",t.userPlusIcon)}}function m(i,a){if(1&i&&(e.j41(0,"span",39),e.EFF(1),e.k0s()),2&i){const t=a.$implicit;e.R7$(),e.SpI(" ",t," ")}}function f(i,a){if(1&i&&(e.j41(0,"div")(1,"div",34),e.nrm(2,"lucide-icon",35),e.j41(3,"h5",36),e.EFF(4,"Alergias conocidas:"),e.k0s()(),e.j41(5,"div",37),e.DNE(6,m,2,1,"span",38),e.k0s()()),2&i){const t=e.XpG(3);e.R7$(2),e.Y8G("img",t.alertTriangleIcon),e.R7$(4),e.Y8G("ngForOf",t.selectedPatient.allergies)}}function x(i,a){if(1&i&&(e.j41(0,"span",43),e.EFF(1),e.k0s()),2&i){const t=a.$implicit;e.R7$(),e.SpI(" ",t," ")}}function F(i,a){if(1&i&&(e.j41(0,"div")(1,"div",34),e.nrm(2,"lucide-icon",40),e.j41(3,"h5",41),e.EFF(4,"Condiciones cr\xf3nicas:"),e.k0s()(),e.j41(5,"div",37),e.DNE(6,x,2,1,"span",42),e.k0s()()),2&i){const t=e.XpG(3);e.R7$(2),e.Y8G("img",t.heartIcon),e.R7$(4),e.Y8G("ngForOf",t.selectedPatient.chronicConditions)}}function y(i,a){if(1&i&&(e.j41(0,"span",47),e.EFF(1),e.k0s()),2&i){const t=a.$implicit;e.R7$(),e.SpI(" ",t," ")}}function _(i,a){if(1&i&&(e.j41(0,"div")(1,"div",34),e.nrm(2,"lucide-icon",44),e.j41(3,"h5",45),e.EFF(4,"Medicaci\xf3n actual:"),e.k0s()(),e.j41(5,"div",37),e.DNE(6,y,2,1,"span",46),e.k0s()()),2&i){const t=e.XpG(3);e.R7$(2),e.Y8G("img",t.pillIcon),e.R7$(4),e.Y8G("ngForOf",t.selectedPatient.currentMedications)}}function P(i,a){if(1&i&&(e.j41(0,"div",28)(1,"div",29),e.nrm(2,"lucide-icon",30),e.j41(3,"h4",31),e.EFF(4,"Alertas m\xe9dicas del paciente"),e.k0s()(),e.j41(5,"div",32),e.DNE(6,f,7,2,"div",33)(7,F,7,2,"div",33)(8,_,7,2,"div",33),e.k0s()()),2&i){const t=e.XpG(2);e.R7$(2),e.Y8G("img",t.alertTriangleIcon),e.R7$(4),e.Y8G("ngIf",t.selectedPatient.allergies.length>0),e.R7$(),e.Y8G("ngIf",t.selectedPatient.chronicConditions.length>0),e.R7$(),e.Y8G("ngIf",t.selectedPatient.currentMedications.length>0)}}function O(i,a){if(1&i){const t=e.RV6();e.j41(0,"div",14)(1,"div",15)(2,"div",16)(3,"div",17)(4,"div",18),e.nrm(5,"lucide-icon",19),e.k0s(),e.j41(6,"div")(7,"div",20)(8,"span",21),e.EFF(9,"Paciente seleccionado:"),e.k0s(),e.j41(10,"span",22),e.nrm(11,"div",23),e.EFF(12," Activo "),e.k0s()(),e.j41(13,"h3",24),e.EFF(14),e.k0s(),e.j41(15,"p",25),e.EFF(16),e.k0s()()(),e.j41(17,"button",26),e.bIt("click",function(){e.eBV(t);const n=e.XpG();return e.Njj(n.onChangePatient())}),e.EFF(18," Cambiar paciente "),e.k0s()()(),e.DNE(19,P,9,4,"div",27),e.k0s()}if(2&i){const t=e.XpG();e.R7$(5),e.Y8G("img",t.userIcon),e.R7$(9),e.JRh(t.selectedPatient.fullName),e.R7$(2),e.LHq(" ",t.selectedPatient.idType," ",t.selectedPatient.idNumber," \u2022 ",t.selectedPatient.age," a\xf1os \u2022 Tipo de sangre: ",t.selectedPatient.bloodType||"O+"," "),e.R7$(3),e.Y8G("ngIf",t.hasPatientAlerts())}}let A=(()=>{class i{constructor(t){this.notificationService=t,this.selectedPatient=null,this.selectPatient=new e.bkB,this.changePatient=new e.bkB,this.previousPatient=null,this.userIcon=s.KJW,this.userPlusIcon=s.ypN,this.rotateCcwIcon=s.Hbd,this.calendarIcon=s.VvS,this.phoneIcon=s.bcf,this.mailIcon=s.gE4,this.mapPinIcon=s.sDd,this.heartIcon=s.B1N,this.alertTriangleIcon=s.hcu,this.pillIcon=s.abF}ngOnChanges(t){if(t.selectedPatient){const r=t.selectedPatient.currentValue,n=t.selectedPatient.previousValue;r&&!n?(this.notificationService.showPatientSelected(r.fullName),this.checkPatientDataCompleteness(r)):r&&n&&r.id!==n.id&&(this.notificationService.showSuccess(`Paciente cambiado a "${r.fullName}"`,"Paciente Actualizado"),this.checkPatientDataCompleteness(r)),this.previousPatient=r}}onSelectPatient(){this.selectPatient.emit()}onChangePatient(){this.changePatient.emit()}checkPatientDataCompleteness(t){if("inactive"===t.status)return void this.notificationService.showInactivePatientWarning(t.fullName);const n=[{key:"phone",label:"Tel\xe9fono"},{key:"email",label:"Correo electr\xf3nico"},{key:"address",label:"Direcci\xf3n"},{key:"insuranceProvider",label:"Proveedor de seguro"}].filter(o=>{const l=t[o.key];return!l||""===String(l).trim()}).map(o=>o.label);n.length>0&&this.notificationService.showIncompleteDataWarning(n)}hasPatientAlerts(){return!!this.selectedPatient&&(this.selectedPatient.allergies.length>0||this.selectedPatient.chronicConditions.length>0||this.selectedPatient.currentMedications&&this.selectedPatient.currentMedications.length>0)}static{this.\u0275fac=function(r){return new(r||i)(e.rXU(h.J))}}static{this.\u0275cmp=e.VBU({type:i,selectors:[["app-patient-selection-section"]],inputs:{selectedPatient:"selectedPatient"},outputs:{selectPatient:"selectPatient",changePatient:"changePatient"},standalone:!0,features:[e.OA$,e.aNF],decls:2,vars:2,consts:[["class","bg-blue-50 border-2 border-dashed border-blue-200 rounded-lg p-4 sm:p-6 mb-6 transition-all duration-200 hover:bg-blue-55",4,"ngIf"],["class","space-y-4 mb-6",4,"ngIf"],[1,"bg-blue-50","border-2","border-dashed","border-blue-200","rounded-lg","p-4","sm:p-6","mb-6","transition-all","duration-200","hover:bg-blue-55"],[1,"flex","flex-col","lg:flex-row","lg:items-center","lg:justify-between","gap-4"],[1,"flex","flex-col","sm:flex-row","sm:items-center","gap-3","sm:gap-4"],[1,"w-10","h-10","sm:w-12","sm:h-12","bg-blue-100","rounded-full","flex","items-center","justify-center","flex-shrink-0","shadow-sm","mx-auto","sm:mx-0"],[1,"w-5","h-5","sm:w-6","sm:h-6","text-blue-600",3,"img"],[1,"min-w-0","flex-1","text-center","sm:text-left"],[1,"text-base","sm:text-lg","font-semibold","text-blue-900","mb-1"],[1,"text-xs","sm:text-sm","text-blue-700","leading-relaxed"],["type","button",1,"bg-blue-600","text-white","px-4","sm:px-6","py-2","sm:py-3","rounded-lg","hover:bg-blue-700","focus:ring-4","focus:ring-blue-200","transition-all","duration-200","flex","items-center","justify-center","gap-2","font-medium","shadow-sm","hover:shadow-md","w-full","sm:w-auto","whitespace-nowrap","text-sm","sm:text-base",3,"click"],[1,"w-4","h-4",3,"img"],[1,"hidden","xs:inline"],[1,"xs:hidden"],[1,"space-y-4","mb-6"],[1,"bg-white","border-l-4","border-green-500","rounded-lg","p-4","shadow-sm"],[1,"flex","items-center","justify-between"],[1,"flex","items-center","gap-3"],[1,"w-10","h-10","bg-green-100","rounded-full","flex","items-center","justify-center"],[1,"w-5","h-5","text-green-600",3,"img"],[1,"flex","items-center","gap-2","mb-1"],[1,"text-sm","font-medium","text-gray-600"],[1,"inline-flex","items-center","px-2","py-1","rounded-full","text-xs","font-medium","bg-green-100","text-green-800","border","border-green-200"],[1,"w-2","h-2","bg-green-500","rounded-full","mr-1"],[1,"text-lg","font-semibold","text-gray-900"],[1,"text-sm","text-gray-600"],["type","button",1,"bg-white","border","border-gray-300","text-gray-700","px-4","py-2","rounded-lg","hover:bg-gray-50","transition-colors","flex","items-center","gap-2","text-sm","font-medium",3,"click"],["class","bg-white border-l-4 border-red-500 rounded-lg p-4 shadow-sm",4,"ngIf"],[1,"bg-white","border-l-4","border-red-500","rounded-lg","p-4","shadow-sm"],[1,"flex","items-center","gap-2","mb-4"],[1,"w-5","h-5","text-red-600",3,"img"],[1,"text-base","font-semibold","text-red-900"],[1,"space-y-4"],[4,"ngIf"],[1,"flex","items-center","gap-2","mb-2"],[1,"w-4","h-4","text-orange-600",3,"img"],[1,"text-sm","font-medium","text-orange-900"],[1,"flex","flex-wrap","gap-2"],["class","inline-flex items-center px-2 py-1 rounded text-xs font-medium bg-red-100 text-red-800 border border-red-200",4,"ngFor","ngForOf"],[1,"inline-flex","items-center","px-2","py-1","rounded","text-xs","font-medium","bg-red-100","text-red-800","border","border-red-200"],[1,"w-4","h-4","text-blue-600",3,"img"],[1,"text-sm","font-medium","text-blue-900"],["class","inline-flex items-center px-2 py-1 rounded text-xs font-medium bg-orange-100 text-orange-800 border border-orange-200",4,"ngFor","ngForOf"],[1,"inline-flex","items-center","px-2","py-1","rounded","text-xs","font-medium","bg-orange-100","text-orange-800","border","border-orange-200"],[1,"w-4","h-4","text-purple-600",3,"img"],[1,"text-sm","font-medium","text-purple-900"],["class","inline-flex items-center px-2 py-1 rounded text-xs font-medium bg-blue-100 text-blue-800 border border-blue-200",4,"ngFor","ngForOf"],[1,"inline-flex","items-center","px-2","py-1","rounded","text-xs","font-medium","bg-blue-100","text-blue-800","border","border-blue-200"]],template:function(r,n){1&r&&e.DNE(0,b,16,2,"div",0)(1,O,20,7,"div",1),2&r&&(e.Y8G("ngIf",!n.selectedPatient),e.R7$(),e.Y8G("ngIf",n.selectedPatient))},dependencies:[u.MD,u.Sq,u.bT,s.flO,s.WGl],styles:["[_nghost-%COMP%]{display:block}button[_ngcontent-%COMP%]:focus-visible{outline:2px solid transparent;outline-offset:2px}.transition-all[_ngcontent-%COMP%]{transition-property:all;transition-timing-function:cubic-bezier(.4,0,.2,1);transition-duration:.2s}.shadow-enhanced[_ngcontent-%COMP%]{box-shadow:0 1px 3px #0000001a,0 1px 2px #0000000f}.shadow-enhanced[_ngcontent-%COMP%]:hover{box-shadow:0 4px 6px -1px #0000001a,0 2px 4px -1px #0000000f}.alert-badge[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_fadeInUp .3s ease-out}@keyframes _ngcontent-%COMP%_fadeInUp{0%{opacity:0;transform:translateY(10px)}to{opacity:1;transform:translateY(0)}}"]})}}return i})();var k=c(1686),Y=c(7865);function B(i,a){if(1&i&&(e.j41(0,"h3"),e.EFF(1),e.k0s()),2&i){const t=e.XpG(2);e.HbH(t.getTitleClasses()),e.R7$(),e.SpI(" ",t.title," ")}}function z(i,a){if(1&i){const t=e.RV6();e.j41(0,"button",9),e.bIt("click",function(){e.eBV(t);const n=e.XpG(2);return e.Njj(n.actionHandler())}),e.EFF(1),e.k0s()}if(2&i){const t=e.XpG(2);e.HbH(t.getActionClasses()),e.R7$(),e.SpI(" ",t.actionText," ")}}function X(i,a){if(1&i){const t=e.RV6();e.j41(0,"button",10),e.bIt("click",function(){e.eBV(t);const n=e.XpG(2);return e.Njj(n.dismiss())}),e.nrm(1,"lucide-icon",11),e.k0s()}if(2&i){const t=e.XpG(2);e.HbH(t.getDismissClasses()),e.R7$(),e.Y8G("img",t.xIcon)}}function L(i,a){if(1&i&&(e.j41(0,"div",1)(1,"div",2)(2,"div",3),e.nrm(3,"lucide-icon",4),e.k0s(),e.j41(4,"div",5),e.DNE(5,B,2,3,"h3",6),e.j41(6,"p"),e.EFF(7),e.k0s(),e.DNE(8,z,2,3,"button",7),e.k0s(),e.DNE(9,X,2,3,"button",8),e.k0s()()),2&i){const t=e.XpG();e.HbH(t.getContainerClasses()),e.BMQ("aria-live","error"===t.type?"assertive":"polite"),e.R7$(3),e.HbH(t.getIconClasses()),e.Y8G("img",t.getIcon()),e.R7$(2),e.Y8G("ngIf",t.title),e.R7$(),e.HbH(t.getMessageClasses()),e.R7$(),e.SpI(" ",t.message," "),e.R7$(),e.Y8G("ngIf",t.actionText&&t.actionHandler),e.R7$(),e.Y8G("ngIf",t.dismissible)}}let R=(()=>{class i{constructor(){this.message="",this.type="error",this.dismissible=!1,this.alertTriangleIcon=s.hcu,this.alertCircleIcon=s.RIJ,this.xCircleIcon=s.Jpz,this.infoIcon=s.R2D,this.xIcon=s.Jpz}getIcon(){switch(this.type){case"error":return this.xCircleIcon;case"warning":return this.alertTriangleIcon;case"validation":default:return this.alertCircleIcon;case"info":return this.infoIcon}}getContainerClasses(){const t="rounded-lg p-4 border";switch(this.type){case"error":default:return`${t} bg-red-50 border-red-200`;case"warning":return`${t} bg-yellow-50 border-yellow-200`;case"validation":return`${t} bg-orange-50 border-orange-200`;case"info":return`${t} bg-blue-50 border-blue-200`}}getIconClasses(){const t="w-5 h-5";switch(this.type){case"error":default:return`${t} text-red-500`;case"warning":return`${t} text-yellow-500`;case"validation":return`${t} text-orange-500`;case"info":return`${t} text-blue-500`}}getTitleClasses(){const t="font-medium mb-1";switch(this.type){case"error":default:return`${t} text-red-800`;case"warning":return`${t} text-yellow-800`;case"validation":return`${t} text-orange-800`;case"info":return`${t} text-blue-800`}}getMessageClasses(){const t="text-sm";switch(this.type){case"error":default:return`${t} text-red-700`;case"warning":return`${t} text-yellow-700`;case"validation":return`${t} text-orange-700`;case"info":return`${t} text-blue-700`}}getActionClasses(){const t="mt-2 text-sm font-medium underline hover:no-underline focus:outline-none focus:ring-2 focus:ring-offset-2 rounded";switch(this.type){case"error":default:return`${t} text-red-600 hover:text-red-800 focus:ring-red-500`;case"warning":return`${t} text-yellow-600 hover:text-yellow-800 focus:ring-yellow-500`;case"validation":return`${t} text-orange-600 hover:text-orange-800 focus:ring-orange-500`;case"info":return`${t} text-blue-600 hover:text-blue-800 focus:ring-blue-500`}}getDismissClasses(){const t="flex-shrink-0 rounded-md p-1.5 focus:outline-none focus:ring-2 focus:ring-offset-2";switch(this.type){case"error":default:return`${t} text-red-400 hover:text-red-600 focus:ring-red-500`;case"warning":return`${t} text-yellow-400 hover:text-yellow-600 focus:ring-yellow-500`;case"validation":return`${t} text-orange-400 hover:text-orange-600 focus:ring-orange-500`;case"info":return`${t} text-blue-400 hover:text-blue-600 focus:ring-blue-500`}}dismiss(){this.message=""}static{this.\u0275fac=function(r){return new(r||i)}}static{this.\u0275cmp=e.VBU({type:i,selectors:[["app-error-message"]],inputs:{message:"message",title:"title",type:"type",dismissible:"dismissible",actionText:"actionText",actionHandler:"actionHandler"},standalone:!0,features:[e.aNF],decls:1,vars:1,consts:[["role","alert",3,"class",4,"ngIf"],["role","alert"],[1,"flex","items-start","gap-2"],[1,"flex-shrink-0","mt-0.5"],[3,"img"],[1,"flex-1","min-w-0"],[3,"class",4,"ngIf"],["type","button",3,"class","click",4,"ngIf"],["type","button","aria-label","Cerrar mensaje",3,"class","click",4,"ngIf"],["type","button",3,"click"],["type","button","aria-label","Cerrar mensaje",3,"click"],[1,"w-4","h-4",3,"img"]],template:function(r,n){1&r&&e.DNE(0,L,10,12,"div",0),2&r&&e.Y8G("ngIf",n.message)},dependencies:[u.MD,u.bT,s.flO,s.WGl],encapsulation:2})}}return i})();var I=c(3711);function V(i,a){1&i&&(e.j41(0,"div",4),e.nrm(1,"div",5),e.j41(2,"p",6),e.EFF(3,"Cargando pacientes recientes..."),e.k0s()())}function H(i,a){if(1&i&&e.nrm(0,"app-error-message",7),2&i){const t=e.XpG();e.Y8G("message",t.error)("actionHandler",t.loadRecentPatients.bind(t))("dismissible",!0)}}function Q(i,a){if(1&i&&(e.j41(0,"span",21)(1,"span",30),e.EFF(2,"\u{1fa78}"),e.k0s(),e.EFF(3),e.k0s()),2&i){const t=e.XpG().$implicit;e.R7$(3),e.SpI(" ",t.bloodType," ")}}function J(i,a){if(1&i&&(e.j41(0,"div",21),e.nrm(1,"lucide-icon",31),e.j41(2,"span"),e.EFF(3),e.k0s()()),2&i){const t=e.XpG().$implicit,r=e.XpG(2);e.R7$(),e.Y8G("img",r.phoneIcon),e.R7$(2),e.JRh(t.phone)}}function U(i,a){if(1&i&&(e.j41(0,"div",21)(1,"span"),e.EFF(2,"\u{1f4cd}"),e.k0s(),e.j41(3,"span"),e.EFF(4),e.k0s()()),2&i){const t=e.XpG().$implicit;e.R7$(4),e.JRh(t.city)}}function q(i,a){if(1&i&&(e.j41(0,"div",35)(1,"div",36),e.nrm(2,"lucide-icon",37),e.j41(3,"span",38),e.EFF(4,"Alergias:"),e.k0s()(),e.j41(5,"p",39),e.EFF(6),e.k0s()()),2&i){const t=e.XpG(2).$implicit,r=e.XpG(2);e.R7$(2),e.Y8G("img",r.alertIcon),e.R7$(4),e.JRh(t.allergies.join(", "))}}function W(i,a){if(1&i&&(e.j41(0,"div",40)(1,"div",36),e.nrm(2,"lucide-icon",41),e.j41(3,"span",42),e.EFF(4,"Condiciones:"),e.k0s()(),e.j41(5,"p",43),e.EFF(6),e.k0s()()),2&i){const t=e.XpG(2).$implicit,r=e.XpG(2);e.R7$(2),e.Y8G("img",r.infoIcon),e.R7$(4),e.JRh(t.chronicConditions.join(", "))}}function K(i,a){if(1&i&&(e.j41(0,"div",32),e.DNE(1,q,7,2,"div",33)(2,W,7,2,"div",34),e.k0s()),2&i){const t=e.XpG().$implicit;e.R7$(),e.Y8G("ngIf",t.allergies.length>0),e.R7$(),e.Y8G("ngIf",t.chronicConditions.length>0)}}function Z(i,a){if(1&i&&(e.j41(0,"div",44)(1,"div",45),e.nrm(2,"lucide-icon",46),e.j41(3,"span",22),e.EFF(4),e.k0s()()()),2&i){const t=e.XpG().$implicit,r=e.XpG(2);e.R7$(2),e.Y8G("img",r.pillIcon),e.R7$(2),e.SpI("",t.currentMedications.length," medicamento(s) activo(s)")}}function ee(i,a){if(1&i){const t=e.RV6();e.j41(0,"div",9)(1,"div",10)(2,"div",11)(3,"div",12)(4,"div",13),e.nrm(5,"lucide-icon",14),e.k0s(),e.j41(6,"div",15)(7,"div",16)(8,"h3",17),e.EFF(9),e.k0s(),e.j41(10,"span",18),e.nrm(11,"lucide-icon",19),e.EFF(12," Reciente "),e.k0s()(),e.j41(13,"div",20)(14,"span",21)(15,"span",22),e.EFF(16),e.k0s(),e.EFF(17),e.k0s(),e.j41(18,"span",21),e.nrm(19,"lucide-icon",23),e.EFF(20),e.k0s(),e.j41(21,"span",21)(22,"span"),e.EFF(23),e.k0s(),e.EFF(24),e.k0s(),e.DNE(25,Q,4,1,"span",24),e.k0s()()(),e.j41(26,"div",25),e.DNE(27,J,4,2,"div",24)(28,U,5,1,"div",24),e.k0s(),e.DNE(29,K,3,2,"div",26)(30,Z,5,2,"div",27),e.k0s(),e.j41(31,"div",28)(32,"button",29),e.bIt("click",function(){const n=e.eBV(t).$implicit,o=e.XpG(2);return e.Njj(o.selectPatient(n))}),e.EFF(33," Seleccionar "),e.k0s()()()()}if(2&i){const t=a.$implicit,r=e.XpG(2);e.R7$(5),e.Y8G("img",r.userIcon),e.R7$(4),e.JRh(t.fullName),e.R7$(2),e.Y8G("img",r.calendarIcon),e.R7$(5),e.JRh(t.idType),e.R7$(),e.SpI(" ",t.idNumber," "),e.R7$(2),e.Y8G("img",r.calendarIcon),e.R7$(),e.SpI(" ",t.age," a\xf1os "),e.R7$(3),e.JRh("M"===t.gender?"\u2642":"\u2640"),e.R7$(),e.SpI(" ","M"===t.gender?"Masculino":"Femenino"," "),e.R7$(),e.Y8G("ngIf",t.bloodType),e.R7$(2),e.Y8G("ngIf",t.phone),e.R7$(),e.Y8G("ngIf",t.city),e.R7$(),e.Y8G("ngIf",r.hasAnyAlerts(t)),e.R7$(),e.Y8G("ngIf",t.currentMedications.length>0)}}function te(i,a){if(1&i&&(e.j41(0,"div",0),e.DNE(1,ee,34,14,"div",8),e.k0s()),2&i){const t=e.XpG();e.R7$(),e.Y8G("ngForOf",t.recentPatients)("ngForTrackBy",t.trackByPatientId)}}function ne(i,a){if(1&i&&(e.j41(0,"div",4),e.nrm(1,"lucide-icon",47),e.j41(2,"h3",48),e.EFF(3,"No hay pacientes recientes"),e.k0s(),e.j41(4,"p",6),e.EFF(5,"Los pacientes atendidos recientemente aparecer\xe1n aqu\xed"),e.k0s()()),2&i){const t=e.XpG();e.R7$(),e.Y8G("img",t.userIcon)}}let ie=(()=>{class i{constructor(t){this.patientService=t,this.patientSelected=new e.bkB,this.recentPatients=[],this.isLoading=!1,this.error=null,this.subscriptions=new v.yU,this.userIcon=s.KJW,this.alertIcon=s.hcu,this.infoIcon=s.R2D,this.pillIcon=s.abF,this.calendarIcon=s.VvS,this.phoneIcon=s.bcf}ngOnInit(){this.loadRecentPatients()}ngOnDestroy(){this.subscriptions.unsubscribe()}loadRecentPatients(){this.isLoading=!0,this.error=null;const t=this.patientService.getRecentPatients().subscribe({next:r=>{this.recentPatients=r,this.isLoading=!1},error:r=>{console.error("Error loading recent patients:",r),this.error="No se pudieron cargar los pacientes recientes. Por favor, int\xe9ntelo de nuevo.",this.isLoading=!1}});this.subscriptions.add(t)}selectPatient(t){this.patientSelected.emit(t)}trackByPatientId(t,r){return r.id}hasAnyAlerts(t){return t.allergies.length>0||t.chronicConditions.length>0||t.currentMedications.length>0}formatDate(t){try{const r=new Date(t),o=Math.abs((new Date).getTime()-r.getTime()),l=Math.ceil(o/864e5);if(1===l)return"Ayer";if(l<=7)return`Hace ${l} d\xedas`;if(l<=30){const g=Math.floor(l/7);return`Hace ${g} semana${1!==g?"s":""}`}return r.toLocaleDateString("es-CO",{day:"2-digit",month:"2-digit",year:"numeric"})}catch{return t}}static{this.\u0275fac=function(r){return new(r||i)(e.rXU(I.X))}}static{this.\u0275cmp=e.VBU({type:i,selectors:[["app-recent-patients-tab"]],outputs:{patientSelected:"patientSelected"},standalone:!0,features:[e.aNF],decls:5,vars:4,consts:[[1,"space-y-4"],["class","text-center py-8",4,"ngIf"],["title","Error al cargar pacientes","type","error","actionText","Reintentar",3,"message","actionHandler","dismissible",4,"ngIf"],["class","space-y-4",4,"ngIf"],[1,"text-center","py-8"],[1,"animate-spin","rounded-full","h-8","w-8","border-b-2","border-blue-600","mx-auto","mb-4"],[1,"text-gray-500"],["title","Error al cargar pacientes","type","error","actionText","Reintentar",3,"message","actionHandler","dismissible"],["class","bg-white border-l-4 border-l-red-500 rounded-xl p-5 hover:shadow-lg transition-all duration-200 cursor-pointer group border border-gray-100 hover:border-gray-200",4,"ngFor","ngForOf","ngForTrackBy"],[1,"bg-white","border-l-4","border-l-red-500","rounded-xl","p-5","hover:shadow-lg","transition-all","duration-200","cursor-pointer","group","border","border-gray-100","hover:border-gray-200"],[1,"flex","items-start","justify-between"],[1,"flex-1","min-w-0"],[1,"flex","items-center","gap-3","mb-3"],[1,"w-10","h-10","bg-pink-100","rounded-full","flex","items-center","justify-center","flex-shrink-0"],[1,"w-5","h-5","text-pink-600",3,"img"],[1,"min-w-0","flex-1"],[1,"flex","items-center","gap-2","mb-1"],[1,"text-lg","font-semibold","text-gray-900"],[1,"inline-flex","items-center","px-2","py-1","rounded-full","text-xs","font-medium","bg-gray-100","text-gray-600"],[1,"w-3","h-3","mr-1",3,"img"],[1,"flex","items-center","gap-4","text-sm","text-gray-600"],[1,"flex","items-center","gap-1"],[1,"font-medium"],[1,"w-3","h-3",3,"img"],["class","flex items-center gap-1",4,"ngIf"],[1,"flex","items-center","gap-4","text-sm","text-gray-600","mb-3"],["class","space-y-3",4,"ngIf"],["class","mt-3",4,"ngIf"],[1,"flex-shrink-0","ml-4"],["type","button",1,"px-6","py-2.5","bg-blue-600","text-white","hover:bg-blue-700","rounded-lg","transition-all","duration-200","font-medium","text-sm","shadow-sm","hover:shadow-md",3,"click"],[1,"text-red-600"],[1,"w-4","h-4","text-green-600",3,"img"],[1,"space-y-3"],["class","bg-red-50 border border-red-200 rounded-lg p-3",4,"ngIf"],["class","bg-yellow-50 border border-yellow-200 rounded-lg p-3",4,"ngIf"],[1,"bg-red-50","border","border-red-200","rounded-lg","p-3"],[1,"flex","items-center","gap-2","mb-2"],[1,"w-4","h-4","text-red-600",3,"img"],[1,"text-sm","font-medium","text-red-800"],[1,"text-sm","text-red-700"],[1,"bg-yellow-50","border","border-yellow-200","rounded-lg","p-3"],[1,"w-4","h-4","text-yellow-600",3,"img"],[1,"text-sm","font-medium","text-yellow-800"],[1,"text-sm","text-yellow-700"],[1,"mt-3"],[1,"flex","items-center","gap-2","text-sm","text-blue-700"],[1,"w-4","h-4",3,"img"],[1,"w-12","h-12","text-gray-400","mx-auto","mb-4",3,"img"],[1,"text-lg","font-medium","text-gray-900","mb-2"]],template:function(r,n){1&r&&(e.j41(0,"div",0),e.DNE(1,V,4,0,"div",1)(2,H,1,3,"app-error-message",2)(3,te,2,2,"div",3)(4,ne,6,1,"div",1),e.k0s()),2&r&&(e.R7$(),e.Y8G("ngIf",n.isLoading),e.R7$(),e.Y8G("ngIf",n.error&&!n.isLoading),e.R7$(),e.Y8G("ngIf",!n.isLoading&&!n.error&&n.recentPatients.length>0),e.R7$(),e.Y8G("ngIf",!n.isLoading&&!n.error&&0===n.recentPatients.length))},dependencies:[u.MD,u.Sq,u.bT,s.flO,s.WGl,R],styles:["[_nghost-%COMP%]{display:block}"]})}}return i})();var re=c(5782),j=c(4412),oe=c(4572),T=c(1985),$=c(7673),ae=c(152),G=c(3294),se=c(5558),N=c(6354),E=c(9437),ce=c(9172),le=c(8141);let de=(()=>{class i{constructor(t){this.patientService=t,this.searchQuerySubject=new j.t(""),this.searchCriteriaSubject=new j.t("name"),this.isSearchingSubject=new j.t(!1),this.searchErrorSubject=new j.t(null),this.searchQuery$=this.searchQuerySubject.asObservable(),this.searchCriteria$=this.searchCriteriaSubject.asObservable(),this.isSearching$=this.isSearchingSubject.asObservable(),this.searchError$=this.searchErrorSubject.asObservable(),this.searchResults$=(0,oe.z)([this.searchQuery$.pipe((0,ae.B)(300),(0,G.F)()),this.searchCriteria$.pipe((0,G.F)())]).pipe((0,se.n)(([r,n])=>!r||r.length<2?(this.isSearchingSubject.next(!1),new T.c(o=>{o.next({patients:[],totalCount:0,hasMore:!1})})):(this.isSearchingSubject.next(!0),this.searchErrorSubject.next(null),this.patientService.searchPatients(r,n).pipe((0,N.T)(o=>(this.isSearchingSubject.next(!1),this.searchErrorSubject.next(null),o)),(0,E.W)(o=>{this.isSearchingSubject.next(!1);const l=this.getErrorMessage(o);return this.searchErrorSubject.next(l),(0,$.of)({patients:[],totalCount:0,hasMore:!1})})))),(0,ce.Z)({patients:[],totalCount:0,hasMore:!1}))}setSearchQuery(t){this.searchQuerySubject.next(t.trim())}setSearchCriteria(t){this.searchCriteriaSubject.next(t)}getCurrentQuery(){return this.searchQuerySubject.value}getCurrentCriteria(){return this.searchCriteriaSubject.value}clearSearch(){this.searchQuerySubject.next(""),this.isSearchingSubject.next(!1)}isValidQuery(t){return t.trim().length>=2}getValidationMessage(t){return t&&0!==t.trim().length?t.trim().length<2?"Ingrese al menos 2 caracteres para buscar":"":"Ingrese un t\xe9rmino de b\xfasqueda"}searchImmediate(t,r){const n=r||this.getCurrentCriteria();return this.isValidQuery(t)?(this.isSearchingSubject.next(!0),this.searchErrorSubject.next(null),this.patientService.searchPatients(t,n).pipe((0,N.T)(o=>(this.isSearchingSubject.next(!1),this.searchErrorSubject.next(null),o)),(0,E.W)(o=>{this.isSearchingSubject.next(!1);const l=this.getErrorMessage(o);return this.searchErrorSubject.next(l),(0,$.of)({patients:[],totalCount:0,hasMore:!1})}))):new T.c(o=>{o.next({patients:[],totalCount:0,hasMore:!1})})}getSearchFilters(){return{criteria:this.getCurrentCriteria(),query:this.getCurrentQuery(),minLength:2}}setSearchFilters(t){t.criteria&&this.setSearchCriteria(t.criteria),void 0!==t.query&&this.setSearchQuery(t.query)}getSearchCriteriaOptions(){return[{value:"name",label:"Nombre"},{value:"idNumber",label:"N\xfamero de Identificaci\xf3n"},{value:"phone",label:"Tel\xe9fono"},{value:"email",label:"Correo Electr\xf3nico"}]}getSearchPlaceholder(){return{name:"Buscar por nombre del paciente...",idNumber:"Buscar por n\xfamero de identificaci\xf3n...",phone:"Buscar por n\xfamero de tel\xe9fono...",email:"Buscar por correo electr\xf3nico..."}[this.getCurrentCriteria()]||"Buscar paciente..."}reset(){this.searchQuerySubject.next(""),this.searchCriteriaSubject.next("name"),this.isSearchingSubject.next(!1),this.searchErrorSubject.next(null)}getErrorMessage(t){return t?.message?t.message:"string"==typeof t?t:"Error al buscar pacientes. Por favor, intente nuevamente."}clearError(){this.searchErrorSubject.next(null)}getCurrentError(){return this.searchErrorSubject.value}hasError(){return null!==this.searchErrorSubject.value}selectPatientFromSearch(t){return this.patientService.selectPatientFromSearch(t).pipe((0,le.M)(()=>{this.clearSearch()}),(0,E.W)(r=>{const n=this.getErrorMessage(r);throw this.searchErrorSubject.next(`Error selecting patient: ${n}`),r}))}selectPatientFromRecentList(t){return this.patientService.selectPatientFromRecentList(t).pipe((0,E.W)(r=>{const n=this.getErrorMessage(r);throw this.searchErrorSubject.next(`Error selecting patient: ${n}`),r}))}canSelectPatient(t){return this.patientService.canSelectPatient(t)}getPatientSelectionErrors(t){return this.patientService.getPatientSelectionErrors(t)}isPatientDataComplete(t){return["id","fullName","firstName","firstLastName","idNumber","birthDate","gender"].every(n=>{const o=t[n];return null!=o&&""!==String(o).trim()})}getMissingRequiredFields(t){return[{key:"id",label:"ID"},{key:"fullName",label:"Nombre completo"},{key:"firstName",label:"Primer nombre"},{key:"firstLastName",label:"Primer apellido"},{key:"idNumber",label:"N\xfamero de identificaci\xf3n"},{key:"birthDate",label:"Fecha de nacimiento"},{key:"gender",label:"G\xe9nero"}].filter(n=>{const o=t[n.key];return null==o||""===String(o).trim()}).map(n=>n.label)}static{this.\u0275fac=function(r){return new(r||i)(e.KVO(I.X))}}static{this.\u0275prov=e.jDH({token:i,factory:i.\u0275fac,providedIn:"root"})}}return i})();function ue(i,a){if(1&i&&(e.j41(0,"option",20),e.EFF(1),e.k0s()),2&i){const t=a.$implicit;e.Y8G("value",t.value),e.R7$(),e.SpI(" ",t.label," ")}}function me(i,a){if(1&i&&(e.j41(0,"div",21),e.nrm(1,"lucide-icon",22),e.k0s()),2&i){const t=e.XpG();e.R7$(),e.Y8G("img",t.loaderIcon)}}function pe(i,a){1&i&&(e.j41(0,"div"),e.EFF(1," El t\xe9rmino de b\xfasqueda es requerido "),e.k0s())}function ge(i,a){1&i&&(e.j41(0,"div"),e.EFF(1," Ingrese al menos 2 caracteres para buscar "),e.k0s())}function he(i,a){if(1&i&&(e.j41(0,"div",23),e.nrm(1,"lucide-icon",24),e.j41(2,"div"),e.DNE(3,pe,2,0,"div",19)(4,ge,2,0,"div",19),e.k0s()()),2&i){let t,r;const n=e.XpG();e.R7$(),e.Y8G("img",n.alertIcon),e.R7$(2),e.Y8G("ngIf",null==(t=n.searchForm.get("searchQuery"))||null==t.errors?null:t.errors.required),e.R7$(),e.Y8G("ngIf",null==(r=n.searchForm.get("searchQuery"))||null==r.errors?null:r.errors.minlength)}}function be(i,a){if(1&i&&(e.j41(0,"div",25),e.nrm(1,"lucide-icon",24),e.j41(2,"span"),e.EFF(3,"Ingrese al menos 2 caracteres para iniciar la b\xfasqueda"),e.k0s()()),2&i){const t=e.XpG();e.R7$(),e.Y8G("img",t.infoIcon)}}function fe(i,a){if(1&i&&(e.j41(0,"div",26),e.nrm(1,"lucide-icon",27),e.j41(2,"p",28),e.EFF(3,"Buscando pacientes..."),e.k0s()()),2&i){const t=e.XpG();e.R7$(),e.Y8G("img",t.loaderIcon)}}function ve(i,a){if(1&i&&e.nrm(0,"app-error-message",29),2&i){const t=a.ngIf,r=e.XpG();e.Y8G("message",t)("actionHandler",r.retrySearch.bind(r))("dismissible",!0)}}function _e(i,a){if(1&i&&(e.j41(0,"span",35),e.EFF(1),e.k0s()),2&i){const t=e.XpG(2).ngIf;e.R7$(),e.SpI("(mostrando primeros ",t.patients.length,")")}}function xe(i,a){if(1&i&&(e.j41(0,"div",47),e.nrm(1,"lucide-icon",55),e.j41(2,"span",50),e.EFF(3),e.k0s()()),2&i){const t=e.XpG().$implicit,r=e.XpG(3);e.R7$(),e.Y8G("img",r.phoneIcon),e.R7$(2),e.JRh(t.phone)}}function Fe(i,a){if(1&i&&(e.j41(0,"div",47),e.nrm(1,"lucide-icon",56),e.j41(2,"span",50),e.EFF(3),e.k0s()()),2&i){const t=e.XpG().$implicit,r=e.XpG(3);e.R7$(),e.Y8G("img",r.mailIcon),e.R7$(2),e.JRh(t.email)}}function Ce(i,a){if(1&i&&(e.j41(0,"div",61),e.nrm(1,"lucide-icon",62),e.j41(2,"span"),e.EFF(3),e.k0s()()),2&i){const t=e.XpG(2).$implicit,r=e.XpG(3);e.R7$(),e.Y8G("img",r.alertIcon),e.R7$(2),e.Lme("",t.allergies.length," alergia",1!==t.allergies.length?"s":"","")}}function ye(i,a){if(1&i&&(e.j41(0,"div",63),e.nrm(1,"lucide-icon",62),e.j41(2,"span"),e.EFF(3),e.k0s()()),2&i){const t=e.XpG(2).$implicit,r=e.XpG(3);e.R7$(),e.Y8G("img",r.infoIcon),e.R7$(2),e.Lme("",t.chronicConditions.length," condici\xf3n",1!==t.chronicConditions.length?"es":"","")}}function Me(i,a){if(1&i&&(e.j41(0,"div",64),e.nrm(1,"lucide-icon",62),e.j41(2,"span"),e.EFF(3),e.k0s()()),2&i){const t=e.XpG(2).$implicit,r=e.XpG(3);e.R7$(),e.Y8G("img",r.pillIcon),e.R7$(2),e.Lme("",t.currentMedications.length," medicamento",1!==t.currentMedications.length?"s":"","")}}function Pe(i,a){if(1&i&&(e.j41(0,"div",57),e.DNE(1,Ce,4,3,"div",58)(2,ye,4,3,"div",59)(3,Me,4,3,"div",60),e.k0s()),2&i){const t=e.XpG().$implicit;e.R7$(),e.Y8G("ngIf",t.allergies.length>0),e.R7$(),e.Y8G("ngIf",t.chronicConditions.length>0),e.R7$(),e.Y8G("ngIf",t.currentMedications.length>0)}}function ke(i,a){if(1&i){const t=e.RV6();e.j41(0,"div",36)(1,"div",37)(2,"div",38)(3,"div",39)(4,"div",40),e.nrm(5,"lucide-icon",41),e.k0s(),e.j41(6,"div",42)(7,"h3",43),e.EFF(8),e.k0s(),e.j41(9,"div",44)(10,"span",45),e.EFF(11),e.k0s()()()(),e.j41(12,"div",46)(13,"div",47)(14,"div",48)(15,"span",49),e.EFF(16),e.k0s()(),e.j41(17,"span",50),e.EFF(18),e.k0s()(),e.DNE(19,xe,4,2,"div",51)(20,Fe,4,2,"div",51),e.k0s(),e.DNE(21,Pe,4,3,"div",52),e.k0s(),e.j41(22,"div",53)(23,"app-button",54),e.bIt("click",function(){const n=e.eBV(t).$implicit,o=e.XpG(3);return e.Njj(o.selectPatient(n))}),e.EFF(24," Seleccionar "),e.k0s()()()()}if(2&i){const t=a.$implicit,r=e.XpG(3);e.R7$(5),e.Y8G("img",r.userIcon),e.R7$(3),e.SpI(" ",t.fullName," "),e.R7$(3),e.Lme("",t.idType," ",t.idNumber,""),e.R7$(5),e.JRh(t.age),e.R7$(2),e.Lme("",t.age," a\xf1os \u2022 ","M"===t.gender?"M":"F",""),e.R7$(),e.Y8G("ngIf",t.phone),e.R7$(),e.Y8G("ngIf",t.email),e.R7$(),e.Y8G("ngIf",r.hasAnyAlerts(t))}}function je(i,a){if(1&i&&(e.j41(0,"div",31)(1,"div",32),e.EFF(2),e.DNE(3,_e,2,1,"span",33),e.k0s(),e.DNE(4,ke,25,10,"div",34),e.k0s()),2&i){const t=e.XpG().ngIf,r=e.XpG();e.R7$(2),e.E5c(" ",t.totalCount," paciente",1!==t.totalCount?"s":""," encontrado",1!==t.totalCount?"s":""," "),e.R7$(),e.Y8G("ngIf",t.hasMore),e.R7$(),e.Y8G("ngForOf",t.patients)("ngForTrackBy",r.trackByPatientId)}}function Ee(i,a){if(1&i&&(e.j41(0,"div",26),e.nrm(1,"lucide-icon",65),e.j41(2,"h3",66),e.EFF(3,"No se encontraron pacientes"),e.k0s(),e.j41(4,"p",67),e.EFF(5),e.k0s(),e.j41(6,"div",68)(7,"p"),e.EFF(8,"Sugerencias:"),e.k0s(),e.j41(9,"ul",69)(10,"li"),e.EFF(11,"\u2022 Verifique la ortograf\xeda del t\xe9rmino de b\xfasqueda"),e.k0s(),e.j41(12,"li"),e.EFF(13,"\u2022 Intente con un criterio de b\xfasqueda diferente"),e.k0s(),e.j41(14,"li"),e.EFF(15,"\u2022 Use menos caracteres o t\xe9rminos m\xe1s generales"),e.k0s()()()()),2&i){const t=e.XpG(2);e.R7$(),e.Y8G("img",t.searchIcon),e.R7$(4),e.SpI(' No hay pacientes que coincidan con "',t.currentSearchQuery,'" ')}}function Se(i,a){if(1&i&&(e.j41(0,"div"),e.DNE(1,je,5,6,"div",30)(2,Ee,16,2,"div",17),e.k0s()),2&i){const t=a.ngIf,r=e.XpG();e.R7$(),e.Y8G("ngIf",t.patients.length>0),e.R7$(),e.Y8G("ngIf",0===t.patients.length&&r.hasSearched)}}function Ie(i,a){if(1&i&&(e.j41(0,"div",26),e.nrm(1,"lucide-icon",65),e.j41(2,"h3",66),e.EFF(3,"B\xfasqueda Avanzada"),e.k0s(),e.j41(4,"p",28),e.EFF(5," Seleccione un criterio de b\xfasqueda e ingrese al menos 2 caracteres para encontrar pacientes "),e.k0s()()),2&i){const t=e.XpG();e.R7$(),e.Y8G("img",t.searchIcon)}}let we=(()=>{class i{constructor(t,r){this.fb=t,this.patientSearchService=r,this.patientSelected=new e.bkB,this.hasSearched=!1,this.currentSearchQuery="",this.subscriptions=new v.yU,this.searchCriteriaOptions=[{value:"name",label:"Nombre"},{value:"idNumber",label:"N\xfamero de Identificaci\xf3n"},{value:"phone",label:"Tel\xe9fono"},{value:"email",label:"Correo Electr\xf3nico"}],this.searchIcon=s.vji,this.alertIcon=s.hcu,this.infoIcon=s.R2D,this.pillIcon=s.abF,this.userIcon=s.KJW,this.phoneIcon=s.bcf,this.mailIcon=s.gE4,this.fileIcon=s.iUU,this.loaderIcon=s.krw,this.initializeForm(),this.searchResults$=this.patientSearchService.searchResults$,this.isSearching$=this.patientSearchService.isSearching$,this.searchError$=this.patientSearchService.searchError$}ngOnInit(){this.setupFormSubscriptions()}ngOnDestroy(){this.subscriptions.unsubscribe(),this.patientSearchService.reset()}initializeForm(){this.searchForm=this.fb.group({searchCriteria:["name",[d.k0.required]],searchQuery:["",[d.k0.required,d.k0.minLength(2)]]})}setupFormSubscriptions(){const t=this.searchForm.get("searchCriteria")?.valueChanges.subscribe({next:n=>{this.patientSearchService.setSearchCriteria(n),this.patientSearchService.clearError()},error:n=>{console.error("Error in criteria subscription:",n)}});t&&this.subscriptions.add(t);const r=this.searchForm.get("searchQuery")?.valueChanges.subscribe({next:n=>{this.currentSearchQuery=n,n!==this.patientSearchService.getCurrentQuery()&&this.patientSearchService.clearError(),n&&n.length>=2?(this.hasSearched=!0,this.patientSearchService.setSearchQuery(n)):0===n.length&&(this.hasSearched=!1,this.patientSearchService.clearSearch())},error:n=>{console.error("Error in query subscription:",n)}});r&&this.subscriptions.add(r)}getSearchPlaceholder(){return this.patientSearchService.getSearchPlaceholder()}selectPatient(t){this.patientSelected.emit(t)}trackByPatientId(t,r){return r.id}hasAnyAlerts(t){return t.allergies.length>0||t.chronicConditions.length>0||t.currentMedications.length>0}retrySearch(){const t=this.searchForm.get("searchQuery")?.value;t&&t.length>=2&&(this.patientSearchService.clearError(),this.patientSearchService.setSearchQuery(t))}clearSearch(){this.searchForm.get("searchQuery")?.setValue(""),this.hasSearched=!1,this.currentSearchQuery="",this.patientSearchService.clearSearch()}isSearchQueryValid(){const t=this.searchForm.get("searchQuery");return!!t&&t.valid}getSearchQueryError(){const t=this.searchForm.get("searchQuery");if(t?.errors&&t.touched){if(t.errors.required)return"El t\xe9rmino de b\xfasqueda es requerido";if(t.errors.minlength)return"Ingrese al menos 2 caracteres para buscar"}return""}static{this.\u0275fac=function(r){return new(r||i)(e.rXU(d.ok),e.rXU(de))}}static{this.\u0275cmp=e.VBU({type:i,selectors:[["app-advanced-search-tab"]],outputs:{patientSelected:"patientSelected"},standalone:!0,features:[e.aNF],decls:30,vars:31,consts:[[1,"space-y-6"],[1,"space-y-4",3,"formGroup"],[1,"bg-gray-50","rounded-lg","p-3","sm:p-4","border","border-gray-200"],[1,"space-y-2","mb-3","sm:mb-4"],["for","searchCriteria",1,"block","text-xs","sm:text-sm","font-semibold","text-gray-700"],["id","searchCriteria","formControlName","searchCriteria",1,"w-full","px-3","sm:px-4","py-2","sm:py-3","border","border-gray-300","rounded-lg","shadow-sm","focus:outline-none","focus:ring-4","focus:ring-blue-200","focus:border-blue-500","transition-all","duration-200","bg-white","text-sm","sm:text-base"],[3,"value",4,"ngFor","ngForOf"],[1,"space-y-2"],["for","searchQuery",1,"block","text-xs","sm:text-sm","font-semibold","text-gray-700"],[1,"relative"],[1,"absolute","inset-y-0","left-0","pl-3","sm:pl-4","flex","items-center","pointer-events-none"],[1,"w-4","h-4","sm:w-5","sm:h-5","text-gray-400",3,"img"],["id","searchQuery","type","text","formControlName","searchQuery",1,"w-full","pl-10","sm:pl-12","pr-10","sm:pr-12","py-2","sm:py-3","border","border-gray-300","rounded-lg","shadow-sm","focus:outline-none","focus:ring-4","focus:ring-blue-200","focus:border-blue-500","transition-all","duration-200","bg-white","text-sm","sm:text-base",3,"placeholder"],["class","absolute inset-y-0 right-0 pr-3 sm:pr-4 flex items-center",4,"ngIf"],["class","flex items-start gap-2 text-xs sm:text-sm text-red-600 bg-red-50 border border-red-200 rounded-md p-2",4,"ngIf"],["class","flex items-start gap-2 text-xs sm:text-sm text-blue-600 bg-blue-50 border border-blue-200 rounded-md p-2",4,"ngIf"],[1,"space-y-4"],["class","text-center py-8",4,"ngIf"],["title","Error en la b\xfasqueda","type","error","actionText","Intentar nuevamente",3,"message","actionHandler","dismissible",4,"ngIf"],[4,"ngIf"],[3,"value"],[1,"absolute","inset-y-0","right-0","pr-3","sm:pr-4","flex","items-center"],[1,"w-4","h-4","sm:w-5","sm:h-5","text-blue-500","animate-spin",3,"img"],[1,"flex","items-start","gap-2","text-xs","sm:text-sm","text-red-600","bg-red-50","border","border-red-200","rounded-md","p-2"],[1,"w-3","h-3","sm:w-4","sm:h-4","flex-shrink-0","mt-0.5",3,"img"],[1,"flex","items-start","gap-2","text-xs","sm:text-sm","text-blue-600","bg-blue-50","border","border-blue-200","rounded-md","p-2"],[1,"text-center","py-8"],[1,"w-8","h-8","text-blue-600","mx-auto","mb-4","animate-spin",3,"img"],[1,"text-gray-500"],["title","Error en la b\xfasqueda","type","error","actionText","Intentar nuevamente",3,"message","actionHandler","dismissible"],["class","space-y-3",4,"ngIf"],[1,"space-y-3"],[1,"text-sm","text-gray-600","mb-4"],["class","text-blue-600",4,"ngIf"],["class","bg-white border border-gray-200 rounded-lg p-3 sm:p-5 hover:shadow-lg hover:border-green-200 transition-all duration-200 cursor-pointer group",4,"ngFor","ngForOf","ngForTrackBy"],[1,"text-blue-600"],[1,"bg-white","border","border-gray-200","rounded-lg","p-3","sm:p-5","hover:shadow-lg","hover:border-green-200","transition-all","duration-200","cursor-pointer","group"],[1,"flex","flex-col","sm:flex-row","sm:items-start","sm:justify-between","gap-3","sm:gap-4"],[1,"flex-1","min-w-0"],[1,"flex","items-center","gap-2","sm:gap-3","mb-2","sm:mb-3"],[1,"w-8","h-8","sm:w-10","sm:h-10","bg-green-100","rounded-full","flex","items-center","justify-center","flex-shrink-0","group-hover:bg-green-200","transition-colors","duration-200"],[1,"w-4","h-4","sm:w-5","sm:h-5","text-green-600",3,"img"],[1,"min-w-0","flex-1"],[1,"text-base","sm:text-lg","font-semibold","text-gray-900","truncate","group-hover:text-green-900","transition-colors","duration-200"],[1,"flex","items-center","gap-2","text-xs","sm:text-sm","text-gray-500","mt-1"],[1,"font-medium"],[1,"grid","grid-cols-1","sm:grid-cols-2","xl:grid-cols-3","gap-2","sm:gap-3","text-xs","sm:text-sm","mb-3","sm:mb-4"],[1,"flex","items-center","gap-2","text-gray-600"],[1,"w-5","h-5","sm:w-6","sm:h-6","bg-gray-100","rounded-full","flex","items-center","justify-center","flex-shrink-0"],[1,"text-xs","font-semibold","text-gray-600"],[1,"truncate"],["class","flex items-center gap-2 text-gray-600",4,"ngIf"],["class","flex flex-wrap gap-1 sm:gap-2",4,"ngIf"],[1,"flex-shrink-0","w-full","sm:w-auto"],["variant","default","size","sm",1,"bg-green-600","text-white","hover:bg-green-700","focus:ring-4","focus:ring-green-200","transition-all","duration-200","px-3","sm:px-4","py-2","font-medium","shadow-sm","hover:shadow-md","w-full","sm:w-auto","text-sm","whitespace-nowrap",3,"click"],[1,"w-3","h-3","sm:w-4","sm:h-4","text-green-500","flex-shrink-0",3,"img"],[1,"w-3","h-3","sm:w-4","sm:h-4","text-blue-500","flex-shrink-0",3,"img"],[1,"flex","flex-wrap","gap-1","sm:gap-2"],["class","flex items-center gap-1 sm:gap-1.5 px-2 sm:px-3 py-1 sm:py-1.5 bg-red-50 border border-red-200 text-red-700 rounded-full text-xs font-medium shadow-sm",4,"ngIf"],["class","flex items-center gap-1 sm:gap-1.5 px-2 sm:px-3 py-1 sm:py-1.5 bg-orange-50 border border-orange-200 text-orange-700 rounded-full text-xs font-medium shadow-sm",4,"ngIf"],["class","flex items-center gap-1 sm:gap-1.5 px-2 sm:px-3 py-1 sm:py-1.5 bg-blue-50 border border-blue-200 text-blue-700 rounded-full text-xs font-medium shadow-sm",4,"ngIf"],[1,"flex","items-center","gap-1","sm:gap-1.5","px-2","sm:px-3","py-1","sm:py-1.5","bg-red-50","border","border-red-200","text-red-700","rounded-full","text-xs","font-medium","shadow-sm"],[1,"w-2.5","h-2.5","sm:w-3","sm:h-3",3,"img"],[1,"flex","items-center","gap-1","sm:gap-1.5","px-2","sm:px-3","py-1","sm:py-1.5","bg-orange-50","border","border-orange-200","text-orange-700","rounded-full","text-xs","font-medium","shadow-sm"],[1,"flex","items-center","gap-1","sm:gap-1.5","px-2","sm:px-3","py-1","sm:py-1.5","bg-blue-50","border","border-blue-200","text-blue-700","rounded-full","text-xs","font-medium","shadow-sm"],[1,"w-12","h-12","text-gray-400","mx-auto","mb-4",3,"img"],[1,"text-lg","font-medium","text-gray-900","mb-2"],[1,"text-gray-500","mb-4"],[1,"text-sm","text-gray-400"],[1,"mt-2","space-y-1"]],template:function(r,n){if(1&r&&(e.j41(0,"div",0)(1,"form",1)(2,"div",2)(3,"div",3)(4,"label",4),e.EFF(5," Buscar por: "),e.k0s(),e.j41(6,"select",5),e.DNE(7,ue,2,2,"option",6),e.k0s()(),e.j41(8,"div",7)(9,"label",8),e.EFF(10," T\xe9rmino de b\xfasqueda: "),e.k0s(),e.j41(11,"div",9)(12,"div",10),e.nrm(13,"lucide-icon",11),e.k0s(),e.nrm(14,"input",12),e.DNE(15,me,2,1,"div",13),e.nI1(16,"async"),e.k0s(),e.DNE(17,he,5,3,"div",14)(18,be,4,1,"div",15),e.k0s()()(),e.j41(19,"div",16),e.DNE(20,fe,4,1,"div",17),e.nI1(21,"async"),e.DNE(22,ve,1,3,"app-error-message",18),e.nI1(23,"async"),e.DNE(24,Se,3,2,"div",19),e.nI1(25,"async"),e.nI1(26,"async"),e.nI1(27,"async"),e.DNE(28,Ie,6,1,"div",17),e.nI1(29,"async"),e.k0s()()),2&r){let o,l,g,M,S;e.R7$(),e.Y8G("formGroup",n.searchForm),e.R7$(6),e.Y8G("ngForOf",n.searchCriteriaOptions),e.R7$(6),e.Y8G("img",n.searchIcon),e.R7$(),e.AVh("border-red-300",(null==(o=n.searchForm.get("searchQuery"))?null:o.invalid)&&(null==(o=n.searchForm.get("searchQuery"))?null:o.touched))("focus:ring-red-200",(null==(l=n.searchForm.get("searchQuery"))?null:l.invalid)&&(null==(l=n.searchForm.get("searchQuery"))?null:l.touched))("focus:border-red-500",(null==(g=n.searchForm.get("searchQuery"))?null:g.invalid)&&(null==(g=n.searchForm.get("searchQuery"))?null:g.touched)),e.Y8G("placeholder",n.getSearchPlaceholder()),e.R7$(),e.Y8G("ngIf",e.bMT(16,17,n.isSearching$)),e.R7$(2),e.Y8G("ngIf",(null==(M=n.searchForm.get("searchQuery"))?null:M.invalid)&&(null==(M=n.searchForm.get("searchQuery"))?null:M.touched)),e.R7$(),e.Y8G("ngIf",(null==(S=n.searchForm.get("searchQuery"))?null:S.valid)||!(null!=(S=n.searchForm.get("searchQuery"))&&S.touched)),e.R7$(2),e.Y8G("ngIf",e.bMT(21,19,n.isSearching$)),e.R7$(2),e.Y8G("ngIf",e.bMT(23,21,n.searchError$)),e.R7$(2),e.Y8G("ngIf",!e.bMT(25,23,n.isSearching$)&&!e.bMT(26,25,n.searchError$)&&e.bMT(27,27,n.searchResults$)),e.R7$(4),e.Y8G("ngIf",!e.bMT(29,29,n.isSearching$)&&!n.hasSearched)}},dependencies:[u.MD,u.Sq,u.bT,u.Jj,d.X1,d.qT,d.xH,d.y7,d.me,d.wz,d.BC,d.cb,d.j4,d.JD,s.flO,s.WGl,re.Q,R],styles:['[_nghost-%COMP%]{display:block}.search-form[_ngcontent-%COMP%]{background:linear-gradient(135deg,#f8fafc,#f1f5f9);border-radius:12px;padding:1.5rem;margin-bottom:2rem;border:1px solid #e2e8f0;box-shadow:0 1px 3px #0000001a,0 1px 2px #0000000f}.search-input[_ngcontent-%COMP%]:focus{box-shadow:0 0 0 4px #3b82f61a;transform:translateY(-1px)}.patient-card[_ngcontent-%COMP%]{transition:all .3s cubic-bezier(.4,0,.2,1);position:relative;overflow:hidden}.patient-card[_ngcontent-%COMP%]:before{content:"";position:absolute;top:0;left:0;right:0;height:3px;background:linear-gradient(90deg,#3b82f6,#10b981);transform:scaleX(0);transition:transform .3s ease}.patient-card[_ngcontent-%COMP%]:hover:before{transform:scaleX(1)}.patient-card[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:0 10px 25px #0000001a}.loading-spinner[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_spin 1s linear infinite}.loading-pulse[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_pulse 2s cubic-bezier(.4,0,.6,1) infinite}@keyframes _ngcontent-%COMP%_spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}@keyframes _ngcontent-%COMP%_pulse{0%,to{opacity:1}50%{opacity:.5}}.alert-badge[_ngcontent-%COMP%]{font-size:.75rem;font-weight:600;padding:.375rem .75rem;border-radius:9999px;display:inline-flex;align-items:center;gap:.375rem;transition:all .2s ease;border:1px solid transparent}.alert-badge[_ngcontent-%COMP%]:hover{transform:translateY(-1px);box-shadow:0 2px 4px #0000001a}.alert-badge.allergy[_ngcontent-%COMP%]{background:linear-gradient(135deg,#fef2f2,#fee2e2);color:#dc2626;border-color:#fecaca}.alert-badge.condition[_ngcontent-%COMP%]{background:linear-gradient(135deg,#fff7ed,#fed7aa);color:#ea580c;border-color:#fdba74}.alert-badge.medication[_ngcontent-%COMP%]{background:linear-gradient(135deg,#eff6ff,#dbeafe);color:#2563eb;border-color:#93c5fd}.search-results-enter[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_slideInUp .3s ease-out}@keyframes _ngcontent-%COMP%_slideInUp{0%{opacity:0;transform:translateY(20px)}to{opacity:1;transform:translateY(0)}}.empty-state[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_fadeIn .5s ease-out}@keyframes _ngcontent-%COMP%_fadeIn{0%{opacity:0}to{opacity:1}}.button-enhanced[_ngcontent-%COMP%]{transition:all .2s cubic-bezier(.4,0,.2,1);position:relative;overflow:hidden}.button-enhanced[_ngcontent-%COMP%]:before{content:"";position:absolute;top:0;left:-100%;width:100%;height:100%;background:linear-gradient(90deg,transparent,rgba(255,255,255,.2),transparent);transition:left .5s}.button-enhanced[_ngcontent-%COMP%]:hover:before{left:100%}@media (hover: none) and (pointer: coarse){.patient-card[_ngcontent-%COMP%]:hover{transform:none;box-shadow:0 1px 3px #0000001a,0 1px 2px #0000000f}.button-enhanced[_ngcontent-%COMP%]:hover{transform:none}.tab-trigger[_ngcontent-%COMP%]:hover:not(.active){background-color:transparent;transform:none}}@media (max-width: 1024px){.search-form[_ngcontent-%COMP%]{padding:1.25rem}}@media (max-width: 768px){.patient-card[_ngcontent-%COMP%]{padding:1rem;margin-bottom:1rem}.search-form[_ngcontent-%COMP%]{padding:1rem;margin-bottom:1.5rem}.alert-badge[_ngcontent-%COMP%]{font-size:.6875rem;padding:.25rem .5rem;gap:.25rem}.button-enhanced[_ngcontent-%COMP%]{min-height:44px;padding:.75rem 1rem}}@media (max-width: 640px){.patient-card[_ngcontent-%COMP%], .search-form[_ngcontent-%COMP%]{padding:.75rem;border-radius:.5rem}.patient-details-grid[_ngcontent-%COMP%]{grid-template-columns:1fr;gap:.5rem}.patient-name[_ngcontent-%COMP%]{font-size:1rem;line-height:1.25}.patient-info[_ngcontent-%COMP%]{font-size:.75rem}}@media (max-width: 480px){.search-form[_ngcontent-%COMP%]{padding:.5rem;margin-bottom:1rem}.patient-card[_ngcontent-%COMP%]{padding:.5rem;margin-bottom:.75rem}.alert-badge[_ngcontent-%COMP%]{font-size:.625rem;padding:.125rem .375rem}.button-enhanced[_ngcontent-%COMP%]{font-size:.875rem;padding:.5rem .75rem}}@media (max-height: 600px) and (orientation: landscape){.search-form[_ngcontent-%COMP%]{padding:.75rem;margin-bottom:1rem}.patient-card[_ngcontent-%COMP%]{padding:.75rem;margin-bottom:.5rem}}',"[_nghost-%COMP%]{display:block}"]})}}return i})();function Re(i,a){if(1&i&&(e.j41(0,"div",22),e.nrm(1,"lucide-icon",23),e.j41(2,"div",24)(3,"p",25),e.EFF(4,"Estos son los pacientes que ha atendido recientemente. Haga clic para seleccionar."),e.k0s()()()),2&i){const t=e.XpG();e.R7$(),e.Y8G("img",t.usersIcon)}}function Te(i,a){if(1&i){const t=e.RV6();e.j41(0,"div")(1,"app-recent-patients-tab",26),e.bIt("patientSelected",function(n){e.eBV(t);const o=e.XpG();return e.Njj(o.onRecentPatientSelected(n))}),e.k0s()()}}function $e(i,a){if(1&i){const t=e.RV6();e.j41(0,"div")(1,"app-advanced-search-tab",26),e.bIt("patientSelected",function(n){e.eBV(t);const o=e.XpG();return e.Njj(o.onSearchPatientSelected(n))}),e.k0s()()}}let Ge=(()=>{class i{constructor(t,r){this.patientService=t,this.notificationService=r,this.isOpen=!1,this.closeModal=new e.bkB,this.patientSelected=new e.bkB,this.newPatientRequested=new e.bkB,this.activeTab="recent",this.showNewPatientDialog=!1,this.totalPatients=0,this.recentPatientsCount=3,this.subscriptions=new v.yU,this.usersIcon=s.zWC,this.searchIcon=s.vji,this.plusIcon=s.FWt,this.xIcon=s.X}onOpenChange(t){t||this.closeModal.emit()}onTabChange(t){this.activeTab=t}setActiveTab(t){this.activeTab=t}ngOnInit(){this.loadPatientCount()}ngOnDestroy(){this.subscriptions.unsubscribe()}loadPatientCount(){const t=this.patientService.getRecentPatients().subscribe({next:r=>{this.totalPatients=r.length},error:r=>{console.error("Error loading patient count:",r),this.totalPatients=0,this.notificationService.showLoadingError("del conteo de pacientes")}});this.subscriptions.add(t)}onNewPatient(){this.showNewPatientDialog=!0}onNewPatientDialogChange(t){this.showNewPatientDialog=t}onPatientCreated(t){this.showNewPatientDialog=!1,this.notificationService.showSuccess(`Paciente "${t.fullName}" creado y seleccionado correctamente`,"Nuevo Paciente Creado"),this.patientSelected.emit(t),this.closeModal.emit(),this.loadPatientCount()}onCancel(){this.closeModal.emit()}onRecentPatientSelected(t){this.patientSelected.emit({id:t.id,fullName:t.fullName,firstName:t.firstName,secondName:t.secondName,firstLastName:t.firstLastName,secondLastName:t.secondLastName,idType:t.idType,idNumber:t.idNumber,birthDate:t.birthDate,age:t.age,gender:t.gender,bloodType:t.bloodType,phone:t.phone,email:t.email,address:t.address,city:t.city,country:t.country,occupation:t.occupation,weight:t.weight,height:t.height,bmi:t.bmi,insuranceProvider:t.insuranceProvider,insuranceNumber:t.insuranceNumber,insuranceType:t.insuranceType,allergies:t.allergies||[],chronicConditions:t.chronicConditions||[],currentMedications:t.currentMedications||[],clinicalNotes:t.clinicalNotes,emergencyContact:t.emergencyContact||{name:"",relationship:"",phone:""},registrationDate:t.registrationDate,status:t.status}),this.closeModal.emit()}onSearchPatientSelected(t){this.patientSelected.emit({id:t.id,idType:t.idType,idNumber:t.idNumber,firstName:t.firstName,secondName:t.secondName,firstLastName:t.firstLastName,secondLastName:t.secondLastName,fullName:t.fullName,birthDate:t.birthDate,age:t.age,gender:t.gender,bloodType:t.bloodType,occupation:t.occupation,phone:t.phone,email:t.email,address:t.address,city:t.city,country:t.country,weight:t.weight,height:t.height,bmi:t.bmi,allergies:t.allergies||[],chronicConditions:t.chronicConditions||[],currentMedications:t.currentMedications||[],clinicalNotes:t.clinicalNotes,insuranceProvider:t.insuranceProvider,insuranceNumber:t.insuranceNumber,insuranceType:t.insuranceType,emergencyContact:t.emergencyContact||{name:"",relationship:"",phone:""},registrationDate:t.registrationDate,status:t.status}),this.closeModal.emit()}static{this.\u0275fac=function(r){return new(r||i)(e.rXU(I.X),e.rXU(h.J))}}static{this.\u0275cmp=e.VBU({type:i,selectors:[["app-patient-selection-modal"]],inputs:{isOpen:"isOpen"},outputs:{closeModal:"closeModal",patientSelected:"patientSelected",newPatientRequested:"newPatientRequested"},standalone:!0,features:[e.aNF],decls:39,vars:40,consts:[["contentClass","w-full max-w-4xl mx-4 max-h-[90vh] flex flex-col",3,"openChange","open"],[1,"border-b","border-gray-200","pb-4","px-6","flex-shrink-0"],[1,"flex","items-center","gap-3"],[1,"w-10","h-10","bg-blue-100","rounded-full","flex","items-center","justify-center"],[1,"w-5","h-5","text-blue-600",3,"img"],[1,"text-xl","font-semibold","text-gray-900"],[1,"text-sm","text-gray-600","mt-1"],[1,"flex-1","flex","flex-col","min-h-0"],[1,"px-6","pt-4","flex-shrink-0"],[1,"flex","border-b","border-gray-200"],["type","button",1,"tab-button","flex","items-center","gap-2","px-4","py-3","font-medium","text-sm","transition-all","duration-200","border-b-2","flex-1",3,"click"],[1,"w-4","h-4",3,"img"],[1,"flex-1","overflow-y-auto","px-6","py-4"],["class","mb-6 p-4 bg-blue-50 border border-blue-200 rounded-xl flex items-start gap-3",4,"ngIf"],[4,"ngIf"],[1,"border-t","border-gray-200","bg-gray-50","px-6","py-4","flex-shrink-0"],[1,"flex","justify-between","items-center","w-full"],[1,"flex","items-center","gap-2","text-sm","text-gray-600"],[1,"flex","gap-3"],["type","button",1,"px-6","py-2.5","border","border-gray-300","text-gray-700","bg-white","hover:bg-gray-50","rounded-lg","transition-all","duration-200","text-sm","font-medium","shadow-sm","hover:shadow-md",3,"click"],["type","button",1,"px-6","py-2.5","bg-blue-600","text-white","hover:bg-blue-700","rounded-lg","transition-all","duration-200","text-sm","font-medium","flex","items-center","gap-2","shadow-sm","hover:shadow-md",3,"click"],[3,"openChange","patientCreated","open"],[1,"mb-6","p-4","bg-blue-50","border","border-blue-200","rounded-xl","flex","items-start","gap-3"],[1,"w-5","h-5","text-blue-600","mt-0.5","flex-shrink-0",3,"img"],[1,"text-sm","text-blue-800"],[1,"font-medium"],[3,"patientSelected"]],template:function(r,n){1&r&&(e.j41(0,"app-dialog",0),e.bIt("openChange",function(l){return n.onOpenChange(l)}),e.j41(1,"app-dialog-header",1)(2,"app-dialog-title")(3,"div",2)(4,"div",3),e.nrm(5,"lucide-icon",4),e.k0s(),e.j41(6,"div")(7,"h2",5),e.EFF(8,"Seleccionar Paciente"),e.k0s(),e.j41(9,"p",6),e.EFF(10,"Busque y seleccione el paciente para crear la prescripci\xf3n m\xe9dica"),e.k0s()()()()(),e.j41(11,"div",7)(12,"div",8)(13,"div",9)(14,"button",10),e.bIt("click",function(){return n.setActiveTab("recent")}),e.nrm(15,"lucide-icon",11),e.j41(16,"span"),e.EFF(17),e.k0s()(),e.j41(18,"button",10),e.bIt("click",function(){return n.setActiveTab("search")}),e.nrm(19,"lucide-icon",11),e.j41(20,"span"),e.EFF(21,"B\xfasqueda Avanzada"),e.k0s()()()(),e.j41(22,"div",12),e.DNE(23,Re,5,1,"div",13)(24,Te,2,0,"div",14)(25,$e,2,0,"div",14),e.k0s()(),e.j41(26,"app-dialog-footer",15)(27,"div",16)(28,"div",17),e.nrm(29,"lucide-icon",11),e.j41(30,"span"),e.EFF(31),e.k0s()(),e.j41(32,"div",18)(33,"button",19),e.bIt("click",function(){return n.onCancel()}),e.EFF(34," Cancelar "),e.k0s(),e.j41(35,"button",20),e.bIt("click",function(){return n.onNewPatient()}),e.nrm(36,"lucide-icon",11),e.EFF(37," Nuevo Paciente "),e.k0s()()()()(),e.j41(38,"app-new-patient-dialog",21),e.bIt("openChange",function(l){return n.onNewPatientDialogChange(l)})("patientCreated",function(l){return n.onPatientCreated(l)}),e.k0s()),2&r&&(e.Y8G("open",n.isOpen),e.R7$(5),e.Y8G("img",n.usersIcon),e.R7$(9),e.AVh("border-blue-500","recent"===n.activeTab)("text-blue-600","recent"===n.activeTab)("bg-blue-50","recent"===n.activeTab)("border-transparent","recent"!==n.activeTab)("text-gray-500","recent"!==n.activeTab)("hover:text-gray-700","recent"!==n.activeTab)("hover:border-gray-300","recent"!==n.activeTab),e.R7$(),e.Y8G("img",n.usersIcon),e.R7$(2),e.SpI("Pacientes Recientes (",n.recentPatientsCount,")"),e.R7$(),e.AVh("border-blue-500","search"===n.activeTab)("text-blue-600","search"===n.activeTab)("bg-blue-50","search"===n.activeTab)("border-transparent","search"!==n.activeTab)("text-gray-500","search"!==n.activeTab)("hover:text-gray-700","search"!==n.activeTab)("hover:border-gray-300","search"!==n.activeTab),e.R7$(),e.Y8G("img",n.searchIcon),e.R7$(4),e.Y8G("ngIf","recent"===n.activeTab),e.R7$(),e.Y8G("ngIf","recent"===n.activeTab),e.R7$(),e.Y8G("ngIf","search"===n.activeTab),e.R7$(4),e.Y8G("img",n.usersIcon),e.R7$(2),e.SpI("",n.totalPatients," pacientes registrados en el sistema"),e.R7$(5),e.Y8G("img",n.plusIcon),e.R7$(2),e.Y8G("open",n.showNewPatientDialog))},dependencies:[u.MD,u.bT,s.flO,s.WGl,k.mq,k.BP,k.qi,k.Z_,Y.h,ie,we],styles:['[_nghost-%COMP%]{display:block}.tab-button[_ngcontent-%COMP%]{background:none;border:none;cursor:pointer;outline:none;position:relative;transition:all .2s cubic-bezier(.4,0,.2,1);white-space:nowrap;overflow:hidden;text-overflow:ellipsis;box-sizing:border-box;-webkit-tap-highlight-color:transparent;justify-content:center}.tab-button[_ngcontent-%COMP%]:focus-visible{outline:2px solid #3b82f6;outline-offset:2px;border-radius:4px}.tab-button[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{display:block;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;max-width:100%}.tab-container[_ngcontent-%COMP%]{display:flex;width:100%;border-bottom:1px solid #e5e7eb}.tab-button.border-blue-500[_ngcontent-%COMP%]{position:relative}.tab-button.border-blue-500[_ngcontent-%COMP%]:after{content:"";position:absolute;bottom:-2px;left:0;right:0;height:2px;background-color:#3b82f6;animation:_ngcontent-%COMP%_slideIn .2s ease-out}@keyframes _ngcontent-%COMP%_slideIn{0%{transform:scaleX(0)}to{transform:scaleX(1)}}.modal-content[_ngcontent-%COMP%]{min-height:450px;max-height:70vh;overflow-y:auto}.modal-content[_ngcontent-%COMP%]::-webkit-scrollbar{width:6px}.modal-content[_ngcontent-%COMP%]::-webkit-scrollbar-track{background:#f1f5f9;border-radius:3px}.modal-content[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:#cbd5e1;border-radius:3px}.modal-content[_ngcontent-%COMP%]::-webkit-scrollbar-thumb:hover{background:#94a3b8}.modal-footer[_ngcontent-%COMP%]{backdrop-filter:blur(8px);background-color:#f9fafbf2}.patient-count-badge[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_pulse 2s infinite}@keyframes _ngcontent-%COMP%_pulse{0%,to{opacity:1}50%{opacity:.8}}.button-enhanced[_ngcontent-%COMP%]{transition:all .2s cubic-bezier(.4,0,.2,1);position:relative;overflow:hidden}.button-enhanced[_ngcontent-%COMP%]:hover{transform:translateY(-1px);box-shadow:0 4px 12px #00000026}.button-enhanced[_ngcontent-%COMP%]:active{transform:translateY(0)}.tab-trigger[_ngcontent-%COMP%]:focus-visible, .button-enhanced[_ngcontent-%COMP%]:focus-visible{outline:2px solid #3b82f6;outline-offset:2px}.loading-overlay[_ngcontent-%COMP%]{backdrop-filter:blur(2px);background-color:#fffc}@media (hover: none) and (pointer: coarse){.tab-trigger[_ngcontent-%COMP%]:hover:not(.active){background-color:transparent;transform:none}.button-enhanced[_ngcontent-%COMP%]:hover{transform:none;box-shadow:0 1px 3px #0000001a,0 1px 2px #0000000f}}button[_ngcontent-%COMP%]{border-radius:.5rem;transition:all .2s cubic-bezier(.4,0,.2,1)}button[_ngcontent-%COMP%]:hover{transform:translateY(-1px)}button[_ngcontent-%COMP%]:active{transform:translateY(0)}@media (max-width: 1024px){.modal-content[_ngcontent-%COMP%]{max-height:75vh}}@media (max-width: 768px){.modal-content[_ngcontent-%COMP%]{min-height:300px;max-height:70vh;padding:1rem}.tab-button[_ngcontent-%COMP%]{padding:.75rem .5rem;font-size:.875rem;gap:.25rem}.tab-button[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:.75rem}.button-enhanced[_ngcontent-%COMP%]{min-height:44px;padding:.75rem 1rem}}@media (max-width: 640px){.modal-content[_ngcontent-%COMP%]{min-height:250px;max-height:65vh;padding:.75rem}.tab-button[_ngcontent-%COMP%]{padding:.5rem .25rem;font-size:.75rem;gap:.125rem}.tab-button[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:.6875rem}.modal-footer[_ngcontent-%COMP%]{padding:.75rem}.modal-footer[_ngcontent-%COMP%]   .flex[_ngcontent-%COMP%]{flex-direction:column;gap:.75rem}}@media (max-width: 480px){.modal-content[_ngcontent-%COMP%]{min-height:200px;max-height:60vh;padding:.5rem}.tab-button[_ngcontent-%COMP%]{padding:.375rem .25rem;font-size:.6875rem;gap:.125rem}.tab-button[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:.625rem}.modal-footer[_ngcontent-%COMP%]{padding:.5rem}.button-enhanced[_ngcontent-%COMP%]{font-size:.875rem;padding:.5rem .75rem}}@media (max-height: 600px) and (orientation: landscape){.modal-content[_ngcontent-%COMP%]{max-height:80vh;min-height:200px}.tab-button[_ngcontent-%COMP%]{padding:.5rem .75rem}}@media (max-width: 360px){.modal-content[_ngcontent-%COMP%]{padding:.25rem}.tab-button[_ngcontent-%COMP%]{padding:.25rem .125rem;font-size:.625rem;gap:.125rem}.tab-button[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:.5625rem}.tab-button[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{display:none}.modal-footer[_ngcontent-%COMP%]{padding:.25rem}}.tab-button[_ngcontent-%COMP%]{flex:1;min-width:0;-webkit-user-select:none;user-select:none}']})}}return i})();var Ne=c(4500),De=c(2193),D=c(6283),Oe=c(1822),Ae=c(2957);function Ye(i,a){if(1&i){const t=e.RV6();e.j41(0,"div",61)(1,"button",62),e.bIt("click",function(){e.eBV(t);const n=e.XpG();return e.Njj(n.volverABorradores())}),e.nrm(2,"lucide-icon",26),e.EFF(3," Volver a Borradores "),e.k0s()()}if(2&i){const t=e.XpG();e.R7$(2),e.Y8G("img",t.arrowLeftIcon)}}function Be(i,a){1&i&&(e.j41(0,"span"),e.EFF(1,"#RX-2025-009847"),e.k0s())}function ze(i,a){if(1&i&&(e.j41(0,"span",15),e.EFF(1),e.j41(2,"span",63),e.EFF(3," Borrador "),e.k0s()()),2&i){const t=e.XpG();e.R7$(),e.SpI(" #",t.borradorId," ")}}function Xe(i,a){if(1&i&&(e.j41(0,"span",25),e.nrm(1,"lucide-icon",64),e.EFF(2," Certificada Digitalmente "),e.k0s()),2&i){const t=e.XpG();e.R7$(),e.Y8G("img",t.checkCircleIcon)}}function Le(i,a){if(1&i&&(e.j41(0,"span",65),e.nrm(1,"lucide-icon",26),e.EFF(2," Pendiente de finalizar "),e.k0s()),2&i){const t=e.XpG();e.R7$(),e.Y8G("img",t.alertTriangleIcon)}}function Ve(i,a){if(1&i){const t=e.RV6();e.j41(0,"tr",66),e.bIt("dblclick",function(){const n=e.eBV(t).$implicit,o=e.XpG();return e.Njj(o.editarMedicamento(n))}),e.j41(1,"td",67),e.EFF(2),e.k0s(),e.j41(3,"td",68),e.EFF(4),e.k0s(),e.j41(5,"td",68),e.EFF(6),e.k0s(),e.j41(7,"td",68),e.EFF(8),e.k0s(),e.j41(9,"td",68),e.EFF(10),e.k0s(),e.j41(11,"td",68),e.EFF(12),e.k0s()()}if(2&i){const t=a.$implicit;e.R7$(2),e.JRh(t.nombre),e.R7$(2),e.JRh(t.cantidad),e.R7$(2),e.JRh(t.dosis),e.R7$(2),e.JRh(t.frecuencia),e.R7$(2),e.JRh(t.via),e.R7$(2),e.JRh(t.duracion)}}function He(i,a){if(1&i&&(e.j41(0,"div",69)(1,"div",70)(2,"div",71),e.nrm(3,"lucide-icon",72),e.k0s(),e.j41(4,"div")(5,"h5",73),e.EFF(6),e.k0s(),e.j41(7,"p",74),e.EFF(8),e.k0s()()(),e.j41(9,"div",74)(10,"p"),e.EFF(11),e.k0s()(),e.j41(12,"div",75)(13,"span",76),e.EFF(14),e.k0s()()()),2&i){const t=a.$implicit,r=e.XpG();e.R7$(3),e.Y8G("img",r.pillIcon),e.R7$(3),e.JRh(t.nombre),e.R7$(2),e.Lme("",t.dosis," \u2022 ",t.frecuencia,""),e.R7$(3),e.SpI("Duraci\xf3n: ",t.duracion,""),e.R7$(3),e.JRh(t.via)}}function Qe(i,a){if(1&i){const t=e.RV6();e.j41(0,"div",77)(1,"div",78),e.bIt("click",function(){e.eBV(t);const n=e.XpG();return e.Njj(n.closeAddMedicineModal())}),e.k0s(),e.j41(2,"div",79)(3,"div",80)(4,"div",81)(5,"h3",9),e.EFF(6,"Agregar Medicamento"),e.k0s(),e.j41(7,"button",82),e.bIt("click",function(){e.eBV(t);const n=e.XpG();return e.Njj(n.closeAddMedicineModal())}),e.nrm(8,"lucide-icon",83),e.k0s()(),e.j41(9,"div",84)(10,"form",85)(11,"div")(12,"label",86),e.EFF(13,"Medicamento *"),e.k0s(),e.j41(14,"select",87),e.mxI("ngModelChange",function(n){e.eBV(t);const o=e.XpG();return e.DH7(o.nuevoMedicamento.nombre,n)||(o.nuevoMedicamento.nombre=n),e.Njj(n)}),e.j41(15,"option",88),e.EFF(16,"Seleccione un medicamento"),e.k0s(),e.j41(17,"option",89),e.EFF(18,"Ibuprofeno"),e.k0s(),e.j41(19,"option",90),e.EFF(20,"Amoxicilina"),e.k0s(),e.j41(21,"option",91),e.EFF(22,"Omeprazol"),e.k0s(),e.j41(23,"option",92),e.EFF(24,"Paracetamol"),e.k0s(),e.j41(25,"option",93),e.EFF(26,"Diclofenaco"),e.k0s(),e.j41(27,"option",94),e.EFF(28,"Enalapril"),e.k0s(),e.j41(29,"option",95),e.EFF(30,"Metformina"),e.k0s(),e.j41(31,"option",96),e.EFF(32,"Losart\xe1n"),e.k0s()()(),e.j41(33,"div")(34,"label",86),e.EFF(35,"Cantidad *"),e.k0s(),e.j41(36,"input",97),e.mxI("ngModelChange",function(n){e.eBV(t);const o=e.XpG();return e.DH7(o.nuevoMedicamento.cantidad,n)||(o.nuevoMedicamento.cantidad=n),e.Njj(n)}),e.k0s()(),e.j41(37,"div")(38,"label",86),e.EFF(39,"Dosis *"),e.k0s(),e.j41(40,"input",98),e.mxI("ngModelChange",function(n){e.eBV(t);const o=e.XpG();return e.DH7(o.nuevoMedicamento.dosis,n)||(o.nuevoMedicamento.dosis=n),e.Njj(n)}),e.k0s()(),e.j41(41,"div")(42,"label",86),e.EFF(43,"Frecuencia *"),e.k0s(),e.j41(44,"select",99),e.mxI("ngModelChange",function(n){e.eBV(t);const o=e.XpG();return e.DH7(o.nuevoMedicamento.frecuencia,n)||(o.nuevoMedicamento.frecuencia=n),e.Njj(n)}),e.j41(45,"option",88),e.EFF(46,"Seleccione la frecuencia"),e.k0s(),e.j41(47,"option",100),e.EFF(48,"1 vez al d\xeda"),e.k0s(),e.j41(49,"option",101),e.EFF(50,"2 veces al d\xeda"),e.k0s(),e.j41(51,"option",102),e.EFF(52,"3 veces al d\xeda"),e.k0s(),e.j41(53,"option",103),e.EFF(54,"Cada 8 horas"),e.k0s(),e.j41(55,"option",104),e.EFF(56,"Cada 12 horas"),e.k0s(),e.j41(57,"option",105),e.EFF(58,"Seg\xfan necesidad"),e.k0s()()(),e.j41(59,"div")(60,"label",86),e.EFF(61,"V\xeda de Administraci\xf3n *"),e.k0s(),e.j41(62,"select",106),e.mxI("ngModelChange",function(n){e.eBV(t);const o=e.XpG();return e.DH7(o.nuevoMedicamento.via,n)||(o.nuevoMedicamento.via=n),e.Njj(n)}),e.j41(63,"option",88),e.EFF(64,"Seleccione la v\xeda"),e.k0s(),e.j41(65,"option",107),e.EFF(66,"Oral"),e.k0s(),e.j41(67,"option",108),e.EFF(68,"Intramuscular"),e.k0s(),e.j41(69,"option",109),e.EFF(70,"Intravenosa"),e.k0s(),e.j41(71,"option",110),e.EFF(72,"T\xf3pica"),e.k0s(),e.j41(73,"option",111),e.EFF(74,"Sublingual"),e.k0s()()(),e.j41(75,"div")(76,"label",86),e.EFF(77,"Duraci\xf3n *"),e.k0s(),e.j41(78,"input",112),e.mxI("ngModelChange",function(n){e.eBV(t);const o=e.XpG();return e.DH7(o.nuevoMedicamento.duracion,n)||(o.nuevoMedicamento.duracion=n),e.Njj(n)}),e.k0s()(),e.j41(79,"div")(80,"label",86),e.EFF(81,"Observaciones"),e.k0s(),e.j41(82,"textarea",113),e.mxI("ngModelChange",function(n){e.eBV(t);const o=e.XpG();return e.DH7(o.nuevoMedicamento.observaciones,n)||(o.nuevoMedicamento.observaciones=n),e.Njj(n)}),e.k0s()()()(),e.j41(83,"div",114)(84,"button",115),e.bIt("click",function(){e.eBV(t);const n=e.XpG();return e.Njj(n.closeAddMedicineModal())}),e.EFF(85," Cancelar "),e.k0s(),e.j41(86,"button",116),e.bIt("click",function(){e.eBV(t);const n=e.XpG();return e.Njj(n.agregarMedicamentoALista())}),e.EFF(87," Agregar Medicamento "),e.k0s()()()()()}if(2&i){const t=e.XpG();e.R7$(8),e.Y8G("img",t.xIcon),e.R7$(6),e.R50("ngModel",t.nuevoMedicamento.nombre),e.R7$(22),e.R50("ngModel",t.nuevoMedicamento.cantidad),e.R7$(4),e.R50("ngModel",t.nuevoMedicamento.dosis),e.R7$(4),e.R50("ngModel",t.nuevoMedicamento.frecuencia),e.R7$(18),e.R50("ngModel",t.nuevoMedicamento.via),e.R7$(16),e.R50("ngModel",t.nuevoMedicamento.duracion),e.R7$(4),e.R50("ngModel",t.nuevoMedicamento.observaciones)}}function Je(i,a){if(1&i){const t=e.RV6();e.j41(0,"div",117)(1,"div",78),e.bIt("click",function(){e.eBV(t);const n=e.XpG();return e.Njj(n.cerrarModalFinalizar())}),e.k0s(),e.j41(2,"div",118)(3,"div",81)(4,"div",7)(5,"div",119),e.nrm(6,"lucide-icon",43),e.k0s(),e.j41(7,"h3",9),e.EFF(8,"Finalizar Prescripci\xf3n"),e.k0s()(),e.j41(9,"button",82),e.bIt("click",function(){e.eBV(t);const n=e.XpG();return e.Njj(n.cerrarModalFinalizar())}),e.nrm(10,"lucide-icon",83),e.k0s()(),e.j41(11,"div",120)(12,"div",121)(13,"div",122),e.nrm(14,"lucide-icon",123),e.j41(15,"h4",124),e.EFF(16,"Prescripci\xf3n Finalizada y Firmada"),e.k0s()(),e.j41(17,"p",125),e.EFF(18,"La receta ha sido emitida exitosamente y est\xe1 lista para ser dispensada."),e.k0s()(),e.j41(19,"div",126)(20,"div",6)(21,"span",127),e.EFF(22,"N\xfamero de Receta:"),e.k0s(),e.j41(23,"span",128),e.EFF(24,"RX-2025-009844"),e.k0s()(),e.j41(25,"div",129)(26,"div")(27,"span",125),e.EFF(28,"Paciente:"),e.k0s(),e.j41(29,"p",130),e.EFF(30,"Mar\xeda Elena Gonz\xe1lez"),e.k0s()(),e.j41(31,"div")(32,"span",125),e.EFF(33,"ID Paciente:"),e.k0s(),e.j41(34,"p",130),e.EFF(35,"CC-52.841.963"),e.k0s()(),e.j41(36,"div")(37,"span",125),e.EFF(38,"M\xe9dico:"),e.k0s(),e.j41(39,"p",130),e.EFF(40,"Dr. Carlos Alberto Mendoza Herrera"),e.k0s()(),e.j41(41,"div")(42,"span",125),e.EFF(43,"Medicamentos:"),e.k0s(),e.j41(44,"p",130),e.EFF(45,"3"),e.k0s()(),e.j41(46,"div",131)(47,"span",125),e.EFF(48,"Fecha y Hora:"),e.k0s(),e.j41(49,"p",130),e.EFF(50,"10/10/2025 - 11:48"),e.k0s()()()(),e.j41(51,"div",132)(52,"div",42),e.nrm(53,"lucide-icon",31),e.j41(54,"h5",133),e.EFF(55,"Firma Digital Aplicada"),e.k0s()(),e.j41(56,"div",134)(57,"div",135)(58,"span",125),e.EFF(59,"Token de firma:"),e.k0s(),e.j41(60,"span",130),e.EFF(61,"SIG-2025-XXXXXX"),e.k0s()(),e.j41(62,"div",135)(63,"span",125),e.EFF(64,"C\xf3digo QR:"),e.k0s(),e.j41(65,"span",130),e.EFF(66,"QR-RX-2025-009844"),e.k0s()(),e.j41(67,"div",136)(68,"span",125),e.EFF(69,"Estado:"),e.k0s(),e.j41(70,"span",137),e.EFF(71,"Emitida"),e.k0s()()()(),e.j41(72,"div",138)(73,"div",15),e.nrm(74,"lucide-icon",64),e.j41(75,"span"),e.EFF(76,"La receta ha sido registrada en el sistema de recetas emitidas"),e.k0s()(),e.j41(77,"div",15),e.nrm(78,"lucide-icon",72),e.j41(79,"span"),e.EFF(80,"Puede imprimir o enviar la receta al paciente"),e.k0s()(),e.j41(81,"div",15),e.nrm(82,"lucide-icon",139),e.j41(83,"span"),e.EFF(84,"La firma digital garantiza la autenticidad de la prescripci\xf3n"),e.k0s()()()(),e.j41(85,"div",114)(86,"button",140),e.bIt("click",function(){e.eBV(t);const n=e.XpG();return e.Njj(n.verRecetasEmitidas())}),e.nrm(87,"lucide-icon",26),e.EFF(88," Ver Recetas Emitidas "),e.k0s(),e.j41(89,"button",140),e.bIt("click",function(){e.eBV(t);const n=e.XpG();return e.Njj(n.imprimirReceta())}),e.nrm(90,"lucide-icon",26),e.EFF(91," Imprimir Receta "),e.k0s(),e.j41(92,"button",141),e.bIt("click",function(){e.eBV(t);const n=e.XpG();return e.Njj(n.nuevaPrescripcion())}),e.nrm(93,"lucide-icon",26),e.EFF(94," Nueva Prescripci\xf3n "),e.k0s()()()()}if(2&i){const t=e.XpG();e.R7$(6),e.Y8G("img",t.checkCircleIcon),e.R7$(4),e.Y8G("img",t.xIcon),e.R7$(4),e.Y8G("img",t.checkCircleIcon),e.R7$(39),e.Y8G("img",t.checkCircleIcon),e.R7$(21),e.Y8G("img",t.checkCircleIcon),e.R7$(4),e.Y8G("img",t.fileTextIcon),e.R7$(4),e.Y8G("img",t.checkCircleIcon),e.R7$(5),e.Y8G("img",t.fileTextIcon),e.R7$(3),e.Y8G("img",t.fileTextIcon),e.R7$(3),e.Y8G("img",t.plusIcon)}}function Ue(i,a){if(1&i){const t=e.RV6();e.j41(0,"div",117)(1,"div",78),e.bIt("click",function(){e.eBV(t);const n=e.XpG();return e.Njj(n.cerrarModalGuardarCambios())}),e.k0s(),e.j41(2,"div",142)(3,"div",81)(4,"div",7)(5,"div",119),e.nrm(6,"lucide-icon",43),e.k0s(),e.j41(7,"h3",9),e.EFF(8,"Borrador Guardado Exitosamente"),e.k0s()(),e.j41(9,"button",143),e.bIt("click",function(){e.eBV(t);const n=e.XpG();return e.Njj(n.cerrarModalGuardarCambios())}),e.nrm(10,"lucide-icon",83),e.k0s()(),e.j41(11,"div",144)(12,"div",145),e.nrm(13,"lucide-icon",146),e.k0s(),e.j41(14,"h4",147),e.EFF(15,"Su receta ha sido guardada como borrador y puede continuarla m\xe1s tarde."),e.k0s(),e.j41(16,"div",148)(17,"div",134)(18,"div",135)(19,"span",125),e.EFF(20,"ID del Borrador:"),e.k0s(),e.j41(21,"span",149),e.EFF(22,"draft-176011670135-17dii8vlo"),e.k0s()(),e.j41(23,"div",135)(24,"span",125),e.EFF(25,"Paciente:"),e.k0s(),e.j41(26,"span",149),e.EFF(27,"Mar\xeda Elena Gonz\xe1lez"),e.k0s()(),e.j41(28,"div",135)(29,"span",125),e.EFF(30,"Medicamentos:"),e.k0s(),e.j41(31,"span",149),e.EFF(32),e.k0s()(),e.j41(33,"div",135)(34,"span",125),e.EFF(35,"\xdaltima actualizaci\xf3n:"),e.k0s(),e.j41(36,"span",149),e.EFF(37,"10/10/2025 11:18"),e.k0s()()()(),e.j41(38,"div",150)(39,"div",151),e.nrm(40,"lucide-icon",152),e.j41(41,"div",153)(42,"p",154),e.EFF(43,'El borrador estar\xe1 disponible en "Mis Borradores"'),e.k0s(),e.j41(44,"p"),e.EFF(45,"Puede editar o finalizar el borrador en cualquier momento"),e.k0s()()()()(),e.j41(46,"div",155)(47,"button",156),e.bIt("click",function(){e.eBV(t);const n=e.XpG();return e.Njj(n.irAMisBorradores())}),e.EFF(48," Ir a Mis Borradores "),e.k0s(),e.j41(49,"button",157),e.bIt("click",function(){e.eBV(t);const n=e.XpG();return e.Njj(n.continuarEditando())}),e.EFF(50," Continuar Editando "),e.k0s()()()()}if(2&i){const t=e.XpG();e.R7$(6),e.Y8G("img",t.checkCircleIcon),e.R7$(4),e.Y8G("img",t.xIcon),e.R7$(3),e.Y8G("img",t.checkCircleIcon),e.R7$(19),e.JRh(t.medicamentosMock.length),e.R7$(8),e.Y8G("img",t.alertTriangleIcon)}}let qe=(()=>{class i{constructor(t,r,n,o,l){this.router=t,this.route=r,this.notificationService=n,this.roleDemoService=o,this.roleSuggestionService=l,this.fileTextIcon=s.iUU,this.plusIcon=s.FWt,this.arrowLeftIcon=s.nkM,this.userIcon=s.KJW,this.searchIcon=s.vji,this.calendarIcon=s.VvS,this.pillIcon=s.abF,this.saveIcon=s.eMP,this.sendIcon=s.Vnp,this.alertTriangleIcon=s.hcu,this.checkCircleIcon=s.rAV,this.xIcon=s.X,this.busquedaPaciente="",this.pacienteSeleccionado=null,this.pacientesFiltrados=[],this.alertas=[],this.showAddMedicineModal=!1,this.showFinalizarModal=!1,this.showBorradorModal=!1,this.showDrugBankModal=!1,this.showGuardarCambiosModal=!1,this.drugBankResultados=[],this.selectedPatient=null,this.showPatientSelectionModal=!1,this.showRoleSuggestionModal=(0,e.vPA)(!1),this.subscriptions=new v.yU,this.pageTitle="Nueva Receta M\xe9dica",this.pageDescription="Sistema de prescripci\xf3n electr\xf3nica con alertas cl\xednicas en tiempo real",this.esModoEdicionBorrador=!1,this.borradorId=null,this.breadcrumbItems=[{label:"Prescripciones",route:"/prescripciones"},{label:"Nueva receta"}],this.notificaciones=[],this.mostrarSugerenciasDiagnostico=!1,this.diagnosticosFiltrados=[],this.mostrarPlantillas=!1,this.prescripcion={diagnostico:"",fechaConsulta:(new Date).toISOString().split("T")[0],observaciones:"",medicamentos:[]},this.nuevoMedicamento={nombre:"",cantidad:"",dosis:"",frecuencia:"",via:"",duracion:"",observaciones:""},this.medicamentosMock=[{nombre:"Ibuprofeno",cantidad:"15 tabletas",dosis:"400 mg",frecuencia:"3 veces al d\xeda",via:"Oral",duracion:"5 d\xedas"},{nombre:"Amoxicilina",cantidad:"14 c\xe1psulas",dosis:"500 mg",frecuencia:"2 veces al d\xeda",via:"Oral",duracion:"7 d\xedas"},{nombre:"Omeprazol",cantidad:"14 tabletas",dosis:"20 mg",frecuencia:"1 vez al d\xeda",via:"Oral",duracion:"14 d\xedas"}],this.plantillasComunes=[{nombre:"Hipertensi\xf3n Arterial",diagnostico:"Hipertensi\xf3n arterial esencial (I10)",medicamentos:[{name:"Enalapril",dose:"10mg",frequency:"Dos veces al d\xeda (BID)",duration:"30 d\xedas",administration:"Oral",quantity:"60",observations:"Tomar con alimentos"},{name:"Hidroclorotiazida",dose:"25mg",frequency:"Una vez al d\xeda (QD)",duration:"30 d\xedas",administration:"Oral",quantity:"30",observations:"Tomar en la ma\xf1ana"}]},{nombre:"Diabetes Tipo 2",diagnostico:"Diabetes mellitus tipo 2 no insulinodependiente (E11.9)",medicamentos:[{name:"Metformina",dose:"850mg",frequency:"Dos veces al d\xeda (BID)",duration:"30 d\xedas",administration:"Oral",quantity:"60",observations:"Tomar con las comidas"}]},{nombre:"Infecci\xf3n Respiratoria",diagnostico:"Infecci\xf3n respiratoria aguda del tracto superior (J06.9)",medicamentos:[{name:"Amoxicilina",dose:"500mg",frequency:"Cada 8 horas",duration:"7 d\xedas",administration:"Oral",quantity:"21",observations:"Completar todo el tratamiento"},{name:"Paracetamol (Acetaminof\xe9n)",dose:"500mg",frequency:"Cada 6 horas",duration:"5 d\xedas",administration:"Oral",quantity:"20",observations:"Seg\xfan necesidad para fiebre o dolor"}]}],this.diagnosticosComunes=["Hipertensi\xf3n arterial esencial (I10)","Diabetes mellitus tipo 2 no insulinodependiente (E11.9)","Infecci\xf3n respiratoria aguda del tracto superior (J06.9)","Gastritis cr\xf3nica atr\xf3fica (K29.40)","Artritis reumatoide seropositiva (M05.9)","Migra\xf1a sin aura, epis\xf3dica (G43.009)","Osteoartritis de rodilla bilateral (M17.0)","Trastorno de ansiedad generalizada (F41.1)","Hipotiroidismo primario (E03.9)","Reflujo gastroesof\xe1gico con esofagitis (K21.0)","S\xedndrome del t\xfanel carpiano bilateral (G56.00)","Hiperplasia benigna de pr\xf3stata (N40)","Asma bronquial (J45.9)","Depresi\xf3n mayor recurrente (F33.9)","Fibromialgia (M79.3)","S\xedndrome del intestino irritable (K58.9)","Cefalea tensional epis\xf3dica (G44.2)","Dermatitis at\xf3pica (L20.9)","Conjuntivitis al\xe9rgica (H10.1)","Lumbalgia mec\xe1nica (M54.5)"],this.pacientesDisponibles=[{id:"PAC-2025-001",nombre:"Mar\xeda Elena Gonz\xe1lez P\xe9rez",cedula:"CC-1.234.567",edad:45,alergias:["Penicilina","Mariscos","Sulfonamidas","Yodo"]},{id:"PAC-2025-002",nombre:"Juan Carlos Rodr\xedguez Mora",cedula:"CC-2.345.678",edad:32,alergias:[]},{id:"PAC-2025-003",nombre:"Ana Sof\xeda L\xf3pez Vargas",cedula:"CC-3.456.789",edad:28,alergias:["Aspirina","AINEs"]},{id:"PAC-2025-004",nombre:"Carlos Alberto Jim\xe9nez Castro",cedula:"CC-4.567.890",edad:58,alergias:["Ibuprofeno","Latex","Contraste yodado"]},{id:"PAC-2025-005",nombre:"Luc\xeda Patricia Hern\xe1ndez Sol\xeds",cedula:"CC-5.678.901",edad:35,alergias:["Penicilina","Amoxicilina"]},{id:"PAC-2025-006",nombre:"Roberto Jos\xe9 Quesada Fallas",cedula:"CC-6.789.012",edad:42,alergias:[]},{id:"PAC-2025-007",nombre:"Carmen Elena Vargas Mora",cedula:"CC-7.890.123",edad:67,alergias:["Sulfonamidas","Morfina"]},{id:"PAC-2025-008",nombre:"Miguel \xc1ngel Rojas Sol\xeds",cedula:"CC-8.901.234",edad:29,alergias:["Mariscos","Frutos secos"]},{id:"PAC-2025-009",nombre:"Patricia Morales Vega",cedula:"CC-9.012.345",edad:51,alergias:["Code\xedna","Latex"]},{id:"PAC-2025-010",nombre:"Jos\xe9 Manuel Fern\xe1ndez Arias",cedula:"CC-1.023.456",edad:38,alergias:[]},{id:"PAC-2025-011",nombre:"Silvia Beatriz Campos N\xfa\xf1ez",cedula:"CC-1.134.567",edad:44,alergias:["Penicilina","Sulfa"]},{id:"PAC-2025-012",nombre:"Fernando Antonio Soto Ram\xedrez",cedula:"CC-1.245.678",edad:62,alergias:["Aspirina","Warfarina"]}]}ngOnInit(){this.checkRoleSuggestion();const t=this.roleDemoService.currentSession$.subscribe(o=>{"M\xe9dico"===o.activeRole&&(this.showRoleSuggestionModal.set(!1),this.roleSuggestionService.clearDismissedPages())});this.subscriptions.add(t),this.handlePatientPreselection();const r=this.route.snapshot.queryParamMap.get("borrador");console.log("Par\xe1metro borrador detectado:",r),r?(console.log("Activando modo edici\xf3n borrador para:",r),this.esModoEdicionBorrador=!0,this.borradorId=r,this.configurarModoEdicionBorrador(),this.cargarDatosBorrador(r)):console.log("Modo nueva receta normal");const n=this.route.queryParams.subscribe(o=>{console.log("Query params cambiaron:",o),o.borrador&&!this.esModoEdicionBorrador&&(this.esModoEdicionBorrador=!0,this.borradorId=o.borrador,this.configurarModoEdicionBorrador(),this.cargarDatosBorrador(o.borrador))});this.subscriptions.add(n)}ngOnDestroy(){this.subscriptions.unsubscribe()}checkRoleSuggestion(){const t=this.roleDemoService.getCurrentSession();this.showRoleSuggestionModal.set("M\xe9dico"!==t.activeRole&&"Administrador"!==t.activeRole)}onRoleSuggestionDismiss(){this.showRoleSuggestionModal.set(!1)}onRoleChanged(){this.showRoleSuggestionModal.set(!1)}handlePatientPreselection(){const t=this.route.snapshot.params.patientId;t&&(console.log("Patient ID from route:",t),this.preselectPatientById(t))}preselectPatientById(t){console.log("Preselecting patient with ID:",t);const n={"PAT-001":{selectedPatient:{id:"PAT-001",fullName:"Mar\xeda Elena Gonz\xe1lez Rodr\xedguez",firstName:"Mar\xeda Elena",firstLastName:"Gonz\xe1lez",secondLastName:"Rodr\xedguez",idType:"CC",idNumber:"52.841.963",birthDate:"1978-03-15",age:45,gender:"F",bloodType:"O+",phone:"+57 310 456-7890",email:"maria.gonzalez@email.com",address:"Calle 123 #45-67",city:"Bogot\xe1",country:"Colombia",status:"active",allergies:["Penicilina","Sulfas","Mariscos"],chronicConditions:["Hipertensi\xf3n arterial","Diabetes tipo 2","Hipotiroidismo"],currentMedications:["Losart\xe1n 50mg - 1 vez al d\xeda","Metformina 850mg - 2 veces al d\xeda","Levotiroxina 75mcg - 1 vez al d\xeda"],registrationDate:"2023-01-15"},pacienteSeleccionado:{id:"PAT-001",nombre:"Mar\xeda Elena Gonz\xe1lez Rodr\xedguez",cedula:"52.841.963",edad:45,alergias:["Penicilina","Sulfas","Mariscos"]}}}[t];n?(this.selectedPatient=n.selectedPatient,this.pacienteSeleccionado=n.pacienteSeleccionado,this.busquedaPaciente=n.pacienteSeleccionado.nombre,console.log("Patient preselected successfully:",this.selectedPatient),this.notificationService.showSuccess("Paciente preseleccionado",`${n.selectedPatient.fullName} ha sido seleccionado autom\xe1ticamente`)):(console.warn("Patient not found with ID:",t),this.notificationService.showWarning("Paciente no encontrado","No se pudo preseleccionar el paciente. Por favor seleccione uno manualmente."))}configurarModoEdicionBorrador(){console.log("Configurando modo edici\xf3n borrador..."),this.pageTitle="Editar Borrador de Receta",this.pageDescription="Contin\xfaa editando tu prescripci\xf3n guardada como borrador",this.breadcrumbItems=[{label:"Prescripciones",route:"/prescripciones"},{label:"Borradores",route:"/prescripciones/borradores"},{label:"Editar borrador"}],console.log("T\xedtulo actualizado a:",this.pageTitle),console.log("esModoEdicionBorrador:",this.esModoEdicionBorrador)}cargarDatosBorrador(t){console.log("=== INICIANDO CARGA DE BORRADOR ==="),console.log("ID del borrador:",t);const r=this.buscarBorradorPorId(t);r?(this.pacienteSeleccionado={id:r.paciente.cedula,nombre:r.paciente.nombre,cedula:r.paciente.cedula,edad:r.paciente.edad,alergias:["Penicilina"]},console.log("Paciente cargado:",this.pacienteSeleccionado),this.medicamentosMock=r.medicamentos,console.log("Medicamentos cargados:",this.medicamentosMock),this.busquedaPaciente=this.pacienteSeleccionado.nombre):console.error("Borrador no encontrado:",t),console.log("=== CARGA DE BORRADOR COMPLETADA ===")}buscarBorradorPorId(t){return[{id:"BR-2025-001234",paciente:{nombre:"Mar\xeda Elena Gonz\xe1lez Rodr\xedguez",cedula:"CC-1.234.567",edad:45,genero:"F"},medicamentos:[{nombre:"Enalapril",cantidad:"30 tabletas",dosis:"10mg",frecuencia:"2 veces al d\xeda",via:"Oral",duracion:"30 d\xedas"},{nombre:"Hidroclorotiazida",cantidad:"30 tabletas",dosis:"25mg",frecuencia:"1 vez al d\xeda",via:"Oral",duracion:"30 d\xedas"}]},{id:"BR-2025-001235",paciente:{nombre:"Juan Carlos Mart\xednez L\xf3pez",cedula:"CC-2.345.678",edad:62,genero:"M"},medicamentos:[{nombre:"Metformina",cantidad:"60 tabletas",dosis:"850mg",frecuencia:"2 veces al d\xeda",via:"Oral",duracion:"30 d\xedas"},{nombre:"Glibenclamida",cantidad:"30 tabletas",dosis:"5mg",frecuencia:"1 vez al d\xeda",via:"Oral",duracion:"30 d\xedas"}]},{id:"BR-2025-001236",paciente:{nombre:"Ana Sof\xeda L\xf3pez Vargas",cedula:"CC-3.456.789",edad:28,genero:"F"},medicamentos:[{nombre:"Sumatript\xe1n",cantidad:"6 tabletas",dosis:"50mg",frecuencia:"Seg\xfan necesidad",via:"Oral",duracion:"14 d\xedas"}]}].find(n=>n.id===t)}volverABorradores(){this.router.navigate(["/prescripciones/borradores"])}buscarPacientes(){if(this.busquedaPaciente.trim().length<2)return void(this.pacientesFiltrados=[]);const t=this.busquedaPaciente.toLowerCase();this.pacientesFiltrados=this.pacientesDisponibles.filter(r=>r.nombre.toLowerCase().includes(t)||r.cedula.includes(t))}seleccionarPaciente(t){this.pacienteSeleccionado=t,this.busquedaPaciente=t.nombre,this.pacientesFiltrados=[],this.verificarAlertas()}buscarDiagnosticos(){if(this.prescripcion.diagnostico.trim().length<2)return void(this.diagnosticosFiltrados=[]);const t=this.prescripcion.diagnostico.toLowerCase();this.diagnosticosFiltrados=this.diagnosticosComunes.filter(r=>r.toLowerCase().includes(t)).slice(0,5)}seleccionarDiagnostico(t){this.prescripcion.diagnostico=t,this.diagnosticosFiltrados=[],this.mostrarSugerenciasDiagnostico=!1}ocultarSugerenciasDiagnostico(){setTimeout(()=>{this.mostrarSugerenciasDiagnostico=!1},200)}aplicarPlantilla(t){this.prescripcion.diagnostico.trim()||(this.prescripcion.diagnostico=t.diagnostico),t.medicamentos.forEach(r=>{const n={id:Date.now().toString()+Math.random(),name:r.name,dose:r.dose,frequency:r.frequency,duration:r.duration,administration:r.administration,quantity:r.quantity,observations:r.observations};this.prescripcion.medicamentos.push(n)}),this.mostrarPlantillas=!1,this.verificarAlertas()}getInitials(t){return t.split(" ").map(r=>r[0]).join("").substring(0,2).toUpperCase()}editarMedicamento(t){console.log("Editar medicamento:",t)}agregarMedicamentoALista(){this.nuevoMedicamento.nombre&&this.nuevoMedicamento.cantidad&&this.nuevoMedicamento.dosis&&this.nuevoMedicamento.frecuencia&&this.nuevoMedicamento.via&&this.nuevoMedicamento.duracion?(this.medicamentosMock.push({nombre:this.nuevoMedicamento.nombre,cantidad:this.nuevoMedicamento.cantidad,dosis:this.nuevoMedicamento.dosis,frecuencia:this.nuevoMedicamento.frecuencia,via:this.nuevoMedicamento.via,duracion:this.nuevoMedicamento.duracion}),this.nuevoMedicamento={nombre:"",cantidad:"",dosis:"",frecuencia:"",via:"",duracion:"",observaciones:""},this.closeAddMedicineModal(),console.log("Medicamento agregado:",this.medicamentosMock)):alert("\u26a0\ufe0f Por favor complete todos los campos obligatorios")}agregarMedicamento(){this.selectedPatient?this.showAddMedicineModal=!0:this.notificationService.showNoPatientSelectedWarning()}closeAddMedicineModal(){this.showAddMedicineModal=!1}onMedicineAdded(t){const r={id:Date.now().toString(),name:t.name,dose:t.dose,frequency:t.frequency,duration:t.duration,administration:t.administration,quantity:t.quantity,observations:t.observations};this.prescripcion.medicamentos.push(r),this.verificarAlertas()}eliminarMedicamento(t){this.prescripcion.medicamentos.splice(t,1),this.verificarAlertas()}verificarAlertas(){this.alertas=[],this.pacienteSeleccionado&&this.pacienteSeleccionado.alergias.length>0&&this.prescripcion.medicamentos.forEach(r=>{r.name.trim()&&this.pacienteSeleccionado.alergias.forEach(n=>{const o=r.name.toLowerCase(),l=n.toLowerCase();(o.includes(l)||"penicilina"===l&&(o.includes("amoxicilina")||o.includes("ampicilina"))||"aspirina"===l&&o.includes("\xe1cido acetilsalic\xedlico")||"ibuprofeno"===l&&o.includes("advil"))&&this.alertas.push(`\u26a0\ufe0f ALERTA: ${r.name} puede causar reacci\xf3n al\xe9rgica (paciente al\xe9rgico a ${n})`)})});const t=this.prescripcion.medicamentos.map(r=>r.name.toLowerCase());t.includes("warfarina")&&t.includes("aspirina")&&this.alertas.push("\u26a0\ufe0f INTERACCI\xd3N: Warfarina + Aspirina puede aumentar riesgo de sangrado"),this.pacienteSeleccionado&&this.pacienteSeleccionado.edad>=65&&this.prescripcion.medicamentos.forEach(r=>{(r.name.toLowerCase().includes("diazepam")||r.name.toLowerCase().includes("lorazepam"))&&this.alertas.push("\u26a0\ufe0f PRECAUCI\xd3N: Benzodiacepinas en adultos mayores requieren dosis reducida")})}puedeCompletar(){return!!(this.pacienteSeleccionado&&this.prescripcion.diagnostico.trim()&&this.prescripcion.medicamentos.length>0&&this.prescripcion.medicamentos.every(t=>t.name.trim()&&t.dose.trim()&&t.frequency))}guardarBorrador(){const t=this.generarIdBorrador();console.log("Guardando borrador:",{id:t,paciente:this.pacienteSeleccionado,prescripcion:this.prescripcion,medicamentos:this.medicamentosMock,fechaCreacion:(new Date).toISOString()}),setTimeout(()=>{alert(`\u{1f4be} Borrador Guardado Exitosamente\n\n\u{1f4cb} ID: ${t}\n\u{1f464} Paciente: Mar\xeda Elena Gonz\xe1lez Rodr\xedguez\n\u{1f48a} Medicamentos: ${this.medicamentosMock.length}\n\u{1f4c5} Fecha: ${this.getFechaActual()}\n\n\u2705 El borrador se ha guardado correctamente y puede continuar edit\xe1ndolo m\xe1s tarde.`)},500)}verificarConDrugBank(){console.log("Verificando medicamentos con DrugBank:",this.medicamentosMock),this.mostrarNotificacion("info","Consultando DrugBank...","Verificando interacciones con base de datos externa"),setTimeout(()=>{this.cerrarTodasLasNotificaciones(),this.mostrarNotificacion("success","Consulta completada: DrugBank","No se encontraron interacciones adicionales")},2e3)}abrirModalFinalizar(){this.showFinalizarModal=!0}cerrarModalFinalizar(){this.showFinalizarModal=!1}confirmarFinalizacion(){const t=this.generarIdReceta();console.log("Finalizando prescripci\xf3n:",{id:t,paciente:"Mar\xeda Elena Gonz\xe1lez Rodr\xedguez",medico:"Dr. Carlos Alberto Mendoza Herrera",medicamentos:this.medicamentosMock,fechaEmision:(new Date).toISOString()}),this.showFinalizarModal=!1,setTimeout(()=>{alert(`\u{1f389} Prescripci\xf3n Finalizada Exitosamente\n\n\u{1f4cb} N\xfamero de Receta: ${t}\n\u{1f464} Paciente: Mar\xeda Elena Gonz\xe1lez Rodr\xedguez\n\u{1f468}\u200d\u2695\ufe0f M\xe9dico: Dr. Carlos Alberto Mendoza Herrera\n\u{1f48a} Medicamentos: ${this.medicamentosMock.length}\n\u{1f4c5} Fecha de Emisi\xf3n: ${this.getFechaActual()}\n\u{1f510} Estado: Certificada Digitalmente\n\n\u2705 La prescripci\xf3n ha sido emitida y enviada al sistema nacional de salud.\n\u{1f4e7} Se ha enviado una copia por correo electr\xf3nico al paciente.\n\u{1f3e5} La receta est\xe1 disponible en todas las farmacias autorizadas.`),console.log("Navegando a recetas emitidas...")},1500)}completarPrescripcion(){this.abrirModalFinalizar()}verRecetasEmitidas(){this.showFinalizarModal=!1,console.log("Navegando a Ver Recetas Emitidas...")}imprimirReceta(){console.log("Imprimiendo receta RX-2025-009844..."),alert("\u{1f4c4} Preparando impresi\xf3n de la receta RX-2025-009844...")}nuevaPrescripcion(){this.showFinalizarModal=!1,this.limpiarFormulario(),console.log("Iniciando nueva prescripci\xf3n...")}guardarCambios(){console.log("Guardando cambios como borrador..."),this.mostrarNotificacion("success","Borrador guardado exitosamente","N\xfamero de borrador: draft-176011670135-17dii8vlo"),setTimeout(()=>{this.showGuardarCambiosModal=!0},1e3)}cerrarModalGuardarCambios(){this.showGuardarCambiosModal=!1}cancelar(){this.esModoEdicionBorrador?this.volverABorradores():this.router.navigate(["/prescripciones"])}irAMisBorradores(){this.showGuardarCambiosModal=!1,console.log("Navegando a Mis Borradores...")}continuarEditando(){this.showGuardarCambiosModal=!1}getFechaActual(){return(new Date).toLocaleDateString("es-CR")}getHoraActual(){return(new Date).toLocaleTimeString("es-CR",{hour:"2-digit",minute:"2-digit"})}generarIdBorrador(){return`BR-${(new Date).getFullYear()}-${String(Math.floor(999999*Math.random())).padStart(6,"0")}`}generarIdReceta(){return`RX-${(new Date).getFullYear()}-${String(Math.floor(999999*Math.random())).padStart(6,"0")}`}mostrarNotificacion(t,r,n){const o=Date.now().toString();this.notificaciones.push({id:o,tipo:t,titulo:r,mensaje:n,visible:!1}),setTimeout(()=>{const g=this.notificaciones.find(M=>M.id===o);g&&(g.visible=!0)},100),setTimeout(()=>{this.cerrarNotificacion(o)},4e3)}cerrarNotificacion(t){const r=this.notificaciones.find(n=>n.id===t);r&&(r.visible=!1,setTimeout(()=>{this.notificaciones=this.notificaciones.filter(n=>n.id!==t)},300))}cerrarTodasLasNotificaciones(){this.notificaciones.forEach(t=>{t.visible=!1}),setTimeout(()=>{this.notificaciones=[]},300)}limpiarFormulario(){this.pacienteSeleccionado=null,this.busquedaPaciente="",this.pacientesFiltrados=[],this.prescripcion={diagnostico:"",fechaConsulta:(new Date).toISOString().split("T")[0],observaciones:"",medicamentos:[]},this.alertas=[],this.medicamentosMock=[],this.selectedPatient=null}openPatientSelectionModal(){this.showPatientSelectionModal=!0}closePatientSelectionModal(){this.showPatientSelectionModal=!1}onPatientSelected(t){this.selectedPatient={id:t.id||"",fullName:t.fullName||`${t.firstName} ${t.firstLastName}`,firstName:t.firstName,secondName:t.secondName,firstLastName:t.firstLastName,secondLastName:t.secondLastName,idType:t.idType,idNumber:t.idNumber,birthDate:t.birthDate,age:t.age||0,gender:t.gender,bloodType:t.bloodType,phone:t.phone,email:t.email,address:t.address,city:t.city,country:t.country,occupation:t.occupation,weight:t.weight,height:t.height,bmi:t.bmi,insuranceProvider:t.insuranceProvider,insuranceNumber:t.insuranceNumber,insuranceType:t.insuranceType,allergies:t.allergies||[],chronicConditions:t.chronicConditions||[],currentMedications:t.currentMedications||[],clinicalNotes:t.clinicalNotes,emergencyContact:{name:t.emergencyContact?.name||"",relationship:t.emergencyContact?.relationship||"",phone:t.emergencyContact?.phone||""},registrationDate:t.registrationDate||(new Date).toISOString(),status:"active",lastVisit:void 0},this.pacienteSeleccionado={id:t.id||"",nombre:t.fullName||`${t.firstName} ${t.firstLastName}`,cedula:t.idNumber,edad:t.age||0,alergias:t.allergies||[]},this.closePatientSelectionModal(),this.mostrarNotificacion("success","Paciente Seleccionado",`${t.fullName} ha sido seleccionado para esta prescripci\xf3n.`)}static{this.\u0275fac=function(r){return new(r||i)(e.rXU(D.Ix),e.rXU(D.nX),e.rXU(h.J),e.rXU(Oe.z),e.rXU(Ae.i))}}static{this.\u0275cmp=e.VBU({type:i,selectors:[["app-nueva-prescripcion"]],standalone:!0,features:[e.aNF],decls:132,vars:47,consts:[[1,"min-h-screen","bg-gray-50"],[1,"space-y-6"],[3,"title","description","icon","breadcrumbItems","hasActionButton"],["slot","action","class","flex items-center gap-2",4,"ngIf"],[3,"selectPatient","changePatient","selectedPatient"],[1,"bg-white","rounded-lg","shadow-sm","border","border-gray-200","p-6"],[1,"flex","items-center","justify-between","mb-4"],[1,"flex","items-center","gap-3"],[1,"w-6","h-6","text-blue-600",3,"img"],[1,"text-lg","font-semibold","text-gray-900"],[1,"flex","items-center","gap-4","text-sm","text-gray-600"],[4,"ngIf"],["class","flex items-center gap-2",4,"ngIf"],["class","flex items-center gap-1",4,"ngIf"],["class","flex items-center gap-1 text-orange-600",4,"ngIf"],[1,"flex","items-center","gap-2"],[1,"bg-orange-100","text-orange-800","px-3","py-1","rounded-full","text-sm","font-medium"],[1,"text-sm","text-gray-500"],[1,"bg-gray-50","rounded-lg","p-4","mb-6"],[1,"flex","items-center","gap-4"],[1,"w-12","h-12","bg-blue-100","rounded-full","flex","items-center","justify-center"],[1,"text-blue-600","font-semibold","text-lg"],[1,"flex-1"],[1,"text-xl","font-semibold","text-gray-900"],[1,"flex","items-center","gap-4","text-sm","text-gray-600","mt-1"],[1,"flex","items-center","gap-1"],[1,"w-4","h-4",3,"img"],[1,"grid","grid-cols-2","gap-6","mt-4"],[1,"text-sm","font-medium","text-gray-700","mb-2"],[1,"space-y-1","text-sm","text-gray-600"],[1,"border-t","border-gray-200","pt-6"],[1,"w-5","h-5","text-blue-600",3,"img"],[1,"flex","gap-2"],[1,"bg-gray-100","text-gray-700","px-4","py-2","rounded-lg","hover:bg-gray-200","transition-colors","flex","items-center","gap-2","text-sm"],[3,"click","disabled","title"],[1,"bg-white","border","border-gray-200","rounded-lg","overflow-hidden"],[1,"w-full"],[1,"bg-gray-50"],[1,"px-4","py-3","text-left","text-xs","font-medium","text-gray-500","uppercase","tracking-wider"],[1,"bg-white","divide-y","divide-gray-200"],["class","hover:bg-gray-50 cursor-pointer",3,"dblclick",4,"ngFor","ngForOf"],[1,"mt-6","bg-green-50","rounded-lg","p-4"],[1,"flex","items-center","gap-2","mb-3"],[1,"w-5","h-5","text-green-600",3,"img"],[1,"font-semibold","text-green-900"],[1,"text-sm","text-green-700"],[1,"grid","grid-cols-1","md:grid-cols-3","gap-4"],["class","bg-white rounded-lg p-4 border border-green-200",4,"ngFor","ngForOf"],[1,"bg-white","rounded-lg","shadow-sm","border","border-gray-200","p-4"],[1,"flex","items-center","justify-between"],[1,"flex","items-center","gap-2","text-orange-600"],[1,"w-5","h-5",3,"img"],[1,"text-sm","font-medium"],[1,"flex","gap-3"],[1,"bg-gray-100","text-gray-700","px-6","py-2","rounded-lg","hover:bg-gray-200","transition-colors","flex","items-center","gap-2",3,"click"],[1,"bg-blue-100","text-blue-700","px-6","py-2","rounded-lg","hover:bg-blue-200","transition-colors","flex","items-center","gap-2",3,"click"],[1,"bg-green-600","text-white","px-6","py-2","rounded-lg","hover:bg-green-700","transition-colors","flex","items-center","gap-2","font-medium",3,"click"],["class","fixed inset-0 z-50 overflow-hidden",4,"ngIf"],["class","fixed inset-0 z-50 flex items-center justify-center overflow-hidden",4,"ngIf"],[3,"closeModal","patientSelected","isOpen"],[3,"dismiss","roleChanged","isOpen","suggestedRole"],["slot","action",1,"flex","items-center","gap-2"],[1,"bg-white/20","backdrop-blur-sm","text-white","px-4","py-2","rounded-lg","border","border-white/30","hover:bg-white/30","transition-colors","flex","items-center","gap-2",3,"click"],[1,"bg-orange-100","text-orange-800","px-2","py-1","rounded-full","text-xs","font-medium","border","border-orange-200"],[1,"w-4","h-4","text-green-600",3,"img"],[1,"flex","items-center","gap-1","text-orange-600"],[1,"hover:bg-gray-50","cursor-pointer",3,"dblclick"],[1,"px-4","py-3","text-sm","font-medium","text-gray-900"],[1,"px-4","py-3","text-sm","text-gray-600"],[1,"bg-white","rounded-lg","p-4","border","border-green-200"],[1,"flex","items-center","gap-3","mb-2"],[1,"w-8","h-8","bg-blue-100","rounded-full","flex","items-center","justify-center"],[1,"w-4","h-4","text-blue-600",3,"img"],[1,"font-semibold","text-gray-900"],[1,"text-sm","text-gray-600"],[1,"mt-2"],[1,"inline-block","bg-green-100","text-green-800","px-2","py-1","rounded-full","text-xs","font-medium"],[1,"fixed","inset-0","z-50","overflow-hidden"],[1,"absolute","inset-0","bg-black","bg-opacity-50",3,"click"],[1,"absolute","right-0","top-0","h-full","w-96","bg-white","shadow-xl","transform","transition-transform","duration-300","ease-in-out"],[1,"flex","flex-col","h-full"],[1,"flex","items-center","justify-between","p-6","border-b","border-gray-200"],[1,"p-2","hover:bg-gray-100","rounded-lg","transition-colors",3,"click"],[1,"w-5","h-5","text-gray-500",3,"img"],[1,"flex-1","overflow-y-auto","p-6"],[1,"space-y-4"],[1,"block","text-sm","font-medium","text-gray-700","mb-2"],["name","medicamento",1,"w-full","px-3","py-2","border","border-gray-300","rounded-lg","focus:ring-2","focus:ring-blue-500","focus:border-transparent",3,"ngModelChange","ngModel"],["value",""],["value","Ibuprofeno"],["value","Amoxicilina"],["value","Omeprazol"],["value","Paracetamol"],["value","Diclofenaco"],["value","Enalapril"],["value","Metformina"],["value","Losart\xe1n"],["type","text","name","cantidad","placeholder","ej. 15 tabletas",1,"w-full","px-3","py-2","border","border-gray-300","rounded-lg","focus:ring-2","focus:ring-blue-500","focus:border-transparent",3,"ngModelChange","ngModel"],["type","text","name","dosis","placeholder","ej. 400 mg",1,"w-full","px-3","py-2","border","border-gray-300","rounded-lg","focus:ring-2","focus:ring-blue-500","focus:border-transparent",3,"ngModelChange","ngModel"],["name","frecuencia",1,"w-full","px-3","py-2","border","border-gray-300","rounded-lg","focus:ring-2","focus:ring-blue-500","focus:border-transparent",3,"ngModelChange","ngModel"],["value","1 vez al d\xeda"],["value","2 veces al d\xeda"],["value","3 veces al d\xeda"],["value","Cada 8 horas"],["value","Cada 12 horas"],["value","Seg\xfan necesidad"],["name","via",1,"w-full","px-3","py-2","border","border-gray-300","rounded-lg","focus:ring-2","focus:ring-blue-500","focus:border-transparent",3,"ngModelChange","ngModel"],["value","Oral"],["value","Intramuscular"],["value","Intravenosa"],["value","T\xf3pica"],["value","Sublingual"],["type","text","name","duracion","placeholder","ej. 5 d\xedas",1,"w-full","px-3","py-2","border","border-gray-300","rounded-lg","focus:ring-2","focus:ring-blue-500","focus:border-transparent",3,"ngModelChange","ngModel"],["name","observaciones","rows","3","placeholder","Observaciones adicionales...",1,"w-full","px-3","py-2","border","border-gray-300","rounded-lg","focus:ring-2","focus:ring-blue-500","focus:border-transparent",3,"ngModelChange","ngModel"],[1,"flex","gap-3","p-6","border-t","border-gray-200"],[1,"flex-1","bg-gray-100","text-gray-700","px-4","py-2","rounded-lg","hover:bg-gray-200","transition-colors",3,"click"],[1,"flex-1","bg-blue-600","text-white","px-4","py-2","rounded-lg","hover:bg-blue-700","transition-colors",3,"click"],[1,"fixed","inset-0","z-50","flex","items-center","justify-center","overflow-hidden"],[1,"relative","bg-white","rounded-xl","shadow-2xl","max-w-lg","w-full","mx-4","transform","transition-all","duration-300","ease-in-out"],[1,"w-10","h-10","bg-green-100","rounded-full","flex","items-center","justify-center"],[1,"p-6"],[1,"text-center","mb-6"],[1,"flex","items-center","justify-center","gap-2","mb-3"],[1,"w-6","h-6","text-green-600",3,"img"],[1,"text-xl","font-semibold","text-green-600"],[1,"text-gray-600"],[1,"bg-green-50","border","border-green-200","rounded-lg","p-4","mb-4"],[1,"text-gray-700","font-medium"],[1,"bg-green-600","text-white","px-3","py-1","rounded-lg","font-semibold"],[1,"grid","grid-cols-2","gap-4","text-sm"],[1,"font-medium","text-gray-900"],[1,"col-span-2"],[1,"bg-blue-50","border","border-blue-200","rounded-lg","p-4","mb-4"],[1,"font-medium","text-blue-600"],[1,"space-y-2","text-sm"],[1,"flex","justify-between"],[1,"flex","justify-between","items-center"],[1,"bg-green-100","text-green-800","px-2","py-1","rounded","text-xs","font-medium"],[1,"space-y-3","text-sm","text-gray-600"],[1,"w-4","h-4","text-purple-600",3,"img"],[1,"flex-1","bg-gray-100","text-gray-700","px-4","py-3","rounded-lg","hover:bg-gray-200","transition-colors","font-medium","flex","items-center","justify-center","gap-2",3,"click"],[1,"flex-1","bg-green-600","text-white","px-4","py-3","rounded-lg","hover:bg-green-700","transition-colors","font-medium","flex","items-center","justify-center","gap-2",3,"click"],[1,"relative","bg-white","rounded-xl","shadow-2xl","max-w-md","w-full","mx-4"],[1,"p-2","hover:bg-gray-100","rounded-lg",3,"click"],[1,"p-6","text-center"],[1,"w-16","h-16","bg-green-100","rounded-full","flex","items-center","justify-center","mx-auto","mb-4"],[1,"w-8","h-8","text-green-600",3,"img"],[1,"text-xl","font-semibold","text-gray-900","mb-2"],[1,"bg-green-50","rounded-lg","p-4","text-left","mt-4"],[1,"font-medium","text-green-800"],[1,"bg-blue-50","border","border-blue-200","rounded-lg","p-3","mt-4","text-left"],[1,"flex","items-start","gap-2"],[1,"w-4","h-4","text-blue-600","mt-0.5",3,"img"],[1,"text-sm","text-blue-800"],[1,"font-medium"],[1,"p-6","border-t","border-gray-200","flex","gap-3"],[1,"flex-1","bg-blue-600","text-white","px-4","py-3","rounded-lg","hover:bg-blue-700","font-medium",3,"click"],[1,"flex-1","bg-green-600","text-white","px-4","py-3","rounded-lg","hover:bg-green-700","font-medium",3,"click"]],template:function(r,n){1&r&&(e.j41(0,"div",0),e.nrm(1,"app-notification-container"),e.j41(2,"div",1)(3,"app-page-layout",2),e.DNE(4,Ye,4,1,"div",3),e.k0s(),e.j41(5,"app-patient-selection-section",4),e.bIt("selectPatient",function(){return n.openPatientSelectionModal()})("changePatient",function(){return n.openPatientSelectionModal()}),e.k0s(),e.j41(6,"div",5)(7,"div",6)(8,"div",7),e.nrm(9,"lucide-icon",8),e.j41(10,"div")(11,"h2",9),e.EFF(12,"Prescripci\xf3n M\xe9dica Electr\xf3nica"),e.k0s(),e.j41(13,"div",10),e.DNE(14,Be,2,0,"span",11)(15,ze,4,1,"span",12)(16,Xe,3,1,"span",13)(17,Le,3,1,"span",14),e.k0s()()(),e.j41(18,"div",15)(19,"span",16),e.EFF(20,"Borrador"),e.k0s(),e.j41(21,"span",17),e.EFF(22,"10/10/2025 10:54 a.m."),e.k0s()()(),e.j41(23,"div",18)(24,"div",19)(25,"div",20)(26,"span",21),e.EFF(27),e.k0s()(),e.j41(28,"div",22)(29,"h3",23),e.EFF(30),e.k0s(),e.j41(31,"div",24)(32,"span",25),e.nrm(33,"lucide-icon",26),e.EFF(34," Femenino "),e.k0s(),e.j41(35,"span",25),e.nrm(36,"lucide-icon",26),e.EFF(37),e.k0s(),e.j41(38,"span",25),e.nrm(39,"lucide-icon",26),e.EFF(40),e.k0s()()()(),e.j41(41,"div",27)(42,"div")(43,"h4",28),e.EFF(44,"Informaci\xf3n del M\xe9dico"),e.k0s(),e.j41(45,"div",29)(46,"div",15),e.nrm(47,"lucide-icon",26),e.j41(48,"span"),e.EFF(49,"Dr. Carlos Alberto Mendoza Herrera"),e.k0s()(),e.j41(50,"div",15),e.nrm(51,"lucide-icon",26),e.j41(52,"span"),e.EFF(53,"C\xf3digo RM-12345-COL"),e.k0s()()()(),e.j41(54,"div")(55,"h4",28),e.EFF(56,"Informaci\xf3n de Contacto"),e.k0s(),e.j41(57,"div",29)(58,"div",15),e.nrm(59,"lucide-icon",26),e.j41(60,"span"),e.EFF(61,"+57 (1) 234-5678"),e.k0s()(),e.j41(62,"div",15),e.nrm(63,"lucide-icon",26),e.j41(64,"span"),e.EFF(65,"contacto@hospital.com"),e.k0s()()()()()(),e.j41(66,"div",30)(67,"div",6)(68,"div",15),e.nrm(69,"lucide-icon",31),e.j41(70,"h3",9),e.EFF(71,"Medicamentos Prescritos"),e.k0s(),e.j41(72,"span",17),e.EFF(73),e.k0s()(),e.j41(74,"div",32)(75,"button",33),e.nrm(76,"lucide-icon",26),e.EFF(77," Borrador "),e.k0s(),e.j41(78,"button",34),e.bIt("click",function(){return n.agregarMedicamento()}),e.nrm(79,"lucide-icon",26),e.EFF(80," Agregar Medicamento "),e.k0s()()(),e.j41(81,"div",35)(82,"table",36)(83,"thead",37)(84,"tr")(85,"th",38),e.EFF(86,"Medicamento"),e.k0s(),e.j41(87,"th",38),e.EFF(88,"Cantidad"),e.k0s(),e.j41(89,"th",38),e.EFF(90,"Dosis"),e.k0s(),e.j41(91,"th",38),e.EFF(92,"Frecuencia"),e.k0s(),e.j41(93,"th",38),e.EFF(94,"V\xeda de Administraci\xf3n"),e.k0s(),e.j41(95,"th",38),e.EFF(96,"Duraci\xf3n"),e.k0s()()(),e.j41(97,"tbody",39),e.DNE(98,Ve,13,6,"tr",40),e.k0s()()()(),e.j41(99,"div",41)(100,"div",42),e.nrm(101,"lucide-icon",43),e.j41(102,"h4",44),e.EFF(103,"Resumen de Medicamentos"),e.k0s(),e.j41(104,"span",45),e.EFF(105,"Vista r\xe1pida de los medicamentos prescritos"),e.k0s()(),e.j41(106,"div",46),e.DNE(107,He,15,6,"div",47),e.k0s()()(),e.j41(108,"div",48)(109,"div",49)(110,"div",50),e.nrm(111,"lucide-icon",51),e.j41(112,"span",52),e.EFF(113,"Revise todos los medicamentos antes de finalizar"),e.k0s()(),e.j41(114,"div",53)(115,"button",54),e.bIt("click",function(){return n.esModoEdicionBorrador?n.volverABorradores():n.cancelar()}),e.nrm(116,"lucide-icon",26),e.EFF(117),e.k0s(),e.j41(118,"button",55),e.bIt("click",function(){return n.guardarCambios()}),e.nrm(119,"lucide-icon",26),e.EFF(120),e.k0s(),e.j41(121,"button",55),e.bIt("click",function(){return n.verificarConDrugBank()}),e.nrm(122,"lucide-icon",26),e.EFF(123," Verificar con DrugBank "),e.k0s(),e.j41(124,"button",56),e.bIt("click",function(){return n.abrirModalFinalizar()}),e.nrm(125,"lucide-icon",26),e.EFF(126," Finalizar Prescripci\xf3n "),e.k0s()()()()()(),e.DNE(127,Qe,88,8,"div",57)(128,Je,95,10,"div",58),e.j41(129,"app-patient-selection-modal",59),e.bIt("closeModal",function(){return n.closePatientSelectionModal()})("patientSelected",function(l){return n.onPatientSelected(l)}),e.k0s(),e.DNE(130,Ue,51,5,"div",58),e.j41(131,"app-role-suggestion-modal",60),e.bIt("dismiss",function(){return n.onRoleSuggestionDismiss()})("roleChanged",function(){return n.onRoleChanged()}),e.k0s()),2&r&&(e.R7$(3),e.Y8G("title",n.pageTitle)("description",n.pageDescription)("icon",n.fileTextIcon)("breadcrumbItems",n.breadcrumbItems)("hasActionButton",n.esModoEdicionBorrador),e.R7$(),e.Y8G("ngIf",n.esModoEdicionBorrador),e.R7$(),e.Y8G("selectedPatient",n.selectedPatient),e.R7$(4),e.Y8G("img",n.fileTextIcon),e.R7$(5),e.Y8G("ngIf",!n.esModoEdicionBorrador),e.R7$(),e.Y8G("ngIf",n.esModoEdicionBorrador),e.R7$(),e.Y8G("ngIf",!n.esModoEdicionBorrador),e.R7$(),e.Y8G("ngIf",n.esModoEdicionBorrador),e.R7$(10),e.JRh(n.pacienteSeleccionado?n.getInitials(n.pacienteSeleccionado.nombre):"MG"),e.R7$(3),e.JRh((null==n.pacienteSeleccionado?null:n.pacienteSeleccionado.nombre)||"Mar\xeda Elena Gonz\xe1lez Rodr\xedguez"),e.R7$(3),e.Y8G("img",n.userIcon),e.R7$(3),e.Y8G("img",n.calendarIcon),e.R7$(),e.SpI(" ",(null==n.pacienteSeleccionado?null:n.pacienteSeleccionado.edad)||45," a\xf1os "),e.R7$(2),e.Y8G("img",n.userIcon),e.R7$(),e.SpI(" ID: ",(null==n.pacienteSeleccionado?null:n.pacienteSeleccionado.cedula)||"CC-52.841.963"," "),e.R7$(7),e.Y8G("img",n.userIcon),e.R7$(4),e.Y8G("img",n.userIcon),e.R7$(8),e.Y8G("img",n.userIcon),e.R7$(4),e.Y8G("img",n.userIcon),e.R7$(6),e.Y8G("img",n.pillIcon),e.R7$(4),e.SpI("Doble clic en cualquier fila para ver detalles y editar \u2022 ",n.medicamentosMock.length," medicamentos"),e.R7$(3),e.Y8G("img",n.fileTextIcon),e.R7$(2),e.HbH("px-4 py-2 rounded-lg transition-colors flex items-center gap-2 text-sm font-medium "+(n.selectedPatient?"bg-blue-600 text-white hover:bg-blue-700":"bg-gray-300 text-gray-500 cursor-not-allowed")),e.Y8G("disabled",!n.selectedPatient)("title",n.selectedPatient?"":"Debe seleccionar un paciente antes de agregar medicamentos"),e.R7$(),e.Y8G("img",n.plusIcon),e.R7$(19),e.Y8G("ngForOf",n.medicamentosMock),e.R7$(3),e.Y8G("img",n.checkCircleIcon),e.R7$(6),e.Y8G("ngForOf",n.medicamentosMock),e.R7$(4),e.Y8G("img",n.alertTriangleIcon),e.R7$(5),e.Y8G("img",n.xIcon),e.R7$(),e.SpI(" ","Cancelar"," "),e.R7$(2),e.Y8G("img",n.saveIcon),e.R7$(),e.SpI(" ","Guardar Cambios"," "),e.R7$(2),e.Y8G("img",n.searchIcon),e.R7$(3),e.Y8G("img",n.checkCircleIcon),e.R7$(2),e.Y8G("ngIf",n.showAddMedicineModal),e.R7$(),e.Y8G("ngIf",n.showFinalizarModal),e.R7$(),e.Y8G("isOpen",n.showPatientSelectionModal),e.R7$(),e.Y8G("ngIf",n.showGuardarCambiosModal),e.R7$(),e.Y8G("isOpen",n.showRoleSuggestionModal())("suggestedRole","M\xe9dico"))},dependencies:[u.MD,u.Sq,u.bT,d.YN,d.qT,d.xH,d.y7,d.me,d.wz,d.BC,d.cb,d.vS,d.cV,s.flO,s.WGl,p.J,A,Ge,Ne.w,De.t],encapsulation:2})}}return i})()},152:(w,C,c)=>{c.d(C,{B:()=>v});var e=c(8839),u=c(9974),d=c(4360);function v(s,p=e.E){return(0,u.N)((h,b)=>{let m=null,f=null,x=null;const F=()=>{if(m){m.unsubscribe(),m=null;const _=f;f=null,b.next(_)}};function y(){const _=x+s,P=p.now();if(P<_)return m=this.schedule(void 0,_-P),void b.add(m);F()}h.subscribe((0,d._)(b,_=>{f=_,x=p.now(),m||(m=p.schedule(y,s),b.add(m))},()=>{F(),b.complete()},void 0,()=>{f=m=null}))})}},3294:(w,C,c)=>{c.d(C,{F:()=>v});var e=c(3669),u=c(9974),d=c(4360);function v(p,h=e.D){return p=p??s,(0,u.N)((b,m)=>{let f,x=!0;b.subscribe((0,d._)(m,F=>{const y=h(F);(x||!p(f,y))&&(x=!1,f=y,m.next(F))}))})}function s(p,h){return p===h}}}]);