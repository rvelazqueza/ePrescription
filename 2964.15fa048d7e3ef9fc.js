"use strict";(self.webpackChunkeprescription_angular=self.webpackChunkeprescription_angular||[]).push([[2964],{2964:(ie,g,c)=>{c.r(g),c.d(g,{PacientesComponent:()=>te});var e=c(4438),m=c(177),r=c(4341),C=c(8359),a=c(8516),F=c(7865),d=c(1686),h=c(5782),b=c(8620),f=c(280),_=c(2202),v=c(8594);const u=()=>({standalone:!0});function y(o,s){if(1&o){const t=e.RV6();e.j41(0,"button",13),e.bIt("click",function(){const i=e.eBV(t).$implicit,l=e.XpG();return e.Njj(l.activeTab=i.id)}),e.nrm(1,"lucide-icon",14),e.EFF(2),e.k0s()}if(2&o){const t=s.$implicit,n=e.XpG();e.HbH(n.getTabClass(t.id)),e.R7$(),e.Y8G("img",t.icon),e.R7$(),e.SpI(" ",t.label," ")}}function x(o,s){1&o&&(e.j41(0,"div",30),e.EFF(1," El nombre es requerido "),e.k0s())}function k(o,s){1&o&&(e.j41(0,"div",30),e.EFF(1," Los apellidos son requeridos "),e.k0s())}function R(o,s){if(1&o&&(e.j41(0,"div",15)(1,"div",16)(2,"h3",17),e.EFF(3,"Datos personales"),e.k0s(),e.j41(4,"div",18)(5,"div")(6,"app-label"),e.EFF(7,"Nombres "),e.j41(8,"span",19),e.EFF(9,"*"),e.k0s()(),e.nrm(10,"app-input",20),e.DNE(11,x,2,0,"div",21),e.k0s(),e.j41(12,"div")(13,"app-label"),e.EFF(14,"Apellidos "),e.j41(15,"span",19),e.EFF(16,"*"),e.k0s()(),e.nrm(17,"app-input",22),e.DNE(18,k,2,0,"div",21),e.k0s()(),e.j41(19,"div",23)(20,"div")(21,"app-label"),e.EFF(22,"Tipo de identificaci\xf3n"),e.k0s(),e.nrm(23,"app-select",24),e.k0s(),e.j41(24,"div")(25,"app-label"),e.EFF(26,"N\xfamero de identificaci\xf3n "),e.j41(27,"span",19),e.EFF(28,"*"),e.k0s()(),e.nrm(29,"app-input",25),e.k0s(),e.j41(30,"div")(31,"app-label"),e.EFF(32,"Fecha de nacimiento "),e.j41(33,"span",19),e.EFF(34,"*"),e.k0s()(),e.nrm(35,"app-input",26),e.k0s()(),e.j41(36,"div",27)(37,"div")(38,"app-label"),e.EFF(39,"Sexo"),e.k0s(),e.nrm(40,"app-select",28),e.k0s(),e.j41(41,"div")(42,"app-label"),e.EFF(43,"Tipo de sangre"),e.k0s(),e.nrm(44,"app-select",29),e.k0s()()()()),2&o){const t=e.XpG();e.R7$(10),e.Y8G("hasError",t.isFieldInvalid("firstName")),e.R7$(),e.Y8G("ngIf",t.isFieldInvalid("firstName")),e.R7$(6),e.Y8G("hasError",t.isFieldInvalid("firstLastName")),e.R7$(),e.Y8G("ngIf",t.isFieldInvalid("firstLastName")),e.R7$(5),e.Y8G("options",t.idTypeOptions),e.R7$(6),e.Y8G("hasError",t.isFieldInvalid("idNumber")),e.R7$(6),e.Y8G("hasError",t.isFieldInvalid("birthDate")),e.R7$(5),e.Y8G("options",t.genderOptions),e.R7$(4),e.Y8G("options",t.bloodTypeOptions)}}function I(o,s){if(1&o&&(e.j41(0,"div",15)(1,"div",16)(2,"h3",31),e.nrm(3,"lucide-icon",14),e.EFF(4," Informaci\xf3n de contacto "),e.k0s(),e.j41(5,"div",18)(6,"div")(7,"app-label"),e.EFF(8,"Tel\xe9fono"),e.k0s(),e.nrm(9,"app-input",32),e.k0s(),e.j41(10,"div")(11,"app-label"),e.EFF(12,"Email"),e.k0s(),e.nrm(13,"app-input",33),e.k0s()(),e.j41(14,"div",34)(15,"app-label"),e.EFF(16,"Direcci\xf3n"),e.k0s(),e.nrm(17,"app-input",35),e.k0s(),e.j41(18,"div",27)(19,"div")(20,"app-label"),e.EFF(21,"Ciudad"),e.k0s(),e.nrm(22,"app-input",36),e.k0s(),e.j41(23,"div")(24,"app-label"),e.EFF(25,"Pa\xeds"),e.k0s(),e.nrm(26,"app-select",37),e.k0s()()(),e.j41(27,"div",16)(28,"h3",31),e.nrm(29,"lucide-icon",14),e.EFF(30," Seguro m\xe9dico "),e.k0s(),e.j41(31,"div",27)(32,"div")(33,"app-label"),e.EFF(34,"Proveedor de seguro"),e.k0s(),e.nrm(35,"app-input",38),e.k0s(),e.j41(36,"div")(37,"app-label"),e.EFF(38,"N\xfamero de p\xf3liza"),e.k0s(),e.nrm(39,"app-input",39),e.k0s()()(),e.j41(40,"div",16)(41,"h3",31),e.nrm(42,"lucide-icon",14),e.EFF(43," Contacto de emergencia "),e.k0s(),e.j41(44,"div",40)(45,"div")(46,"app-label"),e.EFF(47,"Nombre completo"),e.k0s(),e.nrm(48,"app-input",41),e.k0s(),e.j41(49,"div")(50,"app-label"),e.EFF(51,"Relaci\xf3n"),e.k0s(),e.nrm(52,"app-input",42),e.k0s(),e.j41(53,"div")(54,"app-label"),e.EFF(55,"Tel\xe9fono"),e.k0s(),e.nrm(56,"app-input",43),e.k0s()()()()),2&o){const t=e.XpG();e.R7$(3),e.Y8G("img",t.phoneIcon),e.R7$(6),e.Y8G("hasError",t.isFieldInvalid("phone")),e.R7$(4),e.Y8G("hasError",t.isFieldInvalid("email")),e.R7$(13),e.Y8G("options",t.countryOptions),e.R7$(3),e.Y8G("img",t.shieldIcon),e.R7$(13),e.Y8G("img",t.alertTriangleIcon)}}function j(o,s){if(1&o){const t=e.RV6();e.j41(0,"div",55)(1,"div",1),e.nrm(2,"lucide-icon",56),e.j41(3,"span",57),e.EFF(4),e.k0s()(),e.j41(5,"button",58),e.bIt("click",function(){const i=e.eBV(t).index,l=e.XpG(2);return e.Njj(l.removeMedication(i))}),e.nrm(6,"lucide-icon",14),e.k0s()()}if(2&o){const t=s.$implicit,n=e.XpG(2);e.R7$(2),e.Y8G("img",n.pillIcon),e.R7$(2),e.JRh(t),e.R7$(2),e.Y8G("img",n.xIcon)}}function E(o,s){if(1&o){const t=e.RV6();e.j41(0,"div",15)(1,"div",16)(2,"h3",31),e.nrm(3,"lucide-icon",14),e.EFF(4," Datos antropom\xe9tricos "),e.k0s(),e.j41(5,"div",44)(6,"div")(7,"app-label"),e.EFF(8,"Peso (kg)"),e.k0s(),e.nrm(9,"app-input",45),e.k0s(),e.j41(10,"div")(11,"app-label"),e.EFF(12,"Altura (m)"),e.k0s(),e.nrm(13,"app-input",46),e.k0s(),e.j41(14,"div")(15,"app-label"),e.EFF(16,"IMC (calculado)"),e.k0s(),e.j41(17,"div",47)(18,"span",48),e.EFF(19),e.k0s()()()(),e.j41(20,"div",49)(21,"app-label"),e.EFF(22,"Medicaci\xf3n actual"),e.k0s(),e.j41(23,"div",50)(24,"input",51),e.mxI("ngModelChange",function(i){e.eBV(t);const l=e.XpG();return e.DH7(l.newMedication,i)||(l.newMedication=i),e.Njj(i)}),e.bIt("keyup.enter",function(){e.eBV(t);const i=e.XpG();return e.Njj(i.addMedication())}),e.k0s(),e.j41(25,"app-button",52),e.bIt("click",function(){e.eBV(t);const i=e.XpG();return e.Njj(i.addMedication())}),e.nrm(26,"lucide-icon",14),e.k0s()(),e.j41(27,"div",53),e.DNE(28,j,7,3,"div",54),e.k0s()()()()}if(2&o){const t=e.XpG();e.R7$(3),e.Y8G("img",t.activityIcon),e.R7$(16),e.JRh(t.getBMI()||"N/A"),e.R7$(5),e.R50("ngModel",t.newMedication),e.Y8G("ngModelOptions",e.lJ4(6,u)),e.R7$(2),e.Y8G("img",t.plusIcon),e.R7$(2),e.Y8G("ngForOf",t.currentMedications)}}function G(o,s){if(1&o){const t=e.RV6();e.j41(0,"div",66)(1,"div",1),e.nrm(2,"div",67),e.j41(3,"span",68),e.EFF(4),e.k0s()(),e.j41(5,"button",69),e.bIt("click",function(){const i=e.eBV(t).index,l=e.XpG(2);return e.Njj(l.removeAllergy(i))}),e.nrm(6,"lucide-icon",14),e.k0s()()}if(2&o){const t=s.$implicit,n=e.XpG(2);e.R7$(4),e.JRh(t),e.R7$(2),e.Y8G("img",n.xIcon)}}function P(o,s){if(1&o){const t=e.RV6();e.j41(0,"div",70)(1,"div",1),e.nrm(2,"lucide-icon",63),e.j41(3,"span",71),e.EFF(4),e.k0s()(),e.j41(5,"button",72),e.bIt("click",function(){const i=e.eBV(t).index,l=e.XpG(2);return e.Njj(l.removeCondition(i))}),e.nrm(6,"lucide-icon",14),e.k0s()()}if(2&o){const t=s.$implicit,n=e.XpG(2);e.R7$(2),e.Y8G("img",n.activityIcon),e.R7$(2),e.JRh(t),e.R7$(2),e.Y8G("img",n.xIcon)}}function $(o,s){if(1&o){const t=e.RV6();e.j41(0,"div",15)(1,"div",16)(2,"h3",31),e.nrm(3,"lucide-icon",59),e.EFF(4," Alergias conocidas "),e.k0s(),e.j41(5,"div",60)(6,"input",61),e.mxI("ngModelChange",function(i){e.eBV(t);const l=e.XpG();return e.DH7(l.newAllergy,i)||(l.newAllergy=i),e.Njj(i)}),e.bIt("keyup.enter",function(){e.eBV(t);const i=e.XpG();return e.Njj(i.addAllergy())}),e.k0s(),e.j41(7,"app-button",52),e.bIt("click",function(){e.eBV(t);const i=e.XpG();return e.Njj(i.addAllergy())}),e.nrm(8,"lucide-icon",14),e.k0s()(),e.j41(9,"div",53),e.DNE(10,G,7,2,"div",62),e.k0s()(),e.j41(11,"div",16)(12,"h3",31),e.nrm(13,"lucide-icon",63),e.EFF(14," Condiciones cr\xf3nicas "),e.k0s(),e.j41(15,"div",60)(16,"input",64),e.mxI("ngModelChange",function(i){e.eBV(t);const l=e.XpG();return e.DH7(l.newCondition,i)||(l.newCondition=i),e.Njj(i)}),e.bIt("keyup.enter",function(){e.eBV(t);const i=e.XpG();return e.Njj(i.addCondition())}),e.k0s(),e.j41(17,"app-button",52),e.bIt("click",function(){e.eBV(t);const i=e.XpG();return e.Njj(i.addCondition())}),e.nrm(18,"lucide-icon",14),e.k0s()(),e.j41(19,"div",53),e.DNE(20,P,7,3,"div",65),e.k0s()()()}if(2&o){const t=e.XpG();e.R7$(3),e.Y8G("img",t.alertTriangleIcon),e.R7$(3),e.R50("ngModel",t.newAllergy),e.Y8G("ngModelOptions",e.lJ4(10,u)),e.R7$(2),e.Y8G("img",t.plusIcon),e.R7$(2),e.Y8G("ngForOf",t.allergies),e.R7$(3),e.Y8G("img",t.heartIcon),e.R7$(3),e.R50("ngModel",t.newCondition),e.Y8G("ngModelOptions",e.lJ4(11,u)),e.R7$(2),e.Y8G("img",t.plusIcon),e.R7$(2),e.Y8G("ngForOf",t.chronicConditions)}}function T(o,s){if(1&o&&(e.j41(0,"div",15)(1,"div",16)(2,"h3",31),e.nrm(3,"lucide-icon",14),e.EFF(4," Notas cl\xednicas "),e.k0s(),e.nrm(5,"app-textarea",73),e.j41(6,"p",74),e.EFF(7," Incluya informaci\xf3n relevante para la atenci\xf3n m\xe9dica del paciente "),e.k0s()()()),2&o){const t=e.XpG();e.R7$(3),e.Y8G("img",t.fileTextIcon),e.R7$(2),e.Y8G("rows",12)}}let N=(()=>{class o{constructor(t){this.fb=t,this.open=!1,this.patient=null,this.openChange=new e.bkB,this.patientUpdated=new e.bkB,this.activeTab="personal",this.isSubmitting=!1,this.allergies=[],this.chronicConditions=[],this.currentMedications=[],this.newAllergy="",this.newCondition="",this.newMedication="",this.userIcon=a.KJW,this.phoneIcon=a.bcf,this.mailIcon=a.gE4,this.mapPinIcon=a.sDd,this.heartIcon=a.B1N,this.shieldIcon=a.ekZ,this.alertTriangleIcon=a.hcu,this.activityIcon=a.Ilq,this.fileTextIcon=a.iUU,this.plusIcon=a.FWt,this.xIcon=a.X,this.saveIcon=a.eMP,this.userCircleIcon=a.GvK,this.pillIcon=a.abF,this.tabs=[{id:"personal",label:"Personal",icon:this.userIcon},{id:"contact",label:"Contacto",icon:this.phoneIcon},{id:"medical",label:"M\xe9dico",icon:this.activityIcon},{id:"conditions",label:"Condiciones",icon:this.heartIcon},{id:"notes",label:"Notas",icon:this.fileTextIcon}],this.idTypeOptions=[{value:"CC",label:"C\xe9dula de Ciudadan\xeda"},{value:"CE",label:"C\xe9dula de Extranjer\xeda"},{value:"TI",label:"Tarjeta de Identidad"},{value:"PA",label:"Pasaporte"},{value:"RC",label:"Registro Civil"}],this.genderOptions=[{value:"M",label:"Masculino"},{value:"F",label:"Femenino"}],this.bloodTypeOptions=[{value:"A+",label:"A+"},{value:"A-",label:"A-"},{value:"B+",label:"B+"},{value:"B-",label:"B-"},{value:"AB+",label:"AB+"},{value:"AB-",label:"AB-"},{value:"O+",label:"O+"},{value:"O-",label:"O-"}],this.countryOptions=[{value:"Costa Rica",label:"Costa Rica"},{value:"Colombia",label:"Colombia"},{value:"Argentina",label:"Argentina"},{value:"Chile",label:"Chile"},{value:"M\xe9xico",label:"M\xe9xico"},{value:"Per\xfa",label:"Per\xfa"},{value:"Espa\xf1a",label:"Espa\xf1a"}],this.patientForm=this.fb.group({firstName:["",r.k0.required],firstLastName:["",r.k0.required],idType:["CC"],idNumber:["",r.k0.required],birthDate:["",r.k0.required],gender:[""],bloodType:[""],phone:[""],email:["",[r.k0.email]],address:[""],city:[""],country:["Costa Rica"],weight:[""],height:[""],clinicalNotes:[""],insuranceProvider:[""],insuranceNumber:[""],emergencyName:[""],emergencyRelationship:[""],emergencyPhone:[""]})}ngOnInit(){this.patient&&this.loadPatientData()}ngOnChanges(){this.patient&&this.loadPatientData()}loadPatientData(){this.patient&&(this.patientForm.patchValue({firstName:this.patient.firstName,firstLastName:this.patient.firstLastName,idType:this.patient.idType||"CC",idNumber:this.patient.idNumber,birthDate:this.patient.birthDate,gender:this.patient.gender,bloodType:this.patient.bloodType,phone:this.patient.phone,email:this.patient.email,address:this.patient.address,city:this.patient.city,country:this.patient.country||"Costa Rica",weight:this.patient.weight,height:this.patient.height,clinicalNotes:this.patient.clinicalNotes,insuranceProvider:this.patient.insuranceProvider,insuranceNumber:this.patient.insuranceNumber,emergencyName:this.patient.emergencyContact?.name,emergencyRelationship:this.patient.emergencyContact?.relationship,emergencyPhone:this.patient.emergencyContact?.phone}),this.allergies=[...this.patient.allergies||[]],this.chronicConditions=[...this.patient.chronicConditions||[]],this.currentMedications=[...this.patient.currentMedications||[]])}onOpenChange(t){t||this.resetForm(),this.openChange.emit(t)}getTabClass(t){return this.activeTab===t?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}getBMI(){const t=parseFloat(this.patientForm.get("weight")?.value||"0"),n=parseFloat(this.patientForm.get("height")?.value||"0");return t>0&&n>0?(t/(n*n)).toFixed(1):""}addAllergy(){this.newAllergy.trim()&&(this.allergies.push(this.newAllergy.trim()),this.newAllergy="")}removeAllergy(t){this.allergies.splice(t,1)}addCondition(){this.newCondition.trim()&&(this.chronicConditions.push(this.newCondition.trim()),this.newCondition="")}removeCondition(t){this.chronicConditions.splice(t,1)}addMedication(){this.newMedication.trim()&&(this.currentMedications.push(this.newMedication.trim()),this.newMedication="")}removeMedication(t){this.currentMedications.splice(t,1)}isFieldInvalid(t){const n=this.patientForm.get(t);return!!(n&&n.invalid&&n.touched)}onSubmit(){if(this.patientForm.valid&&this.patient){this.isSubmitting=!0;const t=this.patientForm.value,n={...this.patient,...t,fullName:`${t.firstName} ${t.firstLastName}`.trim(),bmi:this.getBMI(),allergies:this.allergies,chronicConditions:this.chronicConditions,currentMedications:this.currentMedications,emergencyContact:{name:t.emergencyName,relationship:t.emergencyRelationship,phone:t.emergencyPhone}};setTimeout(()=>{this.patientUpdated.emit(n),this.isSubmitting=!1,this.resetForm(),this.openChange.emit(!1)},1e3)}else Object.keys(this.patientForm.controls).forEach(t=>{this.patientForm.get(t)?.markAsTouched()})}onCancel(){this.resetForm(),this.openChange.emit(!1)}resetForm(){this.patientForm.reset({idType:"CC",country:"Costa Rica"}),this.activeTab="personal",this.allergies=[],this.chronicConditions=[],this.currentMedications=[],this.newAllergy="",this.newCondition="",this.newMedication="",this.isSubmitting=!1}static{this.\u0275fac=function(n){return new(n||o)(e.rXU(r.ok))}}static{this.\u0275cmp=e.VBU({type:o,selectors:[["app-edit-patient-dialog"]],inputs:{open:"open",patient:"patient"},outputs:{openChange:"openChange",patientUpdated:"patientUpdated"},standalone:!0,features:[e.OA$,e.aNF],decls:25,vars:13,consts:[["contentClass","max-w-4xl",3,"openChange","open"],[1,"flex","items-center","gap-2"],[1,"w-5","h-5","text-blue-600",3,"img"],[1,"text-sm","text-gray-600","mt-2"],[1,"border-b","border-gray-200","mb-6"],[1,"flex","space-x-8"],["class","py-2 px-1 border-b-2 font-medium text-sm flex items-center gap-2",3,"class","click",4,"ngFor","ngForOf"],[3,"ngSubmit","formGroup"],["class","space-y-6",4,"ngIf"],[1,"flex","justify-end","gap-2","w-full"],["variant","outline","type","button",3,"click"],["type","button",3,"click","disabled"],[1,"w-4","h-4","mr-2",3,"img"],[1,"py-2","px-1","border-b-2","font-medium","text-sm","flex","items-center","gap-2",3,"click"],[1,"w-4","h-4",3,"img"],[1,"space-y-6"],[1,"bg-white","border","border-gray-200","rounded-lg","p-6"],[1,"text-lg","font-medium","text-gray-900","mb-4"],[1,"grid","grid-cols-2","gap-4","mb-4"],[1,"text-red-500"],["placeholder","Nombres del paciente","formControlName","firstName",3,"hasError"],["class","text-xs text-red-600 mt-1",4,"ngIf"],["placeholder","Apellidos del paciente","formControlName","firstLastName",3,"hasError"],[1,"grid","grid-cols-3","gap-4","mb-4"],["formControlName","idType",3,"options"],["placeholder","N\xfamero de documento","formControlName","idNumber",3,"hasError"],["type","date","formControlName","birthDate",3,"hasError"],[1,"grid","grid-cols-2","gap-4"],["formControlName","gender",3,"options"],["formControlName","bloodType",3,"options"],[1,"text-xs","text-red-600","mt-1"],[1,"text-lg","font-medium","text-gray-900","mb-4","flex","items-center","gap-2"],["placeholder","+506 8888-9999","formControlName","phone",3,"hasError"],["type","email","placeholder","paciente@email.com","formControlName","email",3,"hasError"],[1,"mb-4"],["placeholder","Calle 45 #23-67, Apto 301","formControlName","address"],["placeholder","San Jos\xe9","formControlName","city"],["formControlName","country",3,"options"],["placeholder","CCSS, INS, etc.","formControlName","insuranceProvider"],["placeholder","POL-2024-789456","formControlName","insuranceNumber"],[1,"grid","grid-cols-3","gap-4"],["placeholder","Nombre del contacto","formControlName","emergencyName"],["placeholder","Esposo, Madre, etc.","formControlName","emergencyRelationship"],["placeholder","+506 8888-9999","formControlName","emergencyPhone"],[1,"grid","grid-cols-3","gap-4","mb-6"],["type","number","step","0.1","placeholder","68","formControlName","weight"],["type","number","step","0.01","placeholder","1.65","formControlName","height"],[1,"h-9","px-3","py-2","bg-gray-50","rounded-md","border","flex","items-center"],[1,"font-medium"],[1,"mb-6"],[1,"flex","gap-2","mb-2"],["type","text","placeholder","Ej: Enalapril 10mg - 1 vez al d\xeda - Ma\xf1ana",1,"flex","h-9","w-full","rounded-md","border","border-gray-300","px-3","py-1","text-sm","focus:outline-none","focus:ring-1","focus:ring-blue-500","focus:border-blue-500",3,"ngModelChange","keyup.enter","ngModel","ngModelOptions"],["type","button","size","sm",3,"click"],[1,"space-y-2"],["class","flex items-center justify-between p-3 bg-blue-50 rounded-lg border border-blue-200",4,"ngFor","ngForOf"],[1,"flex","items-center","justify-between","p-3","bg-blue-50","rounded-lg","border","border-blue-200"],[1,"w-4","h-4","text-blue-600",3,"img"],[1,"text-sm"],["type","button",1,"text-red-600","hover:text-red-700","hover:bg-red-50","rounded-full","p-1",3,"click"],[1,"w-4","h-4","text-red-600",3,"img"],[1,"flex","gap-2","mb-4"],["type","text","placeholder","Ej: Penicilina",1,"flex","h-9","w-full","rounded-md","border","border-gray-300","px-3","py-1","text-sm","focus:outline-none","focus:ring-1","focus:ring-blue-500","focus:border-blue-500",3,"ngModelChange","keyup.enter","ngModel","ngModelOptions"],["class","flex items-center justify-between p-3 bg-red-50 rounded-lg border border-red-200",4,"ngFor","ngForOf"],[1,"w-4","h-4","text-orange-600",3,"img"],["type","text","placeholder","Ej: Hipertensi\xf3n arterial",1,"flex","h-9","w-full","rounded-md","border","border-gray-300","px-3","py-1","text-sm","focus:outline-none","focus:ring-1","focus:ring-blue-500","focus:border-blue-500",3,"ngModelChange","keyup.enter","ngModel","ngModelOptions"],["class","flex items-center justify-between p-3 bg-orange-50 rounded-lg border border-orange-200",4,"ngFor","ngForOf"],[1,"flex","items-center","justify-between","p-3","bg-red-50","rounded-lg","border","border-red-200"],[1,"w-2","h-2","bg-red-500","rounded-full"],[1,"text-sm","font-medium","text-red-900"],["type","button",1,"text-red-600","hover:text-red-700","hover:bg-red-100","rounded-full","p-1",3,"click"],[1,"flex","items-center","justify-between","p-3","bg-orange-50","rounded-lg","border","border-orange-200"],[1,"text-sm","font-medium","text-orange-900"],["type","button",1,"text-orange-600","hover:text-orange-700","hover:bg-orange-100","rounded-full","p-1",3,"click"],["placeholder","Ingrese observaciones cl\xednicas, antecedentes relevantes, indicaciones especiales, seguimiento requerido, etc.","formControlName","clinicalNotes",3,"rows"],[1,"text-xs","text-gray-500","mt-2"]],template:function(n,i){1&n&&(e.j41(0,"app-dialog",0),e.bIt("openChange",function(p){return i.onOpenChange(p)}),e.j41(1,"app-dialog-header")(2,"app-dialog-title")(3,"div",1),e.nrm(4,"lucide-icon",2),e.EFF(5," Editar perfil del paciente "),e.k0s()(),e.j41(6,"p",3),e.EFF(7),e.k0s()(),e.j41(8,"app-dialog-content")(9,"div",4)(10,"nav",5),e.DNE(11,y,3,4,"button",6),e.k0s()(),e.j41(12,"form",7),e.bIt("ngSubmit",function(){return i.onSubmit()}),e.DNE(13,R,45,9,"div",8)(14,I,57,6,"div",8)(15,E,29,7,"div",8)(16,$,21,12,"div",8)(17,T,8,2,"div",8),e.k0s()(),e.j41(18,"app-dialog-footer")(19,"div",9)(20,"app-button",10),e.bIt("click",function(){return i.onCancel()}),e.EFF(21," Cancelar "),e.k0s(),e.j41(22,"app-button",11),e.bIt("click",function(){return i.onSubmit()}),e.nrm(23,"lucide-icon",12),e.EFF(24),e.k0s()()()()),2&n&&(e.Y8G("open",i.open),e.R7$(4),e.Y8G("img",i.userCircleIcon),e.R7$(3),e.SpI(" ID: ",null==i.patient?null:i.patient.id," \u2022 Actualice la informaci\xf3n m\xe9dica y personal del paciente "),e.R7$(4),e.Y8G("ngForOf",i.tabs),e.R7$(),e.Y8G("formGroup",i.patientForm),e.R7$(),e.Y8G("ngIf","personal"===i.activeTab),e.R7$(),e.Y8G("ngIf","contact"===i.activeTab),e.R7$(),e.Y8G("ngIf","medical"===i.activeTab),e.R7$(),e.Y8G("ngIf","conditions"===i.activeTab),e.R7$(),e.Y8G("ngIf","notes"===i.activeTab),e.R7$(5),e.Y8G("disabled",i.isSubmitting),e.R7$(),e.Y8G("img",i.saveIcon),e.R7$(),e.SpI(" ",i.isSubmitting?"Guardando...":"Guardar cambios"," "))},dependencies:[m.MD,m.Sq,m.bT,r.X1,r.qT,r.me,r.BC,r.cb,r.j4,r.JD,r.YN,r.vS,a.flO,a.WGl,d.mq,d.BP,d.qi,d.J2,d.Z_,h.Q,b.S,f.U,_.Q,v.w],encapsulation:2})}}return o})();function w(o,s){if(1&o&&(e.j41(0,"span",19),e.EFF(1),e.k0s()),2&o){const t=e.XpG(2);e.R7$(),e.SpI(" ",t.contactHistory.length," ")}}function D(o,s){if(1&o){const t=e.RV6();e.j41(0,"button",16),e.bIt("click",function(){const i=e.eBV(t).$implicit,l=e.XpG();return e.Njj(l.activeTab=i.id)}),e.nrm(1,"lucide-icon",17),e.EFF(2),e.DNE(3,w,2,1,"span",18),e.k0s()}if(2&o){const t=s.$implicit,n=e.XpG();e.HbH(n.getTabClass(t.id)),e.R7$(),e.Y8G("img",t.icon),e.R7$(),e.SpI(" ",t.label," "),e.R7$(),e.Y8G("ngIf","history"===t.id)}}function Y(o,s){if(1&o){const t=e.RV6();e.j41(0,"div",20)(1,"div",21)(2,"h3",22),e.nrm(3,"lucide-icon",23),e.EFF(4," Datos de Contacto Principal "),e.k0s(),e.j41(5,"div",24)(6,"div")(7,"app-label",25),e.nrm(8,"lucide-icon",17),e.EFF(9," Tel\xe9fono "),e.k0s(),e.j41(10,"div",26),e.nrm(11,"input",27),e.j41(12,"app-button",28),e.bIt("click",function(){e.eBV(t);const i=e.XpG();return e.Njj(i.copyPhone())}),e.nrm(13,"lucide-icon",17),e.k0s()()(),e.j41(14,"div")(15,"app-label",25),e.nrm(16,"lucide-icon",17),e.EFF(17," Email "),e.k0s(),e.j41(18,"div",26),e.nrm(19,"input",27),e.j41(20,"app-button",28),e.bIt("click",function(){e.eBV(t);const i=e.XpG();return e.Njj(i.copyEmail())}),e.nrm(21,"lucide-icon",17),e.k0s()()()(),e.j41(22,"div",29)(23,"app-label",25),e.nrm(24,"lucide-icon",17),e.EFF(25," Direcci\xf3n Completa "),e.k0s(),e.j41(26,"div",30)(27,"div",31),e.nrm(28,"input",27),e.j41(29,"app-button",28),e.bIt("click",function(){e.eBV(t);const i=e.XpG();return e.Njj(i.copyAddress())}),e.nrm(30,"lucide-icon",17),e.k0s()(),e.j41(31,"div",32)(32,"div",1),e.nrm(33,"lucide-icon",33),e.j41(34,"span",34),e.EFF(35),e.k0s()(),e.j41(36,"div",1),e.nrm(37,"lucide-icon",33),e.j41(38,"span",34),e.EFF(39),e.k0s()()()()()(),e.j41(40,"div",35)(41,"h3",36),e.nrm(42,"lucide-icon",23),e.EFF(43," Contacto de Emergencia "),e.k0s(),e.j41(44,"div",37)(45,"div",38)(46,"div")(47,"p",39),e.EFF(48),e.k0s(),e.j41(49,"p",40),e.EFF(50),e.k0s()(),e.j41(51,"span",41),e.EFF(52," Contacto de emergencia "),e.k0s()(),e.j41(53,"div",42)(54,"div",38)(55,"div",1),e.nrm(56,"lucide-icon",43),e.j41(57,"span",44),e.EFF(58),e.k0s()(),e.j41(59,"div",31)(60,"app-button",28),e.bIt("click",function(){e.eBV(t);const i=e.XpG();return e.Njj(i.copyEmergencyPhone())}),e.nrm(61,"lucide-icon",17),e.k0s(),e.j41(62,"app-button",45),e.bIt("click",function(){e.eBV(t);const i=e.XpG();return e.Njj(i.callEmergency())}),e.nrm(63,"lucide-icon",46),e.EFF(64," Llamar "),e.k0s()()()(),e.j41(65,"p",47),e.EFF(66," \u26a0\ufe0f Usar solo en caso de emergencia m\xe9dica o cuando no sea posible contactar al paciente directamente "),e.k0s()()()()}if(2&o){const t=e.XpG();e.R7$(3),e.Y8G("img",t.phoneIcon),e.R7$(5),e.Y8G("img",t.phoneIcon),e.R7$(3),e.Y8G("value",null==t.patient?null:t.patient.phone),e.R7$(2),e.Y8G("img",t.copyIcon),e.R7$(3),e.Y8G("img",t.mailIcon),e.R7$(3),e.Y8G("value",null==t.patient?null:t.patient.email),e.R7$(2),e.Y8G("img",t.copyIcon),e.R7$(3),e.Y8G("img",t.mapPinIcon),e.R7$(4),e.Y8G("value",null==t.patient?null:t.patient.address),e.R7$(2),e.Y8G("img",t.copyIcon),e.R7$(3),e.Y8G("img",t.building2Icon),e.R7$(2),e.JRh(null==t.patient?null:t.patient.city),e.R7$(2),e.Y8G("img",t.globeIcon),e.R7$(2),e.JRh(null==t.patient?null:t.patient.country),e.R7$(3),e.Y8G("img",t.shieldIcon),e.R7$(6),e.JRh(null==t.patient||null==t.patient.emergencyContact?null:t.patient.emergencyContact.name),e.R7$(2),e.JRh(null==t.patient||null==t.patient.emergencyContact?null:t.patient.emergencyContact.relationship),e.R7$(6),e.Y8G("img",t.phoneIcon),e.R7$(2),e.SpI(" ",null==t.patient||null==t.patient.emergencyContact?null:t.patient.emergencyContact.phone," "),e.R7$(3),e.Y8G("img",t.copyIcon),e.R7$(2),e.Y8G("img",t.phoneIcon)}}function S(o,s){if(1&o){const t=e.RV6();e.j41(0,"div",20)(1,"div",21)(2,"h3",48),e.EFF(3,"Acciones de Contacto R\xe1pido"),e.k0s(),e.j41(4,"p",49),e.EFF(5,"Inicie comunicaci\xf3n directa con el paciente"),e.k0s(),e.j41(6,"div",37)(7,"app-button",50),e.bIt("click",function(){e.eBV(t);const i=e.XpG();return e.Njj(i.handleCall())}),e.nrm(8,"lucide-icon",51),e.j41(9,"div",52)(10,"p",53),e.EFF(11,"Llamar al paciente"),e.k0s(),e.j41(12,"p",54),e.EFF(13),e.k0s()()(),e.j41(14,"app-button",55),e.bIt("click",function(){e.eBV(t);const i=e.XpG();return e.Njj(i.handleEmail())}),e.nrm(15,"lucide-icon",56),e.j41(16,"div",52)(17,"p",53),e.EFF(18,"Enviar email"),e.k0s(),e.j41(19,"p",57),e.EFF(20),e.k0s()()(),e.j41(21,"app-button",58),e.bIt("click",function(){e.eBV(t);const i=e.XpG();return e.Njj(i.handleSMS())}),e.nrm(22,"lucide-icon",59),e.j41(23,"div",52)(24,"p",53),e.EFF(25,"Enviar SMS"),e.k0s(),e.j41(26,"p",57),e.EFF(27),e.k0s()()(),e.j41(28,"app-button",60),e.bIt("click",function(){e.eBV(t);const i=e.XpG();return e.Njj(i.openLocation())}),e.nrm(29,"lucide-icon",61),e.j41(30,"div",52)(31,"p",53),e.EFF(32,"Ver ubicaci\xf3n"),e.k0s(),e.j41(33,"p",57),e.EFF(34),e.k0s()()()()(),e.j41(35,"div",62)(36,"div",63),e.nrm(37,"lucide-icon",64),e.j41(38,"div",65)(39,"p",66),e.EFF(40,"Recordatorio importante"),e.k0s(),e.j41(41,"p"),e.EFF(42," Todas las comunicaciones con pacientes deben registrarse en el historial para mantener la trazabilidad y cumplir con normativas de protecci\xf3n de datos. "),e.k0s()()()()()}if(2&o){const t=e.XpG();e.R7$(8),e.Y8G("img",t.phoneIcon),e.R7$(5),e.JRh(null==t.patient?null:t.patient.phone),e.R7$(2),e.Y8G("img",t.mailIcon),e.R7$(5),e.JRh(null==t.patient?null:t.patient.email),e.R7$(2),e.Y8G("img",t.messageSquareIcon),e.R7$(5),e.JRh(null==t.patient?null:t.patient.phone),e.R7$(2),e.Y8G("img",t.mapPinIcon),e.R7$(5),e.JRh(null==t.patient?null:t.patient.address),e.R7$(3),e.Y8G("img",t.alertTriangleIcon)}}function M(o,s){if(1&o){const t=e.RV6();e.j41(0,"div",20)(1,"div",21)(2,"h3",48),e.EFF(3,"Registrar Nueva Comunicaci\xf3n"),e.k0s(),e.j41(4,"p",49),e.EFF(5,"Complete el formulario para documentar la interacci\xf3n con el paciente"),e.k0s(),e.j41(6,"form",67)(7,"div")(8,"app-label"),e.EFF(9,"Tipo de contacto *"),e.k0s(),e.nrm(10,"app-select",68),e.k0s(),e.j41(11,"div")(12,"app-label"),e.EFF(13,"Motivo del contacto *"),e.k0s(),e.nrm(14,"app-input",69),e.k0s(),e.j41(15,"div")(16,"app-label"),e.EFF(17,"Notas y observaciones"),e.k0s(),e.nrm(18,"app-textarea",70),e.k0s(),e.j41(19,"div",71)(20,"app-button",72),e.bIt("click",function(){e.eBV(t);const i=e.XpG();return e.Njj(i.submitContact())}),e.nrm(21,"lucide-icon",46),e.EFF(22),e.k0s(),e.j41(23,"app-button",73),e.bIt("click",function(){e.eBV(t);const i=e.XpG();return e.Njj(i.clearContactForm())}),e.EFF(24," Limpiar "),e.k0s()()()()()}if(2&o){const t=e.XpG();e.R7$(6),e.Y8G("formGroup",t.contactForm),e.R7$(4),e.Y8G("options",t.contactTypeOptions),e.R7$(8),e.Y8G("rows",4),e.R7$(2),e.Y8G("disabled",t.isSubmitting),e.R7$(),e.Y8G("img",t.isSubmitting?t.clockIcon:t.checkCircle2Icon),e.R7$(),e.SpI(" ",t.isSubmitting?"Guardando...":"Registrar Contacto"," "),e.R7$(),e.Y8G("disabled",t.isSubmitting)}}function X(o,s){if(1&o&&(e.j41(0,"div",76),e.nrm(1,"lucide-icon",77),e.j41(2,"p"),e.EFF(3,"No hay registros de contacto"),e.k0s()()),2&o){const t=e.XpG(2);e.R7$(),e.Y8G("img",t.historyIcon)}}function B(o,s){if(1&o&&(e.j41(0,"p",89),e.EFF(1),e.k0s()),2&o){const t=e.XpG().$implicit;e.R7$(),e.JRh(t.notes)}}function A(o,s){if(1&o&&(e.j41(0,"div",79)(1,"div",80)(2,"div",1)(3,"span",81),e.nrm(4,"lucide-icon",82),e.EFF(5),e.k0s(),e.nrm(6,"lucide-icon",17),e.k0s(),e.j41(7,"div",83)(8,"div",84),e.nrm(9,"lucide-icon",85),e.EFF(10),e.k0s(),e.j41(11,"div",84),e.nrm(12,"lucide-icon",85),e.EFF(13),e.k0s()()(),e.j41(14,"h4",86),e.EFF(15),e.k0s(),e.DNE(16,B,2,1,"p",87),e.j41(17,"div",88),e.nrm(18,"lucide-icon",85),e.j41(19,"span"),e.EFF(20),e.k0s()()()),2&o){const t=s.$implicit,n=e.XpG(3);e.R7$(3),e.HbH(n.getContactTypeClass(t.type)),e.R7$(),e.Y8G("img",n.getContactTypeIcon(t.type)),e.R7$(),e.SpI(" ",n.getContactTypeLabel(t.type)," "),e.R7$(),e.Y8G("img",n.getStatusIcon(t.status)),e.R7$(3),e.Y8G("img",n.calendarIcon),e.R7$(),e.SpI(" ",t.date," "),e.R7$(2),e.Y8G("img",n.clockIcon),e.R7$(),e.SpI(" ",t.time," "),e.R7$(2),e.JRh(t.reason),e.R7$(),e.Y8G("ngIf",t.notes),e.R7$(2),e.Y8G("img",n.userIcon),e.R7$(2),e.SpI("Registrado por: ",t.createdBy,"")}}function O(o,s){if(1&o&&(e.j41(0,"div",37),e.DNE(1,A,21,13,"div",78),e.k0s()),2&o){const t=e.XpG(2);e.R7$(),e.Y8G("ngForOf",t.contactHistory)}}function V(o,s){if(1&o&&(e.j41(0,"div",20)(1,"div",21)(2,"h3",22),e.nrm(3,"lucide-icon",23),e.EFF(4," Historial de Comunicaciones "),e.k0s(),e.j41(5,"p",49),e.EFF(6,"Registro completo de todas las interacciones con el paciente"),e.k0s(),e.DNE(7,X,4,1,"div",74)(8,O,2,1,"div",75),e.k0s()()),2&o){const t=e.XpG();e.R7$(3),e.Y8G("img",t.historyIcon),e.R7$(4),e.Y8G("ngIf",0===t.contactHistory.length),e.R7$(),e.Y8G("ngIf",t.contactHistory.length>0)}}let J=(()=>{class o{constructor(t){this.fb=t,this.open=!1,this.patient=null,this.openChange=new e.bkB,this.activeTab="info",this.isSubmitting=!1,this.phoneIcon=a.bcf,this.mailIcon=a.gE4,this.messageSquareIcon=a.vEG,this.mapPinIcon=a.sDd,this.copyIcon=a.QRo,this.userIcon=a.KJW,this.calendarIcon=a.VvS,this.clockIcon=a.zD7,this.alertTriangleIcon=a.hcu,this.checkCircle2Icon=a.Jly,this.phoneCallIcon=a.d3s,this.sendIcon=a.Vnp,this.historyIcon=a.BZB,this.userCircleIcon=a.GvK,this.homeIcon=a.ww0,this.building2Icon=a.t6i,this.globeIcon=a.qzq,this.shieldIcon=a.ekZ,this.tabs=[{id:"info",label:"Informaci\xf3n",icon:this.phoneIcon},{id:"quick",label:"Contacto R\xe1pido",icon:this.phoneCallIcon},{id:"register",label:"Registrar",icon:this.sendIcon},{id:"history",label:"Historial",icon:this.historyIcon}],this.contactTypeOptions=[{value:"call",label:"Llamada telef\xf3nica"},{value:"email",label:"Correo electr\xf3nico"},{value:"sms",label:"Mensaje SMS"},{value:"in-person",label:"Presencial"}],this.contactHistory=[{id:"1",date:"27/09/2025",time:"10:30 AM",type:"call",reason:"Recordatorio de cita m\xe9dica",notes:"Paciente confirm\xf3 asistencia para control de diabetes el 30/09/2025",status:"completed",createdBy:"Dr. Carlos Mendoza"},{id:"2",date:"20/09/2025",time:"03:15 PM",type:"email",reason:"Env\xedo de resultados de laboratorio",notes:"Enviados resultados de HbA1c. Paciente notificada.",status:"completed",createdBy:"Dra. Ana Mart\xednez"}],this.contactForm=this.fb.group({contactType:["call",r.k0.required],contactReason:["",r.k0.required],contactNotes:[""]})}ngOnInit(){}onOpenChange(t){this.openChange.emit(t)}onClose(){this.openChange.emit(!1)}getTabClass(t){return this.activeTab===t?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}copyPhone(){this.patient?.phone&&(navigator.clipboard.writeText(this.patient.phone),console.log("Tel\xe9fono copiado:",this.patient.phone))}copyEmail(){this.patient?.email&&(navigator.clipboard.writeText(this.patient.email),console.log("Email copiado:",this.patient.email))}copyAddress(){if(this.patient){const t=`${this.patient.address}, ${this.patient.city}, ${this.patient.country}`;navigator.clipboard.writeText(t),console.log("Direcci\xf3n copiada:",t)}}copyEmergencyPhone(){this.patient?.emergencyContact?.phone&&(navigator.clipboard.writeText(this.patient.emergencyContact.phone),console.log("Tel\xe9fono de emergencia copiado"))}handleCall(){console.log("Iniciando llamada a:",this.patient?.phone)}handleEmail(){this.patient?.email&&(window.location.href=`mailto:${this.patient.email}`)}handleSMS(){console.log("Preparando SMS para:",this.patient?.phone)}openLocation(){this.patient&&window.open(`https://maps.google.com/?q=${encodeURIComponent(`${this.patient.address}, ${this.patient.city}, ${this.patient.country}`)}`,"_blank")}callEmergency(){console.log("Llamando a contacto de emergencia:",this.patient?.emergencyContact?.phone)}submitContact(){if(this.contactForm.valid){this.isSubmitting=!0;const t={id:Date.now().toString(),date:(new Date).toLocaleDateString("es-ES"),time:(new Date).toLocaleTimeString("es-ES",{hour:"2-digit",minute:"2-digit"}),type:this.contactForm.value.contactType,reason:this.contactForm.value.contactReason,notes:this.contactForm.value.contactNotes,status:"completed",createdBy:"Dr. Usuario Actual"};setTimeout(()=>{this.contactHistory.unshift(t),this.isSubmitting=!1,this.clearContactForm(),this.activeTab="history",console.log("Contacto registrado:",t)},1e3)}}clearContactForm(){this.contactForm.reset({contactType:"call"})}getContactTypeLabel(t){return{call:"Llamada",email:"Email",sms:"SMS","in-person":"Presencial"}[t]||t}getContactTypeIcon(t){return{call:this.phoneIcon,email:this.mailIcon,sms:this.messageSquareIcon,"in-person":this.userCircleIcon}[t]||this.phoneIcon}getContactTypeClass(t){return{call:"bg-blue-100 text-blue-800 border-blue-300",email:"bg-purple-100 text-purple-800 border-purple-300",sms:"bg-green-100 text-green-800 border-green-300","in-person":"bg-orange-100 text-orange-800 border-orange-300"}[t]||"bg-gray-100 text-gray-800 border-gray-300"}getStatusIcon(t){return{completed:this.checkCircle2Icon,pending:this.clockIcon,failed:this.alertTriangleIcon}[t]||this.clockIcon}static{this.\u0275fac=function(n){return new(n||o)(e.rXU(r.ok))}}static{this.\u0275cmp=e.VBU({type:o,selectors:[["app-contact-patient-dialog"]],inputs:{open:"open",patient:"patient"},outputs:{openChange:"openChange"},standalone:!0,features:[e.aNF],decls:29,vars:10,consts:[["contentClass","max-w-4xl",3,"openChange","open"],[1,"flex","items-center","gap-2"],[1,"w-5","h-5","text-blue-600",3,"img"],[1,"text-sm","text-gray-600","mt-2"],[1,"border-l-4","border-l-blue-600","bg-blue-50","rounded-lg","p-4","mb-6"],[1,"flex","items-center","gap-3"],[1,"p-2","bg-blue-100","rounded-lg"],[1,"w-6","h-6","text-blue-600",3,"img"],[1,"font-semibold","text-gray-900"],[1,"text-sm","text-gray-600"],[1,"border-b","border-gray-200","mb-6"],[1,"flex","space-x-8"],["class","py-2 px-1 border-b-2 font-medium text-sm flex items-center gap-2",3,"class","click",4,"ngFor","ngForOf"],["class","space-y-6",4,"ngIf"],[1,"flex","justify-end","gap-2"],["variant","outline",3,"click"],[1,"py-2","px-1","border-b-2","font-medium","text-sm","flex","items-center","gap-2",3,"click"],[1,"w-4","h-4",3,"img"],["class","bg-gray-200 text-gray-700 text-xs px-2 py-0.5 rounded-full",4,"ngIf"],[1,"bg-gray-200","text-gray-700","text-xs","px-2","py-0.5","rounded-full"],[1,"space-y-6"],[1,"bg-white","border","border-gray-200","rounded-lg","p-6"],[1,"text-lg","font-medium","text-gray-900","mb-4","flex","items-center","gap-2"],[1,"w-5","h-5",3,"img"],[1,"grid","grid-cols-2","gap-4","mb-4"],[1,"text-sm","text-gray-600","flex","items-center","gap-2"],[1,"flex","gap-2","mt-1"],["type","text","readonly","",1,"flex","h-9","w-full","rounded-md","border","border-gray-300","bg-gray-50","px-3","py-1","text-sm",3,"value"],["variant","outline","size","sm",3,"click"],[1,"border-t","border-gray-200","pt-4"],[1,"mt-2","space-y-2"],[1,"flex","gap-2"],[1,"grid","grid-cols-2","gap-2"],[1,"w-4","h-4","text-gray-500",3,"img"],[1,"text-sm","text-gray-700"],[1,"border-l-4","border-l-red-500","bg-red-50","rounded-lg","p-6"],[1,"text-lg","font-medium","text-red-900","mb-4","flex","items-center","gap-2"],[1,"space-y-3"],[1,"flex","items-center","justify-between"],[1,"font-semibold","text-red-900"],[1,"text-sm","text-red-700"],[1,"bg-red-100","text-red-800","border","border-red-300","px-2","py-1","text-xs","rounded-full"],[1,"border-t","border-red-200","pt-3"],[1,"w-4","h-4","text-red-700",3,"img"],[1,"text-sm","font-medium","text-red-900"],["size","sm",3,"click"],[1,"w-4","h-4","mr-2",3,"img"],[1,"text-xs","text-gray-600","italic"],[1,"text-lg","font-medium","text-gray-900","mb-4"],[1,"text-sm","text-gray-600","mb-4"],[1,"w-full","justify-start","bg-blue-600","hover:bg-blue-700",3,"click"],[1,"w-5","h-5","mr-3",3,"img"],[1,"text-left"],[1,"font-semibold"],[1,"text-xs","opacity-90"],["variant","outline",1,"w-full","justify-start","border-purple-300","hover:bg-purple-50",3,"click"],[1,"w-5","h-5","mr-3","text-purple-600",3,"img"],[1,"text-xs","text-gray-600"],["variant","outline",1,"w-full","justify-start","border-green-300","hover:bg-green-50",3,"click"],[1,"w-5","h-5","mr-3","text-green-600",3,"img"],["variant","outline",1,"w-full","justify-start","border-orange-300","hover:bg-orange-50",3,"click"],[1,"w-5","h-5","mr-3","text-orange-600",3,"img"],[1,"bg-blue-50","border","border-blue-200","rounded-lg","p-4"],[1,"flex","gap-3"],[1,"w-5","h-5","text-blue-600","flex-shrink-0","mt-0.5",3,"img"],[1,"text-sm","text-blue-900"],[1,"font-semibold","mb-1"],[1,"space-y-4",3,"formGroup"],["formControlName","contactType",3,"options"],["placeholder","Ej: Recordatorio de cita, consulta telef\xf3nica, seguimiento...","formControlName","contactReason"],["placeholder","Describa los detalles de la comunicaci\xf3n, temas tratados, acuerdos realizados...","formControlName","contactNotes",3,"rows"],[1,"flex","gap-2","pt-4"],["type","button",1,"flex-1",3,"click","disabled"],["variant","outline","type","button",3,"click","disabled"],["class","text-center py-8 text-gray-500",4,"ngIf"],["class","space-y-3",4,"ngIf"],[1,"text-center","py-8","text-gray-500"],[1,"w-12","h-12","mx-auto","mb-3","opacity-50",3,"img"],["class","border-l-4 border-l-blue-500 bg-white border border-gray-200 rounded-lg p-4",4,"ngFor","ngForOf"],[1,"border-l-4","border-l-blue-500","bg-white","border","border-gray-200","rounded-lg","p-4"],[1,"flex","items-start","justify-between","mb-2"],[1,"px-2","py-1","text-xs","font-semibold","rounded-full","flex","items-center","border"],[1,"w-3","h-3","mr-1",3,"img"],[1,"text-xs","text-gray-600","text-right"],[1,"flex","items-center","gap-1"],[1,"w-3","h-3",3,"img"],[1,"font-semibold","text-gray-900","mb-1"],["class","text-sm text-gray-700 mb-2",4,"ngIf"],[1,"flex","items-center","gap-2","text-xs","text-gray-600"],[1,"text-sm","text-gray-700","mb-2"]],template:function(n,i){1&n&&(e.j41(0,"app-dialog",0),e.bIt("openChange",function(p){return i.onOpenChange(p)}),e.j41(1,"app-dialog-header")(2,"app-dialog-title")(3,"div",1),e.nrm(4,"lucide-icon",2),e.EFF(5," Gesti\xf3n de Contacto del Paciente "),e.k0s()(),e.j41(6,"p",3),e.EFF(7," Informaci\xf3n de contacto, comunicaciones y registro de interacciones "),e.k0s()(),e.j41(8,"app-dialog-content")(9,"div",4)(10,"div",5)(11,"div",6),e.nrm(12,"lucide-icon",7),e.k0s(),e.j41(13,"div")(14,"h3",8),e.EFF(15),e.k0s(),e.j41(16,"p",9),e.EFF(17),e.k0s()()()(),e.j41(18,"div",10)(19,"nav",11),e.DNE(20,D,4,5,"button",12),e.k0s()(),e.DNE(21,Y,67,21,"div",13)(22,S,43,9,"div",13)(23,M,25,7,"div",13)(24,V,9,3,"div",13),e.k0s(),e.j41(25,"app-dialog-footer")(26,"div",14)(27,"app-button",15),e.bIt("click",function(){return i.onClose()}),e.EFF(28," Cerrar "),e.k0s()()()()),2&n&&(e.Y8G("open",i.open),e.R7$(4),e.Y8G("img",i.phoneIcon),e.R7$(8),e.Y8G("img",i.userIcon),e.R7$(3),e.JRh(null==i.patient?null:i.patient.fullName),e.R7$(2),e.SpI("ID: ",null==i.patient?null:i.patient.id,""),e.R7$(3),e.Y8G("ngForOf",i.tabs),e.R7$(),e.Y8G("ngIf","info"===i.activeTab),e.R7$(),e.Y8G("ngIf","quick"===i.activeTab),e.R7$(),e.Y8G("ngIf","register"===i.activeTab),e.R7$(),e.Y8G("ngIf","history"===i.activeTab))},dependencies:[m.MD,m.Sq,m.bT,r.X1,r.qT,r.BC,r.cb,r.j4,r.JD,r.YN,a.flO,a.WGl,d.mq,d.BP,d.qi,d.J2,d.Z_,h.Q,b.S,f.U,_.Q,v.w],encapsulation:2})}}return o})();var z=c(8961),L=c(2193),U=c(1822),H=c(2957);function q(o,s){if(1&o&&(e.j41(0,"div",16),e.nrm(1,"lucide-icon",17),e.j41(2,"p",18),e.EFF(3),e.k0s()()),2&o){const t=e.XpG();e.R7$(),e.Y8G("img",t.usersIcon),e.R7$(2),e.SpI('No se encontraron pacientes que coincidan con "',t.searchTerm,'"')}}function W(o,s){if(1&o&&(e.j41(0,"p",36),e.EFF(1),e.k0s()),2&o){const t=e.XpG().$implicit;e.R7$(),e.SpI("",t.age," a\xf1os")}}function Q(o,s){if(1&o&&(e.j41(0,"div",28),e.nrm(1,"lucide-icon",29),e.EFF(2),e.k0s()),2&o){const t=e.XpG().$implicit,n=e.XpG();e.R7$(),e.Y8G("img",n.mailIcon),e.R7$(),e.SpI(" ",t.email," ")}}function Z(o,s){if(1&o&&(e.j41(0,"div",37),e.nrm(1,"span",38),e.EFF(2),e.k0s()),2&o){const t=e.XpG().$implicit;e.R7$(2),e.SpI(" ",t.allergies.length," alergia(s) ")}}function K(o,s){if(1&o){const t=e.RV6();e.j41(0,"div",19)(1,"div",20)(2,"div",21),e.nrm(3,"lucide-icon",22),e.k0s(),e.j41(4,"div",23)(5,"h3",24),e.EFF(6),e.k0s(),e.j41(7,"p",25),e.EFF(8),e.k0s(),e.DNE(9,W,2,1,"p",26),e.k0s()(),e.j41(10,"div",27)(11,"div",28),e.nrm(12,"lucide-icon",29),e.EFF(13),e.k0s(),e.DNE(14,Q,3,2,"div",30)(15,Z,3,1,"div",31),e.k0s(),e.j41(16,"div",32)(17,"button",33),e.bIt("click",function(){const i=e.eBV(t).$implicit,l=e.XpG();return e.Njj(l.editPatient(i))}),e.nrm(18,"lucide-icon",2),e.EFF(19," Editar "),e.k0s(),e.j41(20,"button",34),e.bIt("click",function(){const i=e.eBV(t).$implicit,l=e.XpG();return e.Njj(l.contactPatient(i))}),e.nrm(21,"lucide-icon",2),e.EFF(22," Contactar "),e.k0s(),e.j41(23,"button",35),e.nrm(24,"lucide-icon",2),e.EFF(25," Receta "),e.k0s()()()}if(2&o){const t=s.$implicit,n=e.XpG();e.R7$(3),e.Y8G("img",n.usersIcon),e.R7$(3),e.JRh(t.fullName||t.nombre),e.R7$(2),e.JRh(t.idNumber||t.cedula),e.R7$(),e.Y8G("ngIf",t.age),e.R7$(3),e.Y8G("img",n.phoneIcon),e.R7$(),e.SpI(" ",t.phone||t.telefono," "),e.R7$(),e.Y8G("ngIf",t.email),e.R7$(),e.Y8G("ngIf",t.allergies&&t.allergies.length>0),e.R7$(3),e.Y8G("img",n.editIcon),e.R7$(3),e.Y8G("img",n.messageSquareIcon),e.R7$(3),e.Y8G("img",n.fileTextIcon)}}function ee(o,s){if(1&o){const t=e.RV6();e.j41(0,"div",39),e.nrm(1,"lucide-icon",40),e.j41(2,"h3",41),e.EFF(3,"No hay pacientes registrados"),e.k0s(),e.j41(4,"p",42),e.EFF(5,"Comience agregando su primer paciente al sistema"),e.k0s(),e.j41(6,"button",43),e.bIt("click",function(){e.eBV(t);const i=e.XpG();return e.Njj(i.openNewPatientDialog())}),e.nrm(7,"lucide-icon",2),e.j41(8,"span"),e.EFF(9,"Registrar Primer Paciente"),e.k0s()()()}if(2&o){const t=e.XpG();e.R7$(),e.Y8G("img",t.usersIcon),e.R7$(6),e.Y8G("img",t.plusIcon)}}let te=(()=>{class o{getPageDescription(){return`Administraci\xf3n y registro de pacientes del sistema (${this.pacientes.length} registrados)`}constructor(t,n){this.roleDemoService=t,this.roleSuggestionService=n,this.plusIcon=a.FWt,this.searchIcon=a.vji,this.usersIcon=a.zWC,this.phoneIcon=a.bcf,this.mailIcon=a.gE4,this.editIcon=a.ffu,this.fileTextIcon=a.iUU,this.messageSquareIcon=a.vEG,this.pageTitle="Gesti\xf3n de Pacientes",this.breadcrumbItems=[{label:"Pacientes"}],this.showNewPatientDialog=!1,this.showEditPatientDialog=!1,this.showContactPatientDialog=!1,this.searchTerm="",this.filteredPacientes=[],this.selectedPatient=null,this.selectedPatientContact=null,this.showRoleSuggestionModal=(0,e.vPA)(!1),this.subscriptions=new C.yU,this.pacientes=[{nombre:"Mar\xeda Gonz\xe1lez P\xe9rez",fullName:"Mar\xeda Elena Gonz\xe1lez P\xe9rez",cedula:"1-1234-5678",idNumber:"1-1234-5678",telefono:"+506 8888-9999",phone:"+506 8888-9999",email:"maria.gonzalez@email.com",age:34,allergies:["Penicilina"]},{nombre:"Juan Carlos Rodr\xedguez",fullName:"Juan Carlos Rodr\xedguez L\xf3pez",cedula:"2-2345-6789",idNumber:"2-2345-6789",telefono:"+506 7777-8888",phone:"+506 7777-8888",email:"juan.rodriguez@email.com",age:45,allergies:[]},{nombre:"Ana Sof\xeda L\xf3pez",fullName:"Ana Sof\xeda L\xf3pez Jim\xe9nez",cedula:"3-3456-7890",idNumber:"3-3456-7890",telefono:"+506 6666-7777",phone:"+506 6666-7777",email:"ana.lopez@email.com",age:28,allergies:["Ibuprofeno","Mariscos"]}],this.filteredPacientes=[...this.pacientes]}ngOnInit(){console.log("\u{1f680} Inicializando componente de pacientes"),setTimeout(()=>{this.checkRoleSuggestion()},500);const t=this.roleDemoService.currentSession$.subscribe(n=>{console.log("\u{1f504} Cambio de rol detectado:",n.activeRole),"M\xe9dico"===n.activeRole||"Administrador"===n.activeRole?(this.showRoleSuggestionModal.set(!1),this.roleSuggestionService.clearDismissedPages()):this.checkRoleSuggestion()});this.subscriptions.add(t)}ngOnDestroy(){this.subscriptions.unsubscribe()}checkRoleSuggestion(){const t=this.roleDemoService.getCurrentSession();console.log("\u{1f50d} Verificando rol en pacientes:",t.activeRole),"M\xe9dico"!==t.activeRole&&"Administrador"!==t.activeRole?(console.log("\u2705 Mostrando modal de sugerencia de rol para:",t.activeRole),this.showRoleSuggestionModal.set(!0)):(console.log("\u274c No mostrando modal para rol:",t.activeRole),this.showRoleSuggestionModal.set(!1))}onRoleSuggestionDismiss(){console.log("\u274c Modal de sugerencia descartado"),this.showRoleSuggestionModal.set(!1)}onRoleChanged(){console.log("\u2705 Rol cambiado, cerrando modal"),this.showRoleSuggestionModal.set(!1)}debugModalState(){const t=this.roleDemoService.getCurrentSession();return console.log("\u{1f41b} Estado del modal de sugerencia:"),console.log("- Rol actual:",t.activeRole),console.log("- Modal visible:",this.showRoleSuggestionModal()),console.log("- Debe mostrar modal:","M\xe9dico"!==t.activeRole&&"Administrador"!==t.activeRole),{currentRole:t.activeRole,modalVisible:this.showRoleSuggestionModal(),shouldShow:"M\xe9dico"!==t.activeRole&&"Administrador"!==t.activeRole}}openNewPatientDialog(){this.showNewPatientDialog=!0}onPatientCreated(t){this.pacientes.unshift(t),this.filterPatients(),console.log("Nuevo paciente agregado:",t)}onPatientUpdated(t){const n=this.pacientes.findIndex(i=>i.id===t.id);-1!==n&&(this.pacientes[n]=t,this.filterPatients(),console.log("Paciente actualizado:",t))}editPatient(t){this.selectedPatient={id:t.id||`PAT-${Date.now()}`,fullName:t.fullName||t.nombre||"",idType:"CC",idNumber:t.idNumber||t.cedula,firstName:t.fullName?.split(" ")[0]||t.nombre?.split(" ")[0]||"",firstLastName:t.fullName?.split(" ").slice(-1)[0]||t.nombre?.split(" ").slice(-1)[0]||"",birthDate:"",age:0,gender:"M",phone:t.phone||t.telefono,email:t.email,country:"Costa Rica",allergies:t.allergies||[],chronicConditions:t.chronicConditions||[],currentMedications:t.currentMedications||[],emergencyContact:{name:"",relationship:"",phone:""},registrationDate:(new Date).toISOString().split("T")[0],status:"active"},this.showEditPatientDialog=!0}contactPatient(t){this.selectedPatientContact={id:t.id||`PAT-${Date.now()}`,fullName:t.fullName||t.nombre,phone:t.phone||t.telefono,email:t.email||"",address:t.address||"Direcci\xf3n no especificada",city:t.city||"San Jos\xe9",country:t.country||"Costa Rica",emergencyContact:{name:"Contacto de emergencia",relationship:"Familiar",phone:"+506 0000-0000"}},this.showContactPatientDialog=!0}filterPatients(){if(!this.searchTerm.trim())return void(this.filteredPacientes=[...this.pacientes]);const t=this.searchTerm.toLowerCase();this.filteredPacientes=this.pacientes.filter(n=>(n.fullName||n.nombre).toLowerCase().includes(t)||(n.idNumber||n.cedula).toLowerCase().includes(t)||(n.phone||n.telefono).toLowerCase().includes(t)||(n.email||"").toLowerCase().includes(t))}static{this.\u0275fac=function(n){return new(n||o)(e.rXU(U.z),e.rXU(H.i))}}static{this.\u0275cmp=e.VBU({type:o,selectors:[["app-pacientes"]],standalone:!0,features:[e.aNF],decls:18,vars:19,consts:[[3,"title","description","icon","breadcrumbItems","hasActionButton"],["slot","action",1,"bg-white/20","hover:bg-white/30","text-white","px-4","py-2","rounded-lg","flex","items-center","space-x-2","transition-colors","backdrop-blur-sm",3,"click"],[1,"w-4","h-4",3,"img"],[1,"bg-white","rounded-lg","shadow","p-6"],[1,"relative"],[1,"absolute","inset-y-0","left-0","pl-3","flex","items-center","pointer-events-none"],[1,"h-5","w-5","text-gray-400",3,"img"],["type","text","placeholder","Buscar pacientes por nombre, c\xe9dula o tel\xe9fono...",1,"block","w-full","pl-10","pr-3","py-2","border","border-gray-300","rounded-md","focus:outline-none","focus:ring-blue-500","focus:border-blue-500",3,"ngModelChange","input","ngModel"],["class","text-center py-8",4,"ngIf"],[1,"grid","grid-cols-1","md:grid-cols-2","lg:grid-cols-3","gap-6"],["class","bg-white rounded-lg shadow p-6 hover:shadow-md transition-shadow",4,"ngFor","ngForOf"],["class","text-center py-12",4,"ngIf"],[3,"openChange","patientCreated","open"],[3,"openChange","patientUpdated","open","patient"],[3,"openChange","open","patient"],[3,"dismiss","roleChanged","isOpen","suggestedRole","pageName"],[1,"text-center","py-8"],[1,"w-12","h-12","mx-auto","text-gray-400","mb-3",3,"img"],[1,"text-gray-500"],[1,"bg-white","rounded-lg","shadow","p-6","hover:shadow-md","transition-shadow"],[1,"flex","items-center","space-x-4"],[1,"w-12","h-12","bg-blue-100","rounded-full","flex","items-center","justify-center"],[1,"w-6","h-6","text-blue-600",3,"img"],[1,"flex-1"],[1,"text-lg","font-medium","text-gray-900"],[1,"text-sm","text-gray-500"],["class","text-xs text-gray-400",4,"ngIf"],[1,"mt-4","space-y-2"],[1,"flex","items-center","text-sm","text-gray-600"],[1,"w-4","h-4","mr-2",3,"img"],["class","flex items-center text-sm text-gray-600",4,"ngIf"],["class","flex items-center text-sm text-red-600",4,"ngIf"],[1,"mt-4","flex","space-x-2"],[1,"flex-1","bg-blue-50","text-blue-700","px-3","py-2","rounded","text-sm","hover:bg-blue-100","flex","items-center","justify-center","gap-1",3,"click"],[1,"flex-1","bg-purple-50","text-purple-700","px-3","py-2","rounded","text-sm","hover:bg-purple-100","flex","items-center","justify-center","gap-1",3,"click"],[1,"flex-1","bg-green-50","text-green-700","px-3","py-2","rounded","text-sm","hover:bg-green-100","flex","items-center","justify-center","gap-1"],[1,"text-xs","text-gray-400"],[1,"flex","items-center","text-sm","text-red-600"],[1,"w-2","h-2","bg-red-500","rounded-full","mr-2"],[1,"text-center","py-12"],[1,"w-16","h-16","mx-auto","text-gray-400","mb-4",3,"img"],[1,"text-lg","font-medium","text-gray-900","mb-2"],[1,"text-gray-500","mb-4"],[1,"bg-blue-600","hover:bg-blue-700","text-white","px-4","py-2","rounded-md","flex","items-center","space-x-2","mx-auto",3,"click"]],template:function(n,i){1&n&&(e.j41(0,"app-page-layout",0)(1,"button",1),e.bIt("click",function(){return i.openNewPatientDialog()}),e.nrm(2,"lucide-icon",2),e.j41(3,"span"),e.EFF(4,"Nuevo Paciente"),e.k0s()(),e.j41(5,"div",3)(6,"div",4)(7,"div",5),e.nrm(8,"lucide-icon",6),e.k0s(),e.j41(9,"input",7),e.mxI("ngModelChange",function(p){return e.DH7(i.searchTerm,p)||(i.searchTerm=p),p}),e.bIt("input",function(){return i.filterPatients()}),e.k0s()()(),e.DNE(10,q,4,2,"div",8),e.j41(11,"div",9),e.DNE(12,K,26,11,"div",10),e.k0s(),e.DNE(13,ee,10,2,"div",11),e.k0s(),e.j41(14,"app-new-patient-dialog",12),e.bIt("openChange",function(p){return i.showNewPatientDialog=p})("patientCreated",function(p){return i.onPatientCreated(p)}),e.k0s(),e.j41(15,"app-edit-patient-dialog",13),e.bIt("openChange",function(p){return i.showEditPatientDialog=p})("patientUpdated",function(p){return i.onPatientUpdated(p)}),e.k0s(),e.j41(16,"app-contact-patient-dialog",14),e.bIt("openChange",function(p){return i.showContactPatientDialog=p}),e.k0s(),e.j41(17,"app-role-suggestion-modal",15),e.bIt("dismiss",function(){return i.onRoleSuggestionDismiss()})("roleChanged",function(){return i.onRoleChanged()}),e.k0s()),2&n&&(e.Y8G("title",i.pageTitle)("description",i.getPageDescription())("icon",i.usersIcon)("breadcrumbItems",i.breadcrumbItems)("hasActionButton",!0),e.R7$(2),e.Y8G("img",i.plusIcon),e.R7$(6),e.Y8G("img",i.searchIcon),e.R7$(),e.R50("ngModel",i.searchTerm),e.R7$(),e.Y8G("ngIf",0===i.filteredPacientes.length&&i.searchTerm),e.R7$(2),e.Y8G("ngForOf",i.filteredPacientes),e.R7$(),e.Y8G("ngIf",0===i.pacientes.length),e.R7$(),e.Y8G("open",i.showNewPatientDialog),e.R7$(),e.Y8G("open",i.showEditPatientDialog)("patient",i.selectedPatient),e.R7$(),e.Y8G("open",i.showContactPatientDialog)("patient",i.selectedPatientContact),e.R7$(),e.Y8G("isOpen",i.showRoleSuggestionModal())("suggestedRole","M\xe9dico")("pageName","pacientes-lista"))},dependencies:[m.MD,m.Sq,m.bT,r.YN,r.me,r.BC,r.vS,a.flO,a.WGl,F.h,N,J,z.J,L.t],encapsulation:2})}}return o})()}}]);