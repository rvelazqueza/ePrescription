"use strict";(self.webpackChunkeprescription_angular=self.webpackChunkeprescription_angular||[]).push([[6912],{8777:(I,R,c)=>{c.d(R,{m:()=>C});var e=c(177),h=c(6283),n=c(8516),o=c(4438);function E(d,f){if(1&d&&o.nrm(0,"lucide-icon",4),2&d){const u=o.XpG(2).$implicit;o.Y8G("img",u.icon)}}function x(d,f){if(1&d&&(o.j41(0,"a",9),o.DNE(1,E,1,1,"lucide-icon",10),o.EFF(2),o.k0s()),2&d){const u=o.XpG().$implicit;o.Y8G("routerLink",u.route),o.R7$(),o.Y8G("ngIf",u.icon),o.R7$(),o.SpI(" ",u.label," ")}}function F(d,f){if(1&d&&o.nrm(0,"lucide-icon",4),2&d){const u=o.XpG(2).$implicit;o.Y8G("img",u.icon)}}function j(d,f){if(1&d&&(o.j41(0,"span",11),o.DNE(1,F,1,1,"lucide-icon",10),o.EFF(2),o.k0s()),2&d){const u=o.XpG(),l=u.$implicit;o.BMQ("aria-current",u.last?"page":null),o.R7$(),o.Y8G("ngIf",l.icon),o.R7$(),o.SpI(" ",l.label," ")}}function k(d,f){if(1&d&&(o.j41(0,"li",2),o.nrm(1,"lucide-icon",6),o.DNE(2,x,3,3,"a",7)(3,j,3,3,"span",8),o.k0s()),2&d){const u=f.$implicit,l=f.last,_=o.XpG();o.R7$(),o.Y8G("img",_.chevronRightIcon),o.R7$(),o.Y8G("ngIf",u.route&&!l),o.R7$(),o.Y8G("ngIf",!u.route||l)}}let C=(()=>{class d{constructor(){this.items=[],this.homeIcon=n.ww0,this.chevronRightIcon=n.c_$}static{this.\u0275fac=function(l){return new(l||d)}}static{this.\u0275cmp=o.VBU({type:d,selectors:[["app-breadcrumbs"]],inputs:{items:"items"},standalone:!0,features:[o.aNF],decls:7,vars:2,consts:[["aria-label","Breadcrumb",1,"fixed","left-64","right-0","z-30","bg-gray-50","border-b","border-gray-200","px-6","py-3",2,"top","93px"],[1,"inline-flex","items-center","space-x-1","md:space-x-3"],[1,"inline-flex","items-center"],["routerLink","/dashboard",1,"inline-flex","items-center","text-sm","font-medium","text-gray-700","hover:text-blue-600","transition-colors"],["aria-hidden","true",1,"w-4","h-4","mr-2",3,"img"],["class","inline-flex items-center",4,"ngFor","ngForOf"],["aria-hidden","true",1,"w-4","h-4","text-gray-400","mx-1",3,"img"],["class","inline-flex items-center text-sm font-medium text-gray-700 hover:text-blue-600 transition-colors",3,"routerLink",4,"ngIf"],["class","inline-flex items-center text-sm font-medium text-gray-500",4,"ngIf"],[1,"inline-flex","items-center","text-sm","font-medium","text-gray-700","hover:text-blue-600","transition-colors",3,"routerLink"],["class","w-4 h-4 mr-2","aria-hidden","true",3,"img",4,"ngIf"],[1,"inline-flex","items-center","text-sm","font-medium","text-gray-500"]],template:function(l,_){1&l&&(o.j41(0,"nav",0)(1,"ol",1)(2,"li",2)(3,"a",3),o.nrm(4,"lucide-icon",4),o.EFF(5," Inicio "),o.k0s()(),o.DNE(6,k,4,3,"li",5),o.k0s()()),2&l&&(o.R7$(4),o.Y8G("img",_.homeIcon),o.R7$(2),o.Y8G("ngForOf",_.items))},dependencies:[e.MD,e.Sq,e.bT,h.iI,h.Wk,n.flO,n.WGl],encapsulation:2})}}return d})()},1265:(I,R,c)=>{c.d(R,{y:()=>u});var e=c(177),h=c(8516),n=c(4438),o=c(6283);const E=[[["","slot","action"]]],x=["[slot=action]"];function F(l,_){if(1&l){const p=n.RV6();n.j41(0,"button",12),n.bIt("click",function(){n.eBV(p);const g=n.XpG();return n.Njj(g.onCreateUserClick())}),n.qSk(),n.j41(1,"svg",13),n.nrm(2,"path",14),n.k0s(),n.EFF(3," \xbfCrear usuario? "),n.k0s()}}function j(l,_){1&l&&(n.j41(0,"span",15),n.EFF(1," Sistema profesional de seguridad "),n.k0s())}function k(l,_){if(1&l&&(n.j41(0,"div",1)(1,"div",16),n.nrm(2,"lucide-icon",17),n.k0s(),n.j41(3,"div",18),n.nrm(4,"lucide-icon",17),n.k0s(),n.j41(5,"div",19),n.nrm(6,"lucide-icon",17),n.k0s()()),2&l){const p=n.XpG();n.R7$(2),n.Y8G("img",p.stethoscopeIcon),n.R7$(2),n.Y8G("img",p.shieldCheckIcon),n.R7$(2),n.Y8G("img",p.building2Icon)}}function C(l,_){if(1&l){const p=n.RV6();n.j41(0,"div",20)(1,"span",21),n.nrm(2,"lucide-icon",22),n.EFF(3," HL7 FHIR "),n.k0s(),n.j41(4,"span",21),n.qSk(),n.j41(5,"svg",23),n.nrm(6,"path",24),n.k0s(),n.EFF(7," FDA Compliant "),n.k0s(),n.joV(),n.j41(8,"span",21),n.nrm(9,"lucide-icon",22),n.EFF(10," OMS Standards "),n.k0s(),n.j41(11,"span",25),n.bIt("click",function(){n.eBV(p);const g=n.XpG();return n.Njj(g.navigateToNotifications())}),n.qSk(),n.j41(12,"svg",26),n.nrm(13,"path",27)(14,"path",28),n.k0s(),n.EFF(15," 3 notificaciones "),n.k0s()()}if(2&l){const p=n.XpG();n.R7$(2),n.Y8G("img",p.shieldCheckIcon),n.R7$(7),n.Y8G("img",p.stethoscopeIcon)}}function d(l,_){1&l&&(n.j41(0,"div",29)(1,"span",15),n.EFF(2," Cifrado E2E "),n.k0s(),n.j41(3,"span",15),n.EFF(4," HIPAA Compliant "),n.k0s(),n.j41(5,"span",15),n.EFF(6," FDA 21 CFR Part 11 "),n.k0s(),n.j41(7,"span",15),n.EFF(8," NIST 800-63B "),n.k0s()())}function f(l,_){1&l&&(n.j41(0,"div",30)(1,"div",31)(2,"div",32),n.qSk(),n.j41(3,"svg",33),n.nrm(4,"path",34),n.k0s()(),n.joV(),n.j41(5,"span",35),n.EFF(6,"Validaci\xf3n autom\xe1tica con colegios profesionales"),n.k0s()(),n.j41(7,"div",31)(8,"div",32),n.qSk(),n.j41(9,"svg",33),n.nrm(10,"path",36),n.k0s()(),n.joV(),n.j41(11,"span",35),n.EFF(12,"Cumplimiento normativo HL7, FDA y OMS"),n.k0s()()())}let u=(()=>{class l{constructor(p){this.router=p,this.title="",this.description="",this.actionButton=!1,this.gradient="",this.showMedicalIcons=!1,this.showCreateUserButton=!1,this.createUserButtonClick=null,this.showSecurityBadge=!1,this.stethoscopeIcon=h.oYO,this.shieldCheckIcon=h.oxo,this.building2Icon=h.t6i}onCreateUserClick(){this.createUserButtonClick&&this.createUserButtonClick()}navigateToNotifications(){this.router.navigate(["/notificaciones/lista"])}static{this.\u0275fac=function(v){return new(v||l)(n.rXU(o.Ix))}}static{this.\u0275cmp=n.VBU({type:l,selectors:[["app-page-header"]],inputs:{title:"title",description:"description",icon:"icon",actionButton:"actionButton",gradient:"gradient",showMedicalIcons:"showMedicalIcons",showCreateUserButton:"showCreateUserButton",createUserButtonClick:"createUserButtonClick",showSecurityBadge:"showSecurityBadge"},standalone:!0,features:[n.aNF],ngContentSelectors:x,decls:18,vars:11,consts:[[1,"flex","items-center","justify-between"],[1,"flex","items-center","gap-4"],[1,"w-16","h-16","bg-white/20","rounded-xl","flex","items-center","justify-center","backdrop-blur-sm"],[1,"w-8","h-8","text-white",3,"img"],[1,"text-2xl","font-bold"],[1,"text-blue-100"],["class","inline-flex items-center px-4 py-2 bg-white/10 text-white border border-white/30 rounded-lg hover:bg-white/20 transition-colors text-sm",3,"click",4,"ngIf"],["class","inline-flex items-center px-3 py-1 rounded-full text-xs font-medium bg-white/20 text-white border border-white/30",4,"ngIf"],["class","flex items-center gap-4",4,"ngIf"],["class","flex gap-2",4,"ngIf"],["class","mt-4 flex flex-wrap gap-2",4,"ngIf"],["class","mt-6 flex flex-wrap gap-4",4,"ngIf"],[1,"inline-flex","items-center","px-4","py-2","bg-white/10","text-white","border","border-white/30","rounded-lg","hover:bg-white/20","transition-colors","text-sm",3,"click"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-4","h-4","mr-2"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M12 9v3m0 0v3m0-3h3m-3 0H9m12 0a9 9 0 11-18 0 9 9 0 0118 0z"],[1,"inline-flex","items-center","px-3","py-1","rounded-full","text-xs","font-medium","bg-white/20","text-white","border","border-white/30"],["title","Servicios M\xe9dicos",1,"w-14","h-14","bg-white/20","rounded-2xl","flex","items-center","justify-center","backdrop-blur-sm","border","border-white/30","hover:bg-white/30","transition-all","duration-200","cursor-pointer","group"],[1,"w-7","h-7","text-white","group-hover:scale-110","transition-transform","duration-200",3,"img"],["title","Seguridad y Protecci\xf3n",1,"w-14","h-14","bg-white/20","rounded-2xl","flex","items-center","justify-center","backdrop-blur-sm","border","border-white/30","hover:bg-white/30","transition-all","duration-200","cursor-pointer","group"],["title","Centros M\xe9dicos",1,"w-14","h-14","bg-white/20","rounded-2xl","flex","items-center","justify-center","backdrop-blur-sm","border","border-white/30","hover:bg-white/30","transition-all","duration-200","cursor-pointer","group"],[1,"flex","gap-2"],[1,"inline-flex","items-center","px-3","py-1","rounded-full","text-xs","font-medium","bg-white/20","text-white","border","border-white/30","hover:bg-white/30","transition-colors"],[1,"w-3","h-3","mr-1",3,"img"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-3","h-3","mr-1"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"],["title","Ver notificaciones pendientes",1,"inline-flex","items-center","px-3","py-1","rounded-full","text-xs","font-medium","bg-red-500","text-white","border","border-red-400","cursor-pointer","hover:bg-red-600","transition-colors","shadow-lg",3,"click"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-3","h-3","mr-1","animate-pulse"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M18 8A6 6 0 0 0 6 8c0 7-3 9-3 9h18s-3-2-3-9"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","m13.73 21a2 2 0 0 1-3.46 0"],[1,"mt-4","flex","flex-wrap","gap-2"],[1,"mt-6","flex","flex-wrap","gap-4"],[1,"flex","items-center","gap-2","text-white/90"],[1,"w-5","h-5","bg-white/20","rounded-full","flex","items-center","justify-center"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-3","h-3","text-white"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M5 13l4 4L19 7"],[1,"text-sm","font-medium"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M9 12l2 2 4-4m5.5-2a9 9 0 11-18 0 9 9 0 0118 0z"]],template:function(v,g){1&v&&(n.NAR(E),n.j41(0,"div")(1,"div",0)(2,"div",1)(3,"div",2),n.nrm(4,"lucide-icon",3),n.k0s(),n.j41(5,"div")(6,"h1",4),n.EFF(7),n.k0s(),n.j41(8,"p",5),n.EFF(9),n.k0s()()(),n.j41(10,"div",1),n.SdG(11),n.DNE(12,F,4,0,"button",6)(13,j,2,0,"span",7)(14,k,7,3,"div",8)(15,C,16,2,"div",9),n.k0s()(),n.DNE(16,d,9,0,"div",10)(17,f,13,0,"div",11),n.k0s()),2&v&&(n.HbH("bg-gradient-to-r text-white rounded-lg p-6 "+(g.gradient||"from-blue-600 to-purple-700")),n.R7$(4),n.Y8G("img",g.icon),n.R7$(3),n.JRh(g.title),n.R7$(2),n.JRh(g.description),n.R7$(3),n.Y8G("ngIf",g.showCreateUserButton),n.R7$(),n.Y8G("ngIf",g.showSecurityBadge),n.R7$(),n.Y8G("ngIf",(g.showMedicalIcons||g.title.includes("Registro de usuarios")||g.title.includes("Usuarios")&&!g.title.includes("Gesti\xf3n de Usuarios")||g.title.includes("Seguridad")&&!g.title.includes("Par\xe1metros de Seguridad"))&&!g.title.includes("Autoservicio")),n.R7$(),n.Y8G("ngIf",g.title.includes("Dashboard")||g.description.includes("Prescripci\xf3n Electr\xf3nica")),n.R7$(),n.Y8G("ngIf",g.title.includes("Autoservicio")),n.R7$(),n.Y8G("ngIf",g.title.includes("Registro de usuarios")))},dependencies:[e.MD,e.bT,h.flO,h.WGl],encapsulation:2})}}return l})()},6912:(I,R,c)=>{c.r(R),c.d(R,{ReglasAlertasComponent:()=>g});var e=c(4438),h=c(177),n=c(4341),o=c(8516),E=c(8777),x=c(1265),F=c(2193),j=c(8359),k=c(1822);function C(s,b){if(1&s){const t=e.RV6();e.j41(0,"div")(1,"button",62),e.bIt("click",function(){e.eBV(t);const i=e.XpG();return e.Njj(i.limpiarFiltros())}),e.nrm(2,"lucide-icon",42),e.EFF(3," Limpiar filtros "),e.k0s()()}if(2&s){const t=e.XpG();e.R7$(2),e.Y8G("img",t.filterXIcon)}}function d(s,b){if(1&s&&(e.j41(0,"div",63),e.nrm(1,"lucide-icon",64),e.j41(2,"h3",65),e.EFF(3,"No hay reglas configuradas"),e.k0s(),e.j41(4,"p",66),e.EFF(5,"No se encontraron reglas con los filtros aplicados o no hay reglas configuradas."),e.k0s()()),2&s){const t=e.XpG();e.R7$(),e.Y8G("img",t.settingsIcon)}}function f(s,b){if(1&s){const t=e.RV6();e.j41(0,"div",91),e.bIt("click",function(i){return e.eBV(t),e.Njj(i.stopPropagation())}),e.j41(1,"div",92)(2,"div",93),e.EFF(3," Acciones "),e.k0s(),e.j41(4,"button",94),e.bIt("click",function(){e.eBV(t);const i=e.XpG().$implicit,a=e.XpG(2);return a.verDetalleRegla(i),e.Njj(a.cerrarModalAcciones())}),e.nrm(5,"lucide-icon",95),e.EFF(6," Ver detalles "),e.k0s(),e.j41(7,"button",94),e.bIt("click",function(){e.eBV(t);const i=e.XpG().$implicit,a=e.XpG(2);return a.editarRegla(i),e.Njj(a.cerrarModalAcciones())}),e.nrm(8,"lucide-icon",95),e.EFF(9," Editar regla "),e.k0s(),e.j41(10,"div",96)(11,"button",97),e.bIt("click",function(){e.eBV(t);const i=e.XpG().$implicit,a=e.XpG(2);return a.toggleEstadoRegla(i),e.Njj(a.cerrarModalAcciones())}),e.nrm(12,"lucide-icon",42),e.EFF(13),e.k0s()()()()}if(2&s){const t=e.XpG().$implicit,r=e.XpG(2);e.R7$(5),e.Y8G("img",r.eyeIcon),e.R7$(3),e.Y8G("img",r.editIcon),e.R7$(3),e.HbH("active"===t.status?"text-red-600 hover:bg-red-50":"text-green-600 hover:bg-green-50"),e.R7$(),e.Y8G("img","active"===t.status?r.banIcon:r.checkCircle2Icon),e.R7$(),e.SpI(" ","active"===t.status?"Desactivar":"Activar"," ")}}function u(s,b){if(1&s){const t=e.RV6();e.j41(0,"tr",75),e.bIt("dblclick",function(){const i=e.eBV(t).$implicit,a=e.XpG(2);return e.Njj(a.verDetalleRegla(i))}),e.j41(1,"td",76)(2,"div",77),e.nrm(3,"lucide-icon",78),e.j41(4,"span",79),e.EFF(5),e.k0s()()(),e.j41(6,"td",80)(7,"div",81)(8,"p",82),e.EFF(9),e.k0s(),e.j41(10,"p",83),e.EFF(11),e.k0s()()(),e.j41(12,"td",76)(13,"span",84),e.EFF(14),e.k0s()(),e.j41(15,"td",80)(16,"p",85),e.EFF(17),e.k0s()(),e.j41(18,"td",76)(19,"span",84),e.EFF(20),e.k0s()(),e.j41(21,"td",86)(22,"span",84),e.EFF(23),e.k0s()(),e.j41(24,"td",76)(25,"span",82),e.EFF(26),e.k0s()(),e.j41(27,"td",87)(28,"div",25)(29,"button",88),e.bIt("click",function(i){const a=e.eBV(t).$implicit;return e.XpG(2).toggleAccionesModal(a.id),e.Njj(i.stopPropagation())}),e.nrm(30,"lucide-icon",89),e.k0s(),e.DNE(31,f,14,6,"div",90),e.k0s()()()}if(2&s){const t=b.$implicit,r=e.XpG(2);e.R7$(3),e.Y8G("img",r.shieldIcon),e.R7$(2),e.JRh(t.name),e.R7$(4),e.JRh(t.medicine1),e.R7$(2),e.SpI("+ ",t.medicine2,""),e.R7$(2),e.HbH(r.getSeveridadBadgeClass(t.severity)),e.R7$(),e.SpI(" ",r.getSeveridadTexto(t.severity)," "),e.R7$(3),e.JRh(t.clinicalEffect),e.R7$(2),e.HbH(r.getEvidenciaBadgeClass(t.evidenceLevel)),e.R7$(),e.SpI(" Nivel ",t.evidenceLevel," "),e.R7$(2),e.HbH(r.getEstadoBadgeClass(t.status)),e.R7$(),e.SpI(" ",r.getEstadoTexto(t.status)," "),e.R7$(3),e.JRh(t.lastUpdated),e.R7$(4),e.Y8G("img",r.moreVerticalIcon),e.R7$(),e.Y8G("ngIf",r.modalAccionesAbierto===t.id)}}function l(s,b){if(1&s&&(e.j41(0,"div",67)(1,"table",68)(2,"thead",69)(3,"tr")(4,"th",70),e.EFF(5,"Nombre de la regla"),e.k0s(),e.j41(6,"th",70),e.EFF(7,"Medicamentos"),e.k0s(),e.j41(8,"th",70),e.EFF(9,"Severidad"),e.k0s(),e.j41(10,"th",70),e.EFF(11,"Efecto cl\xednico"),e.k0s(),e.j41(12,"th",70),e.EFF(13,"Evidencia"),e.k0s(),e.j41(14,"th",71),e.EFF(15,"Estado"),e.k0s(),e.j41(16,"th",70),e.EFF(17,"\xdaltima actualizaci\xf3n"),e.k0s(),e.j41(18,"th",72),e.EFF(19,"Acciones"),e.k0s()()(),e.j41(20,"tbody",73),e.DNE(21,u,32,17,"tr",74),e.k0s()()()),2&s){const t=e.XpG();e.R7$(21),e.Y8G("ngForOf",t.reglasFiltradas)}}function _(s,b){if(1&s){const t=e.RV6();e.j41(0,"div",98),e.bIt("click",function(){e.eBV(t);const i=e.XpG();return e.Njj(i.cerrarModalNuevaRegla())}),e.j41(1,"div",99),e.nrm(2,"div",100),e.j41(3,"div",101),e.bIt("click",function(i){return e.eBV(t),e.Njj(i.stopPropagation())}),e.j41(4,"div",102)(5,"div",9)(6,"div")(7,"h3",103),e.EFF(8,"Nueva Regla de Interacci\xf3n"),e.k0s(),e.j41(9,"p",104),e.EFF(10,"Registra una nueva regla de interacci\xf3n medicamentosa"),e.k0s()(),e.j41(11,"button",105),e.bIt("click",function(){e.eBV(t);const i=e.XpG();return e.Njj(i.cerrarModalNuevaRegla())}),e.nrm(12,"lucide-icon",89),e.k0s()()(),e.j41(13,"div",106)(14,"div")(15,"label",107),e.EFF(16,"Nombre de la regla *"),e.k0s(),e.j41(17,"input",108),e.mxI("ngModelChange",function(i){e.eBV(t);const a=e.XpG();return e.DH7(a.nuevaRegla.name,i)||(a.nuevaRegla.name=i),e.Njj(i)}),e.k0s()(),e.j41(18,"div",109)(19,"div")(20,"label",107),e.EFF(21,"Medicamento 1 *"),e.k0s(),e.j41(22,"input",110),e.mxI("ngModelChange",function(i){e.eBV(t);const a=e.XpG();return e.DH7(a.nuevaRegla.medicine1,i)||(a.nuevaRegla.medicine1=i),e.Njj(i)}),e.k0s()(),e.j41(23,"div")(24,"label",107),e.EFF(25,"Medicamento 2 *"),e.k0s(),e.j41(26,"input",111),e.mxI("ngModelChange",function(i){e.eBV(t);const a=e.XpG();return e.DH7(a.nuevaRegla.medicine2,i)||(a.nuevaRegla.medicine2=i),e.Njj(i)}),e.k0s()()(),e.j41(27,"div",109)(28,"div")(29,"label",107),e.EFF(30,"Severidad *"),e.k0s(),e.j41(31,"select",112),e.mxI("ngModelChange",function(i){e.eBV(t);const a=e.XpG();return e.DH7(a.nuevaRegla.severity,i)||(a.nuevaRegla.severity=i),e.Njj(i)}),e.j41(32,"option",29),e.EFF(33,"Selecciona severidad"),e.k0s(),e.j41(34,"option",30),e.EFF(35,"Cr\xedtica"),e.k0s(),e.j41(36,"option",31),e.EFF(37,"Alta"),e.k0s(),e.j41(38,"option",32),e.EFF(39,"Media"),e.k0s(),e.j41(40,"option",33),e.EFF(41,"Baja"),e.k0s()()(),e.j41(42,"div")(43,"label",107),e.EFF(44,"Nivel de evidencia *"),e.k0s(),e.j41(45,"select",112),e.mxI("ngModelChange",function(i){e.eBV(t);const a=e.XpG();return e.DH7(a.nuevaRegla.evidenceLevel,i)||(a.nuevaRegla.evidenceLevel=i),e.Njj(i)}),e.j41(46,"option",29),e.EFF(47,"Selecciona nivel"),e.k0s(),e.j41(48,"option",36),e.EFF(49,"Nivel A"),e.k0s(),e.j41(50,"option",37),e.EFF(51,"Nivel B"),e.k0s(),e.j41(52,"option",38),e.EFF(53,"Nivel C"),e.k0s()()()(),e.j41(54,"div")(55,"label",107),e.EFF(56,"Mecanismo de interacci\xf3n *"),e.k0s(),e.j41(57,"textarea",113),e.mxI("ngModelChange",function(i){e.eBV(t);const a=e.XpG();return e.DH7(a.nuevaRegla.mechanism,i)||(a.nuevaRegla.mechanism=i),e.Njj(i)}),e.k0s()(),e.j41(58,"div")(59,"label",107),e.EFF(60,"Efecto cl\xednico *"),e.k0s(),e.j41(61,"textarea",114),e.mxI("ngModelChange",function(i){e.eBV(t);const a=e.XpG();return e.DH7(a.nuevaRegla.clinicalEffect,i)||(a.nuevaRegla.clinicalEffect=i),e.Njj(i)}),e.k0s()(),e.j41(62,"div")(63,"label",107),e.EFF(64,"Recomendaci\xf3n *"),e.k0s(),e.j41(65,"textarea",115),e.mxI("ngModelChange",function(i){e.eBV(t);const a=e.XpG();return e.DH7(a.nuevaRegla.recommendation,i)||(a.nuevaRegla.recommendation=i),e.Njj(i)}),e.k0s()(),e.j41(66,"div")(67,"label",107),e.EFF(68,"Referencias bibliogr\xe1ficas"),e.k0s(),e.j41(69,"input",116),e.mxI("ngModelChange",function(i){e.eBV(t);const a=e.XpG();return e.DH7(a.nuevaRegla.references,i)||(a.nuevaRegla.references=i),e.Njj(i)}),e.k0s()()(),e.j41(70,"div",117)(71,"button",118),e.bIt("click",function(){e.eBV(t);const i=e.XpG();return e.Njj(i.cerrarModalNuevaRegla())}),e.EFF(72," Cancelar "),e.k0s(),e.j41(73,"button",119),e.bIt("click",function(){e.eBV(t);const i=e.XpG();return e.Njj(i.guardarNuevaRegla())}),e.nrm(74,"lucide-icon",42),e.EFF(75," Crear regla "),e.k0s()()()()()}if(2&s){const t=e.XpG();e.R7$(12),e.Y8G("img",t.xIcon),e.R7$(5),e.R50("ngModel",t.nuevaRegla.name),e.R7$(5),e.R50("ngModel",t.nuevaRegla.medicine1),e.R7$(4),e.R50("ngModel",t.nuevaRegla.medicine2),e.R7$(5),e.R50("ngModel",t.nuevaRegla.severity),e.R7$(14),e.R50("ngModel",t.nuevaRegla.evidenceLevel),e.R7$(12),e.R50("ngModel",t.nuevaRegla.mechanism),e.R7$(4),e.R50("ngModel",t.nuevaRegla.clinicalEffect),e.R7$(4),e.R50("ngModel",t.nuevaRegla.recommendation),e.R7$(4),e.R50("ngModel",t.nuevaRegla.references),e.R7$(4),e.Y8G("disabled",!t.esFormularioValido()),e.R7$(),e.Y8G("img",t.saveIcon)}}function p(s,b){if(1&s){const t=e.RV6();e.j41(0,"div",98),e.bIt("click",function(){e.eBV(t);const i=e.XpG();return e.Njj(i.cerrarModalEditarRegla())}),e.j41(1,"div",99),e.nrm(2,"div",100),e.j41(3,"div",101),e.bIt("click",function(i){return e.eBV(t),e.Njj(i.stopPropagation())}),e.j41(4,"div",102)(5,"div",9)(6,"div")(7,"h3",103),e.EFF(8,"Editar Regla de Interacci\xf3n"),e.k0s(),e.j41(9,"p",104),e.EFF(10,"Modifica los datos de la regla de interacci\xf3n medicamentosa"),e.k0s()(),e.j41(11,"button",105),e.bIt("click",function(){e.eBV(t);const i=e.XpG();return e.Njj(i.cerrarModalEditarRegla())}),e.nrm(12,"lucide-icon",89),e.k0s()()(),e.j41(13,"div",106)(14,"div")(15,"label",107),e.EFF(16,"Nombre de la regla *"),e.k0s(),e.j41(17,"input",108),e.mxI("ngModelChange",function(i){e.eBV(t);const a=e.XpG();return e.DH7(a.reglaEditando.name,i)||(a.reglaEditando.name=i),e.Njj(i)}),e.k0s()(),e.j41(18,"div",109)(19,"div")(20,"label",107),e.EFF(21,"Medicamento 1 *"),e.k0s(),e.j41(22,"input",110),e.mxI("ngModelChange",function(i){e.eBV(t);const a=e.XpG();return e.DH7(a.reglaEditando.medicine1,i)||(a.reglaEditando.medicine1=i),e.Njj(i)}),e.k0s()(),e.j41(23,"div")(24,"label",107),e.EFF(25,"Medicamento 2 *"),e.k0s(),e.j41(26,"input",111),e.mxI("ngModelChange",function(i){e.eBV(t);const a=e.XpG();return e.DH7(a.reglaEditando.medicine2,i)||(a.reglaEditando.medicine2=i),e.Njj(i)}),e.k0s()()(),e.j41(27,"div",109)(28,"div")(29,"label",107),e.EFF(30,"Severidad *"),e.k0s(),e.j41(31,"select",112),e.mxI("ngModelChange",function(i){e.eBV(t);const a=e.XpG();return e.DH7(a.reglaEditando.severity,i)||(a.reglaEditando.severity=i),e.Njj(i)}),e.j41(32,"option",30),e.EFF(33,"Cr\xedtica"),e.k0s(),e.j41(34,"option",31),e.EFF(35,"Alta"),e.k0s(),e.j41(36,"option",32),e.EFF(37,"Media"),e.k0s(),e.j41(38,"option",33),e.EFF(39,"Baja"),e.k0s()()(),e.j41(40,"div")(41,"label",107),e.EFF(42,"Nivel de evidencia *"),e.k0s(),e.j41(43,"select",112),e.mxI("ngModelChange",function(i){e.eBV(t);const a=e.XpG();return e.DH7(a.reglaEditando.evidenceLevel,i)||(a.reglaEditando.evidenceLevel=i),e.Njj(i)}),e.j41(44,"option",36),e.EFF(45,"Nivel A"),e.k0s(),e.j41(46,"option",37),e.EFF(47,"Nivel B"),e.k0s(),e.j41(48,"option",38),e.EFF(49,"Nivel C"),e.k0s()()()(),e.j41(50,"div")(51,"label",107),e.EFF(52,"Mecanismo de interacci\xf3n *"),e.k0s(),e.j41(53,"textarea",113),e.mxI("ngModelChange",function(i){e.eBV(t);const a=e.XpG();return e.DH7(a.reglaEditando.mechanism,i)||(a.reglaEditando.mechanism=i),e.Njj(i)}),e.k0s()(),e.j41(54,"div")(55,"label",107),e.EFF(56,"Efecto cl\xednico *"),e.k0s(),e.j41(57,"textarea",114),e.mxI("ngModelChange",function(i){e.eBV(t);const a=e.XpG();return e.DH7(a.reglaEditando.clinicalEffect,i)||(a.reglaEditando.clinicalEffect=i),e.Njj(i)}),e.k0s()(),e.j41(58,"div")(59,"label",107),e.EFF(60,"Recomendaci\xf3n *"),e.k0s(),e.j41(61,"textarea",115),e.mxI("ngModelChange",function(i){e.eBV(t);const a=e.XpG();return e.DH7(a.reglaEditando.recommendation,i)||(a.reglaEditando.recommendation=i),e.Njj(i)}),e.k0s()(),e.j41(62,"div")(63,"label",107),e.EFF(64,"Referencias bibliogr\xe1ficas"),e.k0s(),e.j41(65,"input",116),e.mxI("ngModelChange",function(i){e.eBV(t);const a=e.XpG();return e.DH7(a.reglaEditando.references,i)||(a.reglaEditando.references=i),e.Njj(i)}),e.k0s()()(),e.j41(66,"div",117)(67,"button",118),e.bIt("click",function(){e.eBV(t);const i=e.XpG();return e.Njj(i.cerrarModalEditarRegla())}),e.EFF(68," Cancelar "),e.k0s(),e.j41(69,"button",119),e.bIt("click",function(){e.eBV(t);const i=e.XpG();return e.Njj(i.guardarCambiosRegla())}),e.nrm(70,"lucide-icon",42),e.EFF(71," Guardar cambios "),e.k0s()()()()()}if(2&s){const t=e.XpG();e.R7$(12),e.Y8G("img",t.xIcon),e.R7$(5),e.R50("ngModel",t.reglaEditando.name),e.R7$(5),e.R50("ngModel",t.reglaEditando.medicine1),e.R7$(4),e.R50("ngModel",t.reglaEditando.medicine2),e.R7$(5),e.R50("ngModel",t.reglaEditando.severity),e.R7$(12),e.R50("ngModel",t.reglaEditando.evidenceLevel),e.R7$(10),e.R50("ngModel",t.reglaEditando.mechanism),e.R7$(4),e.R50("ngModel",t.reglaEditando.clinicalEffect),e.R7$(4),e.R50("ngModel",t.reglaEditando.recommendation),e.R7$(4),e.R50("ngModel",t.reglaEditando.references),e.R7$(4),e.Y8G("disabled",!t.esFormularioEditarValido()),e.R7$(),e.Y8G("img",t.saveIcon)}}function v(s,b){if(1&s){const t=e.RV6();e.j41(0,"div",120),e.bIt("click",function(){e.eBV(t);const i=e.XpG();return e.Njj(i.cerrarModalDetalles())}),e.nrm(1,"div",121),e.j41(2,"div",122),e.bIt("click",function(i){return e.eBV(t),e.Njj(i.stopPropagation())}),e.j41(3,"div",123)(4,"div",9)(5,"div")(6,"div",124),e.nrm(7,"lucide-icon",89),e.j41(8,"h2",125),e.EFF(9,"Detalles de la Regla"),e.k0s()(),e.j41(10,"p",104),e.EFF(11),e.k0s()(),e.j41(12,"button",105),e.bIt("click",function(){e.eBV(t);const i=e.XpG();return e.Njj(i.cerrarModalDetalles())}),e.nrm(13,"lucide-icon",89),e.k0s()()(),e.j41(14,"div",126)(15,"div",127)(16,"div",128)(17,"div",9)(18,"div",124),e.nrm(19,"lucide-icon",129),e.j41(20,"span",130),e.EFF(21,"Estado de la regla"),e.k0s()(),e.j41(22,"span",131),e.EFF(23),e.k0s()()(),e.j41(24,"div")(25,"div",132),e.nrm(26,"lucide-icon",133),e.j41(27,"h3",48),e.EFF(28,"Informaci\xf3n b\xe1sica"),e.k0s()(),e.j41(29,"div",134)(30,"div")(31,"p",135),e.EFF(32,"ID de la regla"),e.k0s(),e.j41(33,"p",136),e.EFF(34),e.k0s()(),e.j41(35,"div",109)(36,"div")(37,"p",135),e.EFF(38,"Severidad"),e.k0s(),e.j41(39,"span",137),e.EFF(40),e.k0s()(),e.j41(41,"div")(42,"p",135),e.EFF(43,"Nivel de evidencia"),e.k0s(),e.j41(44,"span",137),e.EFF(45),e.k0s()()()()(),e.j41(46,"div")(47,"div",132),e.nrm(48,"lucide-icon",133),e.j41(49,"h3",48),e.EFF(50,"Medicamentos involucrados"),e.k0s()(),e.j41(51,"div",138)(52,"div",128)(53,"p",135),e.EFF(54,"Medicamento(s) 1"),e.k0s(),e.j41(55,"p",136),e.EFF(56),e.k0s()(),e.j41(57,"div",128)(58,"p",135),e.EFF(59,"Medicamento(s) 2"),e.k0s(),e.j41(60,"p",136),e.EFF(61),e.k0s()()()(),e.j41(62,"div")(63,"h4",139),e.EFF(64,"Mecanismo de interacci\xf3n"),e.k0s(),e.j41(65,"div",140)(66,"p",141),e.EFF(67),e.k0s()()(),e.j41(68,"div")(69,"h4",139),e.EFF(70,"Efecto cl\xednico"),e.k0s(),e.j41(71,"div",142)(72,"p",143),e.EFF(73),e.k0s()()(),e.j41(74,"div")(75,"h4",139),e.EFF(76,"Recomendaci\xf3n"),e.k0s(),e.j41(77,"div",54)(78,"p",144),e.EFF(79),e.k0s()()(),e.j41(80,"div")(81,"h4",139),e.EFF(82,"Referencias bibliogr\xe1ficas"),e.k0s(),e.j41(83,"p",145),e.EFF(84),e.k0s()(),e.j41(85,"div",128)(86,"h4",139),e.EFF(87,"Informaci\xf3n de actualizaci\xf3n"),e.k0s(),e.j41(88,"p",135),e.EFF(89),e.k0s()()()(),e.j41(90,"div",146)(91,"div",147)(92,"button",118),e.bIt("click",function(){e.eBV(t);const i=e.XpG();return e.Njj(i.cerrarModalDetalles())}),e.EFF(93," Cerrar "),e.k0s(),e.j41(94,"button",148),e.bIt("click",function(){e.eBV(t);const i=e.XpG();return i.editarRegla(i.reglaSeleccionada),e.Njj(i.cerrarModalDetalles())}),e.nrm(95,"lucide-icon",42),e.EFF(96," Editar regla "),e.k0s()()()()()}if(2&s){const t=e.XpG();e.R7$(7),e.Y8G("img",t.shieldIcon),e.R7$(4),e.JRh(t.reglaSeleccionada.name),e.R7$(2),e.Y8G("img",t.xIcon),e.R7$(6),e.Y8G("img",t.settingsIcon),e.R7$(3),e.HbH(t.getEstadoBadgeClass(t.reglaSeleccionada.status)),e.R7$(),e.SpI(" ",t.getEstadoTexto(t.reglaSeleccionada.status)," "),e.R7$(3),e.Y8G("img",t.fileTextIcon),e.R7$(8),e.JRh(t.reglaSeleccionada.id),e.R7$(5),e.HbH(t.getSeveridadBadgeClass(t.reglaSeleccionada.severity)),e.R7$(),e.SpI(" ",t.getSeveridadTexto(t.reglaSeleccionada.severity)," "),e.R7$(4),e.HbH(t.getEvidenciaBadgeClass(t.reglaSeleccionada.evidenceLevel)),e.R7$(),e.SpI(" Nivel ",t.reglaSeleccionada.evidenceLevel," "),e.R7$(3),e.Y8G("img",t.pillIcon),e.R7$(8),e.JRh(t.reglaSeleccionada.medicine1),e.R7$(5),e.JRh(t.reglaSeleccionada.medicine2),e.R7$(6),e.JRh(t.reglaSeleccionada.mechanism),e.R7$(6),e.JRh(t.reglaSeleccionada.clinicalEffect),e.R7$(6),e.JRh(t.reglaSeleccionada.recommendation),e.R7$(5),e.JRh(t.reglaSeleccionada.references),e.R7$(5),e.SpI("\xdaltima actualizaci\xf3n: ",t.reglaSeleccionada.lastUpdated,""),e.R7$(6),e.Y8G("img",t.editIcon)}}let g=(()=>{class s{constructor(t){this.roleDemoService=t,this.settingsIcon=o.wB_,this.shieldIcon=o.ekZ,this.searchIcon=o.vji,this.filterIcon=o.dJT,this.filterXIcon=o.Jog,this.eyeIcon=o.kU3,this.downloadIcon=o.f5X,this.checkCircle2Icon=o.Jly,this.xCircleIcon=o.Jpz,this.clockIcon=o.zD7,this.userIcon=o.KJW,this.fileTextIcon=o.iUU,this.pillIcon=o.abF,this.alertCircleIcon=o.RIJ,this.infoIcon=o.R2D,this.banIcon=o.MAP,this.shieldAlertIcon=o.yZn,this.bellIcon=o.IrQ,this.bellOffIcon=o.br1,this.xIcon=o.X,this.plusIcon=o.FWt,this.editIcon=o.ffu,this.trash2Icon=o.TBR,this.moreVerticalIcon=o.GvN,this.saveIcon=o.eMP,this.breadcrumbItems=[{label:"Alertas cl\xednicas",route:"/alertas"},{label:"Reglas e interacciones"}],this.reglas=[{id:"RULE-001",name:"Warfarina + Antiagregantes plaquetarios",medicine1:"Warfarina",medicine2:"\xc1cido acetilsalic\xedlico, Clopidogrel",severity:"critical",mechanism:"Efecto aditivo anticoagulante/antiagregante",clinicalEffect:"Riesgo aumentado de sangrado mayor",recommendation:"Evitar combinaci\xf3n o usar con extrema precauci\xf3n y monitoreo INR frecuente",status:"active",evidenceLevel:"A",references:"FDA, Micromedex, Lexicomp",lastUpdated:"2024-09-15"},{id:"RULE-002",name:"IECAs + Espironolactona",medicine1:"Enalapril, Lisinopril, Ramipril",medicine2:"Espironolactona",severity:"high",mechanism:"Ambos aumentan potasio s\xe9rico",clinicalEffect:"Hiperpotasemia",recommendation:"Monitorear potasio s\xe9rico regularmente. Considerar ajuste de dosis",status:"active",evidenceLevel:"A",references:"UpToDate, ACC/AHA Guidelines",lastUpdated:"2024-08-20"},{id:"RULE-003",name:"AINEs + IECAs",medicine1:"Ibuprofeno, Naproxeno, Diclofenaco",medicine2:"Enalapril, Lisinopril, Losart\xe1n",severity:"high",mechanism:"Los AINEs reducen la eficacia de IECAs/ARA-II",clinicalEffect:"Disminuci\xf3n del efecto antihipertensivo y riesgo de deterioro de funci\xf3n renal",recommendation:"Evitar uso prolongado de AINEs. Monitorear presi\xf3n arterial y funci\xf3n renal",status:"active",evidenceLevel:"A",references:"JNC-8, ESC/ESH Guidelines",lastUpdated:"2024-09-01"},{id:"RULE-004",name:"Metformina + Contraste yodado",medicine1:"Metformina",medicine2:"Contraste yodado (IV)",severity:"critical",mechanism:"Riesgo de acidosis l\xe1ctica en caso de deterioro de funci\xf3n renal",clinicalEffect:"Acidosis l\xe1ctica",recommendation:"Suspender metformina 48h antes y despu\xe9s del procedimiento con contraste. Verificar funci\xf3n renal",status:"active",evidenceLevel:"A",references:"FDA, ADA Guidelines",lastUpdated:"2024-07-10"},{id:"RULE-005",name:"Estatinas + Gemfibrozil",medicine1:"Atorvastatina, Simvastatina, Rosuvastatina",medicine2:"Gemfibrozil",severity:"critical",mechanism:"Gemfibrozil inhibe metabolismo de estatinas",clinicalEffect:"Riesgo severo de rabdomi\xf3lisis",recommendation:"Contraindicaci\xf3n absoluta. Usar fenofibrato en lugar de gemfibrozil si se requiere fibrato",status:"active",evidenceLevel:"A",references:"FDA Black Box Warning, ACC/AHA",lastUpdated:"2024-06-25"}],this.terminoBusqueda="",this.filtroSeveridad="",this.filtroEstado="",this.filtroEvidencia="",this.reglasFiltradas=[],this.reglaSeleccionada=null,this.modalAccionesAbierto=null,this.modalNuevaReglaAbierto=!1,this.modalEditarReglaAbierto=!1,this.nuevaRegla={name:"",medicine1:"",medicine2:"",severity:"medium",mechanism:"",clinicalEffect:"",recommendation:"",evidenceLevel:"C",references:"",status:"active"},this.reglaEditando={},this.reglaOriginalId="",this.stats={total:0,active:0,critical:0,inactive:0},this.showRoleSuggestionModal=(0,e.vPA)(!1),this.roleSubscriptions=new j.yU}ngOnInit(){this.calcularEstadisticas(),this.filtrarReglas(),this.checkRoleSuggestion(),this.subscribeToRoleChanges()}ngOnDestroy(){this.roleSubscriptions.unsubscribe()}calcularEstadisticas(){this.stats={total:this.reglas.length,active:this.reglas.filter(t=>"active"===t.status).length,critical:this.reglas.filter(t=>"critical"===t.severity&&"active"===t.status).length,inactive:this.reglas.filter(t=>"inactive"===t.status).length}}filtrarReglas(){this.reglasFiltradas=this.reglas.filter(t=>(t.name.toLowerCase().includes(this.terminoBusqueda.toLowerCase())||t.medicine1.toLowerCase().includes(this.terminoBusqueda.toLowerCase())||t.medicine2.toLowerCase().includes(this.terminoBusqueda.toLowerCase()))&&(!this.filtroSeveridad||t.severity===this.filtroSeveridad)&&(!this.filtroEstado||t.status===this.filtroEstado)&&(!this.filtroEvidencia||t.evidenceLevel===this.filtroEvidencia))}hayFiltrosActivos(){return!!(this.terminoBusqueda||this.filtroSeveridad||this.filtroEstado||this.filtroEvidencia)}limpiarFiltros(){this.terminoBusqueda="",this.filtroSeveridad="",this.filtroEstado="",this.filtroEvidencia="",this.filtrarReglas()}verDetalleRegla(t){this.reglaSeleccionada=t}editarRegla(t){this.reglaOriginalId=t.id,this.reglaEditando={...t},this.modalEditarReglaAbierto=!0}cerrarModalDetalles(){this.reglaSeleccionada=null}toggleAccionesModal(t){this.modalAccionesAbierto=this.modalAccionesAbierto===t?null:t}cerrarModalAcciones(){this.modalAccionesAbierto=null}abrirModalNuevaRegla(){this.modalNuevaReglaAbierto=!0,this.resetearNuevaRegla()}cerrarModalNuevaRegla(){this.modalNuevaReglaAbierto=!1,this.resetearNuevaRegla()}resetearNuevaRegla(){this.nuevaRegla={name:"",medicine1:"",medicine2:"",severity:"medium",mechanism:"",clinicalEffect:"",recommendation:"",evidenceLevel:"C",references:"",status:"active"}}esFormularioValido(){return!!(this.nuevaRegla.name&&this.nuevaRegla.medicine1&&this.nuevaRegla.medicine2&&this.nuevaRegla.severity&&this.nuevaRegla.mechanism&&this.nuevaRegla.clinicalEffect&&this.nuevaRegla.recommendation&&this.nuevaRegla.evidenceLevel)}guardarNuevaRegla(){if(this.esFormularioValido()){const t={id:`RULE-${String(this.reglas.length+1).padStart(3,"0")}`,name:this.nuevaRegla.name,medicine1:this.nuevaRegla.medicine1,medicine2:this.nuevaRegla.medicine2,severity:this.nuevaRegla.severity,mechanism:this.nuevaRegla.mechanism,clinicalEffect:this.nuevaRegla.clinicalEffect,recommendation:this.nuevaRegla.recommendation,status:"active",evidenceLevel:this.nuevaRegla.evidenceLevel,references:this.nuevaRegla.references||"Sin referencias",lastUpdated:(new Date).toISOString().split("T")[0]};this.reglas.unshift(t),this.calcularEstadisticas(),this.filtrarReglas(),this.cerrarModalNuevaRegla(),console.log("Nueva regla creada:",t)}}toggleEstadoRegla(t){const r=this.reglas.findIndex(i=>i.id===t.id);-1!==r&&(this.reglas[r].status="active"===this.reglas[r].status?"inactive":"active",this.reglas[r].lastUpdated=(new Date).toISOString().split("T")[0],this.calcularEstadisticas(),this.filtrarReglas())}cerrarModalEditarRegla(){this.modalEditarReglaAbierto=!1,this.reglaEditando={},this.reglaOriginalId=""}esFormularioEditarValido(){return!!(this.reglaEditando.name&&this.reglaEditando.medicine1&&this.reglaEditando.medicine2&&this.reglaEditando.severity&&this.reglaEditando.mechanism&&this.reglaEditando.clinicalEffect&&this.reglaEditando.recommendation&&this.reglaEditando.evidenceLevel)}guardarCambiosRegla(){if(this.esFormularioEditarValido()&&this.reglaOriginalId){const t=this.reglas.findIndex(r=>r.id===this.reglaOriginalId);-1!==t&&(this.reglas[t]={...this.reglas[t],name:this.reglaEditando.name,medicine1:this.reglaEditando.medicine1,medicine2:this.reglaEditando.medicine2,severity:this.reglaEditando.severity,mechanism:this.reglaEditando.mechanism,clinicalEffect:this.reglaEditando.clinicalEffect,recommendation:this.reglaEditando.recommendation,evidenceLevel:this.reglaEditando.evidenceLevel,references:this.reglaEditando.references||"Sin referencias",lastUpdated:(new Date).toISOString().split("T")[0]},this.calcularEstadisticas(),this.filtrarReglas(),this.cerrarModalEditarRegla(),console.log("Regla actualizada:",this.reglas[t]))}}getSeveridadBadgeClass(t){const r={critical:"bg-red-100 text-red-700 border-red-300",high:"bg-orange-100 text-orange-700 border-orange-300",medium:"bg-yellow-100 text-yellow-700 border-yellow-300",low:"bg-blue-100 text-blue-700 border-blue-300"};return r[t]||r.medium}getSeveridadTexto(t){return{critical:"Cr\xedtica",high:"Alta",medium:"Media",low:"Baja"}[t]||t}getEstadoBadgeClass(t){const r={active:"bg-green-100 text-green-700 border-green-300",inactive:"bg-gray-100 text-gray-700 border-gray-300"};return r[t]||r.active}getEstadoTexto(t){return{active:"Activa",inactive:"Inactiva"}[t]||t}getEvidenciaBadgeClass(t){const r={A:"bg-green-100 text-green-700 border-green-300",B:"bg-yellow-100 text-yellow-700 border-yellow-300",C:"bg-orange-100 text-orange-700 border-orange-300"};return r[t]||r.C}checkRoleSuggestion(){const t=this.roleDemoService.getCurrentSession();console.log("\u{1f527} ReglasAlertas - checkRoleSuggestion - currentRole:",t.activeRole),"M\xe9dico"!==t.activeRole&&"Administrador"!==t.activeRole?(console.log("\u{1f527} ReglasAlertas - Showing role suggestion modal for role:",t.activeRole),this.showRoleSuggestionModal.set(!0)):(console.log("\u{1f527} ReglasAlertas - Not showing modal, user has appropriate role"),this.showRoleSuggestionModal.set(!1))}subscribeToRoleChanges(){this.roleSubscriptions.add(this.roleDemoService.currentSession$.subscribe(t=>{console.log("\u{1f527} ReglasAlertas - Role changed to:",t.activeRole),this.checkRoleSuggestion()}))}onRoleSuggestionDismiss(){console.log("\u{1f527} ReglasAlertas - Role suggestion dismissed"),this.showRoleSuggestionModal.set(!1)}onRoleChanged(){console.log("\u{1f527} ReglasAlertas - Role changed, closing modal"),this.showRoleSuggestionModal.set(!1)}static{this.\u0275fac=function(r){return new(r||s)(e.rXU(k.z))}}static{this.\u0275cmp=e.VBU({type:s,selectors:[["app-reglas-alertas"]],standalone:!0,features:[e.aNF],decls:129,vars:33,consts:[[1,"space-y-6",3,"click"],[3,"items"],["title","Reglas de Interacciones Medicamentosas","description","Configuraci\xf3n y gesti\xf3n de reglas del sistema de alertas cl\xednicas",3,"icon","actionButton"],["slot","action",1,"bg-white/20","backdrop-blur-sm","text-white","px-4","py-2","rounded-lg","border","border-white/30"],[1,"text-right"],[1,"text-xs","text-white/80"],[1,"text-2xl","font-bold","text-white"],[1,"grid","grid-cols-1","md:grid-cols-4","gap-4"],[1,"bg-white","rounded-lg","shadow","border-l-4","border-l-blue-500","p-6"],[1,"flex","items-center","justify-between"],[1,"text-sm","text-gray-600","font-medium"],[1,"text-3xl","font-bold","text-gray-900"],[1,"p-3","bg-blue-100","rounded-lg"],[1,"w-8","h-8","text-blue-600",3,"img"],[1,"bg-white","rounded-lg","shadow","border-l-4","border-l-green-500","p-6"],[1,"p-3","bg-green-100","rounded-lg"],[1,"w-8","h-8","text-green-600",3,"img"],[1,"bg-white","rounded-lg","shadow","border-l-4","border-l-red-500","p-6"],[1,"p-3","bg-red-100","rounded-lg"],[1,"w-8","h-8","text-red-600",3,"img"],[1,"bg-white","rounded-lg","shadow","border-l-4","border-l-gray-500","p-6"],[1,"p-3","bg-gray-100","rounded-lg"],[1,"w-8","h-8","text-gray-600",3,"img"],[1,"bg-white","rounded-lg","shadow","p-6"],[1,"grid","gap-4","md:grid-cols-4"],[1,"relative"],[1,"absolute","left-3","top-1/2","transform","-translate-y-1/2","w-4","h-4","text-gray-400",3,"img"],["type","text","placeholder","Buscar por medicamento o nombre de regla...",1,"w-full","pl-10","pr-4","py-2","border","border-gray-300","rounded-lg","focus:ring-2","focus:ring-blue-500","focus:border-transparent",3,"ngModelChange","input","ngModel"],[1,"px-3","py-2","border","border-gray-300","rounded-lg","focus:ring-2","focus:ring-blue-500","focus:border-transparent",3,"ngModelChange","change","ngModel"],["value",""],["value","critical"],["value","high"],["value","medium"],["value","low"],["value","active"],["value","inactive"],["value","A"],["value","B"],["value","C"],[1,"mt-4","flex","justify-between","items-center"],[4,"ngIf"],[1,"px-4","py-2","bg-blue-600","text-white","rounded-lg","hover:bg-blue-700","flex","items-center","gap-2",3,"click"],[1,"w-4","h-4",3,"img"],[1,"bg-white","rounded-lg","shadow","overflow-hidden"],[1,"px-6","py-4","border-b","border-gray-200","bg-gradient-to-r","from-blue-50","to-white"],[1,"flex","items-center","space-x-3"],[1,"p-2","bg-blue-100","rounded-lg"],[1,"w-5","h-5","text-blue-600",3,"img"],[1,"text-lg","font-semibold","text-gray-900"],[1,"text-sm","text-gray-600","mt-1"],[1,"flex","gap-2"],[1,"px-3","py-2","text-sm","bg-blue-100","text-blue-700","rounded-lg","hover:bg-blue-200","flex","items-center","gap-2"],["class","text-center py-12",4,"ngIf"],["class","overflow-x-auto","style","max-height: 500px; overflow-y: auto;",4,"ngIf"],[1,"bg-blue-50","border","border-blue-200","rounded-lg","p-4"],[1,"flex","items-start","gap-3"],[1,"p-2","bg-blue-100","rounded-lg","flex-shrink-0"],[1,"font-medium","text-blue-900","mb-1"],[1,"text-sm","text-blue-700","space-y-1"],["class","fixed inset-0 z-50 overflow-y-auto",3,"click",4,"ngIf"],["class","fixed inset-0 z-50 overflow-hidden",3,"click",4,"ngIf"],[3,"dismiss","roleChanged","isOpen","suggestedRole","pageName"],[1,"px-3","py-2","text-sm","bg-gray-100","text-gray-700","rounded-lg","hover:bg-gray-200","flex","items-center","gap-2",3,"click"],[1,"text-center","py-12"],[1,"w-16","h-16","text-gray-300","mx-auto","mb-4",3,"img"],[1,"text-lg","font-medium","text-gray-900","mb-2"],[1,"text-gray-600"],[1,"overflow-x-auto",2,"max-height","500px","overflow-y","auto"],[1,"w-full","min-w-[1200px]"],[1,"bg-gray-50","sticky","top-0"],[1,"px-6","py-3","text-left","text-xs","font-medium","text-gray-500","uppercase","tracking-wider"],[1,"px-6","py-3","text-center","text-xs","font-medium","text-gray-500","uppercase","tracking-wider"],[1,"px-6","py-3","text-right","text-xs","font-medium","text-gray-500","uppercase","tracking-wider"],[1,"bg-white","divide-y","divide-gray-200"],["class","hover:bg-blue-50/50 cursor-pointer transition-all","title","Doble clic para ver detalles",3,"dblclick",4,"ngFor","ngForOf"],["title","Doble clic para ver detalles",1,"hover:bg-blue-50/50","cursor-pointer","transition-all",3,"dblclick"],[1,"px-6","py-4","whitespace-nowrap"],[1,"flex","items-center","space-x-2"],[1,"w-4","h-4","text-blue-600",3,"img"],[1,"font-medium","text-gray-900"],[1,"px-6","py-4"],[1,"max-w-xs"],[1,"text-sm","text-gray-900"],[1,"text-xs","text-gray-600","mt-1"],[1,"px-2","inline-flex","text-xs","leading-5","font-semibold","rounded-full"],[1,"text-sm","text-gray-900","max-w-md"],[1,"px-6","py-4","whitespace-nowrap","text-center"],[1,"px-6","py-4","whitespace-nowrap","text-right","text-sm","font-medium"],["title","M\xe1s acciones",1,"p-2","text-gray-400","hover:text-gray-600","rounded-full","hover:bg-gray-100","transition-colors",3,"click"],[1,"w-5","h-5",3,"img"],["class","absolute right-0 top-full mt-1 w-48 bg-white rounded-lg shadow-lg border border-gray-200 z-50",3,"click",4,"ngIf"],[1,"absolute","right-0","top-full","mt-1","w-48","bg-white","rounded-lg","shadow-lg","border","border-gray-200","z-50",3,"click"],[1,"py-2"],[1,"px-4","py-2","text-sm","font-medium","text-gray-700","border-b","border-gray-100"],[1,"w-full","px-4","py-2","text-left","text-sm","text-gray-700","hover:bg-gray-50","flex","items-center","gap-3",3,"click"],[1,"w-4","h-4","text-gray-500",3,"img"],[1,"border-t","border-gray-100","mt-1","pt-1"],[1,"w-full","px-4","py-2","text-left","text-sm","hover:bg-gray-50","flex","items-center","gap-3",3,"click"],[1,"fixed","inset-0","z-50","overflow-y-auto",3,"click"],[1,"flex","items-center","justify-center","min-h-screen","pt-4","px-4","pb-20","text-center","sm:block","sm:p-0"],[1,"fixed","inset-0","bg-gray-500","bg-opacity-75","transition-opacity"],[1,"inline-block","align-bottom","bg-white","rounded-lg","text-left","overflow-hidden","shadow-xl","transform","transition-all","sm:my-8","sm:align-middle","sm:max-w-2xl","sm:w-full",3,"click"],[1,"bg-blue-600","px-6","py-4","text-white"],[1,"text-lg","leading-6","font-medium"],[1,"text-blue-100","text-sm","mt-1"],[1,"p-2","hover:bg-white/20","rounded-lg","transition-colors",3,"click"],[1,"px-6","py-4","space-y-4"],[1,"block","text-sm","font-medium","text-gray-700","mb-2"],["type","text","placeholder","Ej: Warfarina + Antiagregantes",1,"w-full","px-3","py-2","border","border-gray-300","rounded-lg","focus:ring-2","focus:ring-blue-500","focus:border-transparent",3,"ngModelChange","ngModel"],[1,"grid","grid-cols-2","gap-4"],["type","text","placeholder","Ej: Warfarina",1,"w-full","px-3","py-2","border","border-gray-300","rounded-lg","focus:ring-2","focus:ring-blue-500","focus:border-transparent",3,"ngModelChange","ngModel"],["type","text","placeholder","Ej: \xc1cido acetilsalic\xedlico",1,"w-full","px-3","py-2","border","border-gray-300","rounded-lg","focus:ring-2","focus:ring-blue-500","focus:border-transparent",3,"ngModelChange","ngModel"],[1,"w-full","px-3","py-2","border","border-gray-300","rounded-lg","focus:ring-2","focus:ring-blue-500","focus:border-transparent",3,"ngModelChange","ngModel"],["rows","2","placeholder","Describe el mecanismo de la interacci\xf3n...",1,"w-full","px-3","py-2","border","border-gray-300","rounded-lg","focus:ring-2","focus:ring-blue-500","focus:border-transparent",3,"ngModelChange","ngModel"],["rows","2","placeholder","Describe el efecto cl\xednico esperado...",1,"w-full","px-3","py-2","border","border-gray-300","rounded-lg","focus:ring-2","focus:ring-blue-500","focus:border-transparent",3,"ngModelChange","ngModel"],["rows","3","placeholder","Proporciona la recomendaci\xf3n cl\xednica...",1,"w-full","px-3","py-2","border","border-gray-300","rounded-lg","focus:ring-2","focus:ring-blue-500","focus:border-transparent",3,"ngModelChange","ngModel"],["type","text","placeholder","Ej: FDA, Micromedx, Lexicomp",1,"w-full","px-3","py-2","border","border-gray-300","rounded-lg","focus:ring-2","focus:ring-blue-500","focus:border-transparent",3,"ngModelChange","ngModel"],[1,"bg-gray-50","px-6","py-4","flex","gap-3"],[1,"flex-1","bg-gray-600","hover:bg-gray-700","text-white","font-medium","py-3","px-4","rounded-lg","transition-colors",3,"click"],[1,"flex-1","bg-blue-600","hover:bg-blue-700","disabled:bg-gray-300","disabled:cursor-not-allowed","text-white","font-medium","py-3","px-4","rounded-lg","transition-colors","flex","items-center","justify-center","gap-2",3,"click","disabled"],[1,"fixed","inset-0","z-50","overflow-hidden",3,"click"],[1,"absolute","inset-0","bg-black","bg-opacity-50"],[1,"absolute","right-0","top-0","h-full","w-full","max-w-2xl","bg-white","shadow-xl","transform","transition-transform","duration-300","ease-in-out","flex","flex-col",3,"click"],[1,"bg-gradient-to-r","from-blue-600","to-blue-700","px-6","py-4","text-white","flex-shrink-0"],[1,"flex","items-center","gap-2"],[1,"text-lg","font-semibold"],[1,"flex-1","overflow-y-auto"],[1,"p-6","space-y-6"],[1,"bg-gray-50","rounded-lg","p-4"],[1,"w-4","h-4","text-gray-600",3,"img"],[1,"text-sm","font-medium","text-gray-700"],[1,"px-3","py-1","text-xs","font-semibold","rounded-full"],[1,"flex","items-center","gap-2","mb-3"],[1,"w-5","h-5","text-gray-600",3,"img"],[1,"bg-gray-50","rounded-lg","p-4","space-y-3"],[1,"text-sm","text-gray-600"],[1,"font-semibold","text-gray-900"],[1,"inline-flex","px-2","py-1","text-xs","font-semibold","rounded-full"],[1,"space-y-3"],[1,"font-medium","text-gray-900","mb-2"],[1,"bg-yellow-50","border","border-yellow-200","rounded-lg","p-4"],[1,"text-yellow-800","text-sm"],[1,"bg-red-50","border","border-red-200","rounded-lg","p-4"],[1,"text-red-800","text-sm"],[1,"text-blue-800","text-sm"],[1,"text-gray-700","text-sm"],[1,"border-t","border-gray-200","px-6","py-4","bg-gray-50","flex-shrink-0"],[1,"flex","gap-3"],[1,"flex-1","bg-blue-600","hover:bg-blue-700","text-white","font-medium","py-3","px-4","rounded-lg","transition-colors","flex","items-center","justify-center","gap-2",3,"click"]],template:function(r,i){1&r&&(e.j41(0,"div",0),e.bIt("click",function(){return i.cerrarModalAcciones()}),e.nrm(1,"app-breadcrumbs",1),e.j41(2,"app-page-header",2)(3,"div",3)(4,"div",4)(5,"p",5),e.EFF(6,"Reglas activas"),e.k0s(),e.j41(7,"p",6),e.EFF(8),e.k0s()()()(),e.j41(9,"div",7)(10,"div",8)(11,"div",9)(12,"div")(13,"p",10),e.EFF(14,"Total reglas"),e.k0s(),e.j41(15,"p",11),e.EFF(16),e.k0s()(),e.j41(17,"div",12),e.nrm(18,"lucide-icon",13),e.k0s()()(),e.j41(19,"div",14)(20,"div",9)(21,"div")(22,"p",10),e.EFF(23,"Activas"),e.k0s(),e.j41(24,"p",11),e.EFF(25),e.k0s()(),e.j41(26,"div",15),e.nrm(27,"lucide-icon",16),e.k0s()()(),e.j41(28,"div",17)(29,"div",9)(30,"div")(31,"p",10),e.EFF(32,"Cr\xedticas"),e.k0s(),e.j41(33,"p",11),e.EFF(34),e.k0s()(),e.j41(35,"div",18),e.nrm(36,"lucide-icon",19),e.k0s()()(),e.j41(37,"div",20)(38,"div",9)(39,"div")(40,"p",10),e.EFF(41,"Inactivas"),e.k0s(),e.j41(42,"p",11),e.EFF(43),e.k0s()(),e.j41(44,"div",21),e.nrm(45,"lucide-icon",22),e.k0s()()()(),e.j41(46,"div",23)(47,"div",24)(48,"div",25),e.nrm(49,"lucide-icon",26),e.j41(50,"input",27),e.mxI("ngModelChange",function(m){return e.DH7(i.terminoBusqueda,m)||(i.terminoBusqueda=m),m}),e.bIt("input",function(){return i.filtrarReglas()}),e.k0s()(),e.j41(51,"select",28),e.mxI("ngModelChange",function(m){return e.DH7(i.filtroSeveridad,m)||(i.filtroSeveridad=m),m}),e.bIt("change",function(){return i.filtrarReglas()}),e.j41(52,"option",29),e.EFF(53,"Todas las severidades"),e.k0s(),e.j41(54,"option",30),e.EFF(55,"Cr\xedticas"),e.k0s(),e.j41(56,"option",31),e.EFF(57,"Altas"),e.k0s(),e.j41(58,"option",32),e.EFF(59,"Medias"),e.k0s(),e.j41(60,"option",33),e.EFF(61,"Bajas"),e.k0s()(),e.j41(62,"select",28),e.mxI("ngModelChange",function(m){return e.DH7(i.filtroEstado,m)||(i.filtroEstado=m),m}),e.bIt("change",function(){return i.filtrarReglas()}),e.j41(63,"option",29),e.EFF(64,"Todos los estados"),e.k0s(),e.j41(65,"option",34),e.EFF(66,"Activas"),e.k0s(),e.j41(67,"option",35),e.EFF(68,"Inactivas"),e.k0s()(),e.j41(69,"select",28),e.mxI("ngModelChange",function(m){return e.DH7(i.filtroEvidencia,m)||(i.filtroEvidencia=m),m}),e.bIt("change",function(){return i.filtrarReglas()}),e.j41(70,"option",29),e.EFF(71,"Todos los niveles"),e.k0s(),e.j41(72,"option",36),e.EFF(73,"Evidencia A"),e.k0s(),e.j41(74,"option",37),e.EFF(75,"Evidencia B"),e.k0s(),e.j41(76,"option",38),e.EFF(77,"Evidencia C"),e.k0s()()(),e.j41(78,"div",39),e.DNE(79,C,4,1,"div",40),e.j41(80,"button",41),e.bIt("click",function(){return i.abrirModalNuevaRegla()}),e.nrm(81,"lucide-icon",42),e.EFF(82," Nueva regla "),e.k0s()()(),e.j41(83,"div",43)(84,"div",44)(85,"div",9)(86,"div",45)(87,"div",46),e.nrm(88,"lucide-icon",47),e.k0s(),e.j41(89,"div")(90,"h3",48),e.EFF(91,"Reglas de Interacciones"),e.k0s(),e.j41(92,"p",49),e.EFF(93),e.k0s()()(),e.j41(94,"div",50)(95,"button",51),e.nrm(96,"lucide-icon",42),e.EFF(97," Exportar "),e.k0s()()()(),e.DNE(98,d,6,1,"div",52)(99,l,22,1,"div",53),e.k0s(),e.j41(100,"div",54)(101,"div",55)(102,"div",56),e.nrm(103,"lucide-icon",47),e.k0s(),e.j41(104,"div")(105,"h4",57),e.EFF(106,"Gesti\xf3n de Reglas de Interacciones"),e.k0s(),e.j41(107,"ul",58)(108,"li"),e.EFF(109,"\u2022 Las reglas definen qu\xe9 combinaciones de medicamentos generan alertas autom\xe1ticas"),e.k0s(),e.j41(110,"li"),e.EFF(111,"\u2022 "),e.j41(112,"strong"),e.EFF(113,"Nivel A:"),e.k0s(),e.EFF(114," Evidencia s\xf3lida de estudios controlados"),e.k0s(),e.j41(115,"li"),e.EFF(116,"\u2022 "),e.j41(117,"strong"),e.EFF(118,"Nivel B:"),e.k0s(),e.EFF(119," Evidencia de estudios observacionales"),e.k0s(),e.j41(120,"li"),e.EFF(121,"\u2022 "),e.j41(122,"strong"),e.EFF(123,"Nivel C:"),e.k0s(),e.EFF(124," Opini\xf3n de expertos o reportes de casos"),e.k0s()()()()()(),e.DNE(125,_,76,12,"div",59)(126,p,72,12,"div",59)(127,v,97,24,"div",60),e.j41(128,"app-role-suggestion-modal",61),e.bIt("dismiss",function(){return i.onRoleSuggestionDismiss()})("roleChanged",function(){return i.onRoleChanged()}),e.k0s()),2&r&&(e.R7$(),e.Y8G("items",i.breadcrumbItems),e.R7$(),e.Y8G("icon",i.settingsIcon)("actionButton",!0),e.R7$(6),e.JRh(i.stats.active),e.R7$(8),e.JRh(i.stats.total),e.R7$(2),e.Y8G("img",i.settingsIcon),e.R7$(7),e.JRh(i.stats.active),e.R7$(2),e.Y8G("img",i.checkCircle2Icon),e.R7$(7),e.JRh(i.stats.critical),e.R7$(2),e.Y8G("img",i.shieldAlertIcon),e.R7$(7),e.JRh(i.stats.inactive),e.R7$(2),e.Y8G("img",i.xCircleIcon),e.R7$(4),e.Y8G("img",i.searchIcon),e.R7$(),e.R50("ngModel",i.terminoBusqueda),e.R7$(),e.R50("ngModel",i.filtroSeveridad),e.R7$(11),e.R50("ngModel",i.filtroEstado),e.R7$(7),e.R50("ngModel",i.filtroEvidencia),e.R7$(10),e.Y8G("ngIf",i.hayFiltrosActivos()),e.R7$(2),e.Y8G("img",i.plusIcon),e.R7$(7),e.Y8G("img",i.settingsIcon),e.R7$(5),e.E5c(" ",i.reglasFiltradas.length," regla",1!==i.reglasFiltradas.length?"s":""," encontrada",1!==i.reglasFiltradas.length?"s":""," \u2022 Doble clic para ver detalles "),e.R7$(3),e.Y8G("img",i.downloadIcon),e.R7$(2),e.Y8G("ngIf",0===i.reglasFiltradas.length),e.R7$(),e.Y8G("ngIf",i.reglasFiltradas.length>0),e.R7$(4),e.Y8G("img",i.infoIcon),e.R7$(22),e.Y8G("ngIf",i.modalNuevaReglaAbierto),e.R7$(),e.Y8G("ngIf",i.modalEditarReglaAbierto),e.R7$(),e.Y8G("ngIf",i.reglaSeleccionada),e.R7$(),e.Y8G("isOpen",i.showRoleSuggestionModal())("suggestedRole","M\xe9dico")("pageName","alertas-reglas"))},dependencies:[h.MD,h.Sq,h.bT,n.YN,n.xH,n.y7,n.me,n.wz,n.BC,n.vS,o.flO,o.WGl,E.m,x.y,F.t],encapsulation:2})}}return s})()}}]);