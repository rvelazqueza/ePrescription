"use strict";(self.webpackChunkeprescription_angular=self.webpackChunkeprescription_angular||[]).push([[7079],{7079:(k,c,o)=>{o.r(c),o.d(c,{FirmarRecetaComponent:()=>b});var l=o(177),d=o(4341),u=o(8961),p=o(8516),e=o(4438);function m(r,s){1&r&&(e.j41(0,"div",35),e.qSk(),e.j41(1,"svg",36),e.nrm(2,"path",15),e.k0s(),e.joV(),e.j41(3,"h3",37),e.EFF(4,"No hay recetas pendientes"),e.k0s(),e.j41(5,"p",7),e.EFF(6,"Todas las recetas han sido firmadas"),e.k0s()())}function g(r,s){if(1&r){const t=e.RV6();e.j41(0,"tr")(1,"td",45),e.EFF(2),e.k0s(),e.j41(3,"td",46),e.EFF(4),e.k0s(),e.j41(5,"td",46),e.EFF(6),e.k0s(),e.j41(7,"td",46)(8,"div")(9,"p"),e.EFF(10),e.k0s(),e.j41(11,"p",47),e.EFF(12),e.k0s()()(),e.j41(13,"td",48)(14,"span",49),e.EFF(15),e.k0s()(),e.j41(16,"td",50),e.EFF(17),e.k0s(),e.j41(18,"td",51)(19,"button",52),e.bIt("click",function(){const i=e.eBV(t).$implicit,a=e.XpG(2);return e.Njj(a.openSignDialog(i))}),e.qSk(),e.j41(20,"svg",53),e.nrm(21,"path",54),e.k0s(),e.EFF(22," Firmar "),e.k0s()()()}if(2&r){const t=s.$implicit;e.R7$(2),e.JRh(t.id),e.R7$(2),e.JRh(t.patientName),e.R7$(2),e.JRh(t.doctorName),e.R7$(4),e.JRh(t.createdDate),e.R7$(2),e.JRh(t.createdTime),e.R7$(3),e.Lme(" ",t.medicinesCount," medicamento",1!==t.medicinesCount?"s":""," "),e.R7$(2),e.JRh(t.diagnosis)}}function f(r,s){if(1&r&&(e.j41(0,"div",38)(1,"table",39)(2,"thead",40)(3,"tr")(4,"th",41),e.EFF(5,"ID Receta"),e.k0s(),e.j41(6,"th",41),e.EFF(7,"Paciente"),e.k0s(),e.j41(8,"th",41),e.EFF(9,"M\xe9dico"),e.k0s(),e.j41(10,"th",41),e.EFF(11,"Fecha/Hora"),e.k0s(),e.j41(12,"th",41),e.EFF(13,"Medicamentos"),e.k0s(),e.j41(14,"th",41),e.EFF(15,"Diagn\xf3stico"),e.k0s(),e.j41(16,"th",42),e.EFF(17,"Acciones"),e.k0s()()(),e.j41(18,"tbody",43),e.DNE(19,g,23,8,"tr",44),e.k0s()()()),2&r){const t=e.XpG();e.R7$(19),e.Y8G("ngForOf",t.prescriptions)}}function h(r,s){if(1&r&&(e.j41(0,"li"),e.EFF(1),e.k0s()),2&r){const t=s.$implicit;e.R7$(),e.JRh(t)}}function F(r,s){if(1&r){const t=e.RV6();e.j41(0,"div",55)(1,"div",56)(2,"div",57)(3,"div",58),e.qSk(),e.j41(4,"svg",59),e.nrm(5,"path",54),e.k0s(),e.joV(),e.j41(6,"h3",60),e.EFF(7,"Firmar Receta Digitalmente"),e.k0s()(),e.j41(8,"p",61),e.EFF(9),e.k0s(),e.j41(10,"div",1)(11,"div",62)(12,"h4",63),e.EFF(13,"Detalles de la receta"),e.k0s(),e.j41(14,"div",64)(15,"div")(16,"label",47),e.EFF(17,"Paciente"),e.k0s(),e.j41(18,"p",65),e.EFF(19),e.k0s()(),e.j41(20,"div")(21,"label",47),e.EFF(22,"M\xe9dico"),e.k0s(),e.j41(23,"p",65),e.EFF(24),e.k0s()(),e.j41(25,"div",66)(26,"label",47),e.EFF(27,"Medicamentos"),e.k0s(),e.j41(28,"ul",67),e.DNE(29,h,2,1,"li",44),e.k0s()()()(),e.j41(30,"div")(31,"label",68),e.EFF(32,"PIN de seguridad *"),e.k0s(),e.j41(33,"input",69),e.mxI("ngModelChange",function(i){e.eBV(t);const a=e.XpG();return e.DH7(a.pin,i)||(a.pin=i),e.Njj(i)}),e.k0s()(),e.j41(34,"div")(35,"label",68),e.EFF(36,"Contrase\xf1a del certificado digital *"),e.k0s(),e.j41(37,"input",70),e.mxI("ngModelChange",function(i){e.eBV(t);const a=e.XpG();return e.DH7(a.certificatePassword,i)||(a.certificatePassword=i),e.Njj(i)}),e.k0s()(),e.j41(38,"div",71)(39,"div",32),e.qSk(),e.j41(40,"svg",28),e.nrm(41,"path",19),e.k0s(),e.joV(),e.j41(42,"div",72)(43,"p",73),e.EFF(44,"Tu certificado digital"),e.k0s(),e.j41(45,"p",74),e.EFF(46,"CERT-DR-MARTINEZ-2024"),e.k0s(),e.j41(47,"p",75),e.EFF(48,"V\xe1lido hasta: 31/12/2025"),e.k0s()()()()(),e.j41(49,"div",76)(50,"button",77),e.bIt("click",function(){e.eBV(t);const i=e.XpG();return e.Njj(i.closeSignDialog())}),e.EFF(51," Cancelar "),e.k0s(),e.j41(52,"button",78),e.bIt("click",function(){e.eBV(t);const i=e.XpG();return e.Njj(i.handleSign())}),e.qSk(),e.j41(53,"svg",53),e.nrm(54,"path",54),e.k0s(),e.EFF(55," Firmar digitalmente "),e.k0s()()()()()}if(2&r){const t=e.XpG();e.R7$(9),e.Lme(" Receta ",null==t.selectedPrescription?null:t.selectedPrescription.id," para ",null==t.selectedPrescription?null:t.selectedPrescription.patientName," "),e.R7$(10),e.JRh(null==t.selectedPrescription?null:t.selectedPrescription.patientName),e.R7$(5),e.JRh(null==t.selectedPrescription?null:t.selectedPrescription.doctorName),e.R7$(5),e.Y8G("ngForOf",null==t.selectedPrescription?null:t.selectedPrescription.medicines),e.R7$(4),e.R50("ngModel",t.pin),e.R7$(4),e.R50("ngModel",t.certificatePassword)}}let b=(()=>{class r{constructor(){this.penToolIcon=p.uxA,this.breadcrumbItems=[{label:"Firma y verificaci\xf3n",route:"/firma"},{label:"Firmar recetas"}],this.prescriptions=[{id:"RX-2024-0198",patientId:"PAT-0012",patientName:"Mar\xeda Gonz\xe1lez",doctorId:"DOC-003",doctorName:"Dra. Isabel Moreno",createdDate:"2024-10-01",createdTime:"14:35",medicinesCount:3,medicines:["Paracetamol 500mg","Ibuprofeno 400mg","Omeprazol 20mg"],status:"pending_signature",diagnosis:"Gastritis aguda con cefalea tensional"},{id:"RX-2024-0199",patientId:"PAT-0045",patientName:"Carlos Ram\xedrez",doctorId:"DOC-001",doctorName:"Dr. Carlos Mart\xednez",createdDate:"2024-10-01",createdTime:"15:12",medicinesCount:2,medicines:["Losart\xe1n 50mg","Atorvastatina 20mg"],status:"pending_signature",diagnosis:"Hipertensi\xf3n arterial esencial"},{id:"RX-2024-0200",patientId:"PAT-0089",patientName:"Ana Herrera",doctorId:"DOC-005",doctorName:"Dr. Miguel Ruiz",createdDate:"2024-10-01",createdTime:"15:45",medicinesCount:1,medicines:["Paracetamol 500mg"],status:"pending_signature",diagnosis:"Dolor lumbar agudo"}],this.selectedPrescription=null,this.isSignDialogOpen=!1,this.pin="",this.certificatePassword=""}get stats(){return{pendingSignatures:this.prescriptions.length,signedToday:12,certificateValidDays:365}}openSignDialog(t){this.selectedPrescription=t,this.isSignDialogOpen=!0}closeSignDialog(){this.isSignDialogOpen=!1,this.selectedPrescription=null,this.pin="",this.certificatePassword=""}handleSign(){this.pin&&this.certificatePassword?this.selectedPrescription&&(alert(`Receta ${this.selectedPrescription.id} firmada digitalmente. QR generado.`),this.prescriptions=this.prescriptions.filter(t=>t.id!==this.selectedPrescription?.id),this.closeSignDialog()):alert("Debes ingresar el PIN y la contrase\xf1a del certificado")}static{this.\u0275fac=function(n){return new(n||r)}}static{this.\u0275cmp=e.VBU({type:r,selectors:[["app-firmar-receta"]],standalone:!0,features:[e.aNF],decls:68,vars:8,consts:[["title","Firma Digital de Recetas","description","Firma electr\xf3nica avanzada con certificado digital","headerGradient","from-blue-600 via-indigo-500 to-purple-600",3,"icon","breadcrumbItems"],[1,"space-y-6"],[1,"grid","grid-cols-1","md:grid-cols-3","gap-4"],[1,"bg-white","rounded-lg","shadow-lg","hover:shadow-xl","transition-all","cursor-pointer","border-l-4","border-l-blue-500"],[1,"p-6"],[1,"flex","items-center","justify-between"],[1,"space-y-1","flex-1"],[1,"text-sm","text-gray-600"],[1,"text-3xl","font-bold","text-gray-900"],[1,"p-3","bg-blue-100","rounded-xl"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-8","h-8","text-blue-600"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"],[1,"bg-white","rounded-lg","shadow-lg","hover:shadow-xl","transition-all","cursor-pointer","border-l-4","border-l-green-500"],[1,"p-3","bg-green-100","rounded-xl"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-8","h-8","text-green-600"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"],[1,"bg-white","rounded-lg","shadow-lg","hover:shadow-xl","transition-all","cursor-pointer","border-l-4","border-l-purple-500"],[1,"p-3","bg-purple-100","rounded-xl"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-8","h-8","text-purple-600"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M20.618 5.984A11.955 11.955 0 0112 2.944a11.955 11.955 0 01-8.618 3.04A12.02 12.02 0 003 9c0 5.591 3.824 10.29 9 11.622 5.176-1.332 9-6.03 9-11.622 0-1.042-.133-2.052-.382-3.016z"],[1,"bg-white","rounded-lg","shadow-sm","border","border-gray-200"],[1,"px-6","py-4","border-b","border-gray-200"],[1,"text-lg","font-semibold","text-gray-900"],["class","text-center py-12",4,"ngIf"],["class","overflow-x-auto",4,"ngIf"],[1,"bg-blue-50","border","border-blue-200","rounded-lg"],[1,"p-4"],[1,"flex","items-start","gap-3"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-5","h-5","text-blue-600","flex-shrink-0","mt-0.5"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"],[1,"font-medium","text-blue-900","mb-1"],[1,"space-y-1","text-sm","text-blue-700"],[1,"flex","items-start","gap-2"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-4","h-4","mt-0.5","flex-shrink-0"],["class","fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50",4,"ngIf"],[1,"text-center","py-12"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-12","h-12","text-green-400","mx-auto","mb-4"],[1,"font-medium","mb-2"],[1,"overflow-x-auto"],[1,"min-w-full","divide-y","divide-gray-200"],[1,"bg-gray-50"],[1,"px-6","py-3","text-left","text-xs","font-medium","text-gray-500","uppercase","tracking-wider"],[1,"px-6","py-3","text-right","text-xs","font-medium","text-gray-500","uppercase","tracking-wider"],[1,"bg-white","divide-y","divide-gray-200"],[4,"ngFor","ngForOf"],[1,"px-6","py-4","whitespace-nowrap","text-sm","font-mono"],[1,"px-6","py-4","whitespace-nowrap","text-sm","text-gray-900"],[1,"text-gray-600"],[1,"px-6","py-4","whitespace-nowrap"],[1,"inline-flex","items-center","px-2.5","py-0.5","rounded-full","text-xs","font-medium","bg-blue-100","text-blue-800","border","border-blue-300"],[1,"px-6","py-4","text-sm","text-gray-900","max-w-xs","truncate"],[1,"px-6","py-4","whitespace-nowrap","text-right","text-sm","font-medium"],[1,"inline-flex","items-center","px-3","py-2","border","border-transparent","text-sm","leading-4","font-medium","rounded-md","text-white","bg-blue-600","hover:bg-blue-700","focus:outline-none","focus:ring-2","focus:ring-offset-2","focus:ring-blue-500",3,"click"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-4","h-4","mr-2"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M9 12l2 2 4-4m5.618-4.016A11.955 11.955 0 0112 2.944a11.955 11.955 0 01-8.618 3.04A12.02 12.02 0 003 9c0 5.591 3.824 10.29 9 11.622 5.176-1.332 9-6.03 9-11.622 0-1.042-.133-2.052-.382-3.016z"],[1,"fixed","inset-0","bg-gray-600","bg-opacity-50","overflow-y-auto","h-full","w-full","z-50"],[1,"relative","top-20","mx-auto","p-5","border","w-11/12","md:w-3/4","lg:w-1/2","shadow-lg","rounded-md","bg-white"],[1,"mt-3"],[1,"flex","items-center","gap-2","mb-4"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-5","h-5","text-blue-600"],[1,"text-lg","font-medium","text-gray-900"],[1,"text-sm","text-gray-600","mb-6"],[1,"bg-gray-50","border","rounded-lg","p-4"],[1,"font-medium","mb-3"],[1,"grid","grid-cols-2","gap-4","text-sm"],[1,"mt-1"],[1,"col-span-2"],[1,"mt-1","list-disc","list-inside"],[1,"block","text-sm","font-medium","text-gray-700"],["type","password","placeholder","Ingresa tu PIN de 6 d\xedgitos","maxlength","6",1,"mt-2","block","w-full","px-3","py-2","border","border-gray-300","rounded-md","shadow-sm","focus:outline-none","focus:ring-blue-500","focus:border-blue-500",3,"ngModelChange","ngModel"],["type","password","placeholder","Contrase\xf1a de tu certificado",1,"mt-2","block","w-full","px-3","py-2","border","border-gray-300","rounded-md","shadow-sm","focus:outline-none","focus:ring-blue-500","focus:border-blue-500",3,"ngModelChange","ngModel"],[1,"bg-blue-50","border","border-blue-200","rounded-lg","p-3"],[1,"text-sm","text-blue-900"],[1,"font-medium","mb-1"],[1,"text-blue-700"],[1,"text-blue-700","text-xs","mt-1"],[1,"flex","justify-end","gap-3","mt-6"],[1,"px-4","py-2","text-sm","font-medium","text-gray-700","bg-white","border","border-gray-300","rounded-md","hover:bg-gray-50","focus:outline-none","focus:ring-2","focus:ring-offset-2","focus:ring-blue-500",3,"click"],[1,"inline-flex","items-center","px-4","py-2","text-sm","font-medium","text-white","bg-blue-600","border","border-transparent","rounded-md","hover:bg-blue-700","focus:outline-none","focus:ring-2","focus:ring-offset-2","focus:ring-blue-500",3,"click"]],template:function(n,i){1&n&&(e.j41(0,"app-page-layout",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5)(6,"div",6)(7,"p",7),e.EFF(8,"Pendientes de firma"),e.k0s(),e.j41(9,"p",8),e.EFF(10),e.k0s()(),e.j41(11,"div",9),e.qSk(),e.j41(12,"svg",10),e.nrm(13,"path",11),e.k0s()()()()(),e.joV(),e.j41(14,"div",12)(15,"div",4)(16,"div",5)(17,"div",6)(18,"p",7),e.EFF(19,"Firmadas hoy"),e.k0s(),e.j41(20,"p",8),e.EFF(21),e.k0s()(),e.j41(22,"div",13),e.qSk(),e.j41(23,"svg",14),e.nrm(24,"path",15),e.k0s()()()()(),e.joV(),e.j41(25,"div",16)(26,"div",4)(27,"div",5)(28,"div",6)(29,"p",7),e.EFF(30,"Certificado v\xe1lido"),e.k0s(),e.j41(31,"p",8),e.EFF(32),e.k0s()(),e.j41(33,"div",17),e.qSk(),e.j41(34,"svg",18),e.nrm(35,"path",19),e.k0s()()()()()(),e.joV(),e.j41(36,"div",20)(37,"div",21)(38,"h2",22),e.EFF(39,"Recetas Pendientes de Firma"),e.k0s()(),e.j41(40,"div",4),e.DNE(41,m,7,0,"div",23)(42,f,20,1,"div",24),e.k0s()(),e.j41(43,"div",25)(44,"div",26)(45,"div",27),e.qSk(),e.j41(46,"svg",28),e.nrm(47,"path",29),e.k0s(),e.joV(),e.j41(48,"div")(49,"h4",30),e.EFF(50,"Firma Electr\xf3nica Avanzada"),e.k0s(),e.j41(51,"ul",31)(52,"li",32),e.qSk(),e.j41(53,"svg",33),e.nrm(54,"path",15),e.k0s(),e.joV(),e.j41(55,"span"),e.EFF(56,"Equivalencia legal con firma manuscrita seg\xfan normativas internacionales"),e.k0s()(),e.j41(57,"li",32),e.qSk(),e.j41(58,"svg",33),e.nrm(59,"path",15),e.k0s(),e.joV(),e.j41(60,"span"),e.EFF(61,"Certificado digital emitido por autoridad certificadora autorizada"),e.k0s()(),e.j41(62,"li",32),e.qSk(),e.j41(63,"svg",33),e.nrm(64,"path",15),e.k0s(),e.joV(),e.j41(65,"span"),e.EFF(66,"Genera c\xf3digo QR \xfanico y token de verificaci\xf3n para farmacia"),e.k0s()()()()()()(),e.DNE(67,F,56,7,"div",34),e.k0s()()),2&n&&(e.Y8G("icon",i.penToolIcon)("breadcrumbItems",i.breadcrumbItems),e.R7$(10),e.JRh(i.stats.pendingSignatures),e.R7$(11),e.JRh(i.stats.signedToday),e.R7$(11),e.SpI("",i.stats.certificateValidDays,"d"),e.R7$(9),e.Y8G("ngIf",0===i.prescriptions.length),e.R7$(),e.Y8G("ngIf",i.prescriptions.length>0),e.R7$(25),e.Y8G("ngIf",i.isSignDialogOpen))},dependencies:[l.MD,l.Sq,l.bT,d.YN,d.me,d.BC,d.tU,d.vS,u.J,p.flO],encapsulation:2})}}return r})()}}]);