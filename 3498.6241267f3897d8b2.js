"use strict";(self.webpackChunkeprescription_angular=self.webpackChunkeprescription_angular||[]).push([[3498],{8777:(E,b,d)=>{d.d(b,{m:()=>R});var e=d(177),_=d(6283),m=d(8516),o=d(4438);function a(c,u){if(1&c&&o.nrm(0,"lucide-icon",4),2&c){const l=o.XpG(2).$implicit;o.Y8G("img",l.icon)}}function x(c,u){if(1&c&&(o.j41(0,"a",9),o.DNE(1,a,1,1,"lucide-icon",10),o.EFF(2),o.k0s()),2&c){const l=o.XpG().$implicit;o.Y8G("routerLink",l.route),o.R7$(),o.Y8G("ngIf",l.icon),o.R7$(),o.SpI(" ",l.label," ")}}function F(c,u){if(1&c&&o.nrm(0,"lucide-icon",4),2&c){const l=o.XpG(2).$implicit;o.Y8G("img",l.icon)}}function f(c,u){if(1&c&&(o.j41(0,"span",11),o.DNE(1,F,1,1,"lucide-icon",10),o.EFF(2),o.k0s()),2&c){const l=o.XpG(),g=l.$implicit;o.BMQ("aria-current",l.last?"page":null),o.R7$(),o.Y8G("ngIf",g.icon),o.R7$(),o.SpI(" ",g.label," ")}}function v(c,u){if(1&c&&(o.j41(0,"li",2),o.nrm(1,"lucide-icon",6),o.DNE(2,x,3,3,"a",7)(3,f,3,3,"span",8),o.k0s()),2&c){const l=u.$implicit,g=u.last,p=o.XpG();o.R7$(),o.Y8G("img",p.chevronRightIcon),o.R7$(),o.Y8G("ngIf",l.route&&!g),o.R7$(),o.Y8G("ngIf",!l.route||g)}}let R=(()=>{class c{constructor(){this.items=[],this.homeIcon=m.ww0,this.chevronRightIcon=m.c_$}static{this.\u0275fac=function(g){return new(g||c)}}static{this.\u0275cmp=o.VBU({type:c,selectors:[["app-breadcrumbs"]],inputs:{items:"items"},standalone:!0,features:[o.aNF],decls:7,vars:2,consts:[["aria-label","Breadcrumb",1,"fixed","left-64","right-0","z-30","bg-gray-50","border-b","border-gray-200","px-6","py-3",2,"top","93px"],[1,"inline-flex","items-center","space-x-1","md:space-x-3"],[1,"inline-flex","items-center"],["routerLink","/dashboard",1,"inline-flex","items-center","text-sm","font-medium","text-gray-700","hover:text-blue-600","transition-colors"],["aria-hidden","true",1,"w-4","h-4","mr-2",3,"img"],["class","inline-flex items-center",4,"ngFor","ngForOf"],["aria-hidden","true",1,"w-4","h-4","text-gray-400","mx-1",3,"img"],["class","inline-flex items-center text-sm font-medium text-gray-700 hover:text-blue-600 transition-colors",3,"routerLink",4,"ngIf"],["class","inline-flex items-center text-sm font-medium text-gray-500",4,"ngIf"],[1,"inline-flex","items-center","text-sm","font-medium","text-gray-700","hover:text-blue-600","transition-colors",3,"routerLink"],["class","w-4 h-4 mr-2","aria-hidden","true",3,"img",4,"ngIf"],[1,"inline-flex","items-center","text-sm","font-medium","text-gray-500"]],template:function(g,p){1&g&&(o.j41(0,"nav",0)(1,"ol",1)(2,"li",2)(3,"a",3),o.nrm(4,"lucide-icon",4),o.EFF(5," Inicio "),o.k0s()(),o.DNE(6,v,4,3,"li",5),o.k0s()()),2&g&&(o.R7$(4),o.Y8G("img",p.homeIcon),o.R7$(2),o.Y8G("ngForOf",p.items))},dependencies:[e.MD,e.Sq,e.bT,_.iI,_.Wk,m.flO,m.WGl],encapsulation:2})}}return c})()},3498:(E,b,d)=>{d.r(b),d.d(b,{RechazosDispensacionComponent:()=>y});var e=d(4438),_=d(177),m=d(4341),o=d(8359),a=d(8516),x=d(8777),F=d(2193),f=d(1822),v=d(2957);function R(s,h){if(1&s){const t=e.RV6();e.j41(0,"div",1)(1,"div")(2,"h3",55),e.EFF(3,"1. Buscar receta a rechazar"),e.k0s(),e.j41(4,"p",56),e.EFF(5," Ingresa el n\xfamero de receta que deseas rechazar "),e.k0s()(),e.j41(6,"div",57)(7,"div",58)(8,"div",59),e.nrm(9,"lucide-icon",60),e.j41(10,"input",61),e.mxI("ngModelChange",function(i){e.eBV(t);const n=e.XpG();return e.DH7(n.quickSearchInput,i)||(n.quickSearchInput=i),e.Njj(i)}),e.k0s()(),e.j41(11,"button",62),e.bIt("click",function(){e.eBV(t);const i=e.XpG();return e.Njj(i.searchPrescription())}),e.EFF(12," Buscar "),e.k0s()()()()}if(2&s){const t=e.XpG();e.R7$(9),e.Y8G("img",t.searchIcon),e.R7$(),e.R50("ngModel",t.quickSearchInput)}}function c(s,h){if(1&s){const t=e.RV6();e.j41(0,"div",1)(1,"div")(2,"h3",63),e.EFF(3,"Filtros de b\xfasqueda"),e.k0s()(),e.j41(4,"div",64)(5,"div",65)(6,"div")(7,"label",66),e.EFF(8,"Categor\xeda"),e.k0s(),e.j41(9,"select",67),e.mxI("ngModelChange",function(i){e.eBV(t);const n=e.XpG();return e.DH7(n.categoryFilter,i)||(n.categoryFilter=i),e.Njj(i)}),e.j41(10,"option",68),e.EFF(11,"Todas las categor\xedas"),e.k0s(),e.j41(12,"option",69),e.EFF(13,"Farmac\xe9utico"),e.k0s(),e.j41(14,"option",70),e.EFF(15,"M\xe9dico"),e.k0s(),e.j41(16,"option",71),e.EFF(17,"Administrativo"),e.k0s(),e.j41(18,"option",72),e.EFF(19,"Paciente"),e.k0s()()(),e.j41(20,"div")(21,"label",66),e.EFF(22,"Buscar"),e.k0s(),e.j41(23,"div",73)(24,"input",74),e.mxI("ngModelChange",function(i){e.eBV(t);const n=e.XpG();return e.DH7(n.searchFilter,i)||(n.searchFilter=i),e.Njj(i)}),e.k0s()()(),e.j41(25,"div")(26,"label",66),e.EFF(27,"Desde"),e.k0s(),e.j41(28,"input",75),e.mxI("ngModelChange",function(i){e.eBV(t);const n=e.XpG();return e.DH7(n.dateFromFilter,i)||(n.dateFromFilter=i),e.Njj(i)}),e.k0s()(),e.j41(29,"div")(30,"label",66),e.EFF(31,"Hasta"),e.k0s(),e.j41(32,"input",75),e.mxI("ngModelChange",function(i){e.eBV(t);const n=e.XpG();return e.DH7(n.dateToFilter,i)||(n.dateToFilter=i),e.Njj(i)}),e.k0s()()(),e.j41(33,"div",58)(34,"button",76),e.bIt("click",function(){e.eBV(t);const i=e.XpG();return e.Njj(i.applyFilters())}),e.nrm(35,"lucide-icon",50),e.EFF(36," Aplicar filtros "),e.k0s(),e.j41(37,"button",77),e.bIt("click",function(){e.eBV(t);const i=e.XpG();return e.Njj(i.clearFilters())}),e.nrm(38,"lucide-icon",50),e.EFF(39," Limpiar "),e.k0s()()()()}if(2&s){const t=e.XpG();e.R7$(9),e.R50("ngModel",t.categoryFilter),e.R7$(15),e.R50("ngModel",t.searchFilter),e.R7$(4),e.R50("ngModel",t.dateFromFilter),e.R7$(4),e.R50("ngModel",t.dateToFilter),e.R7$(3),e.Y8G("img",t.filterIcon),e.R7$(3),e.Y8G("img",t.filterXIcon)}}function u(s,h){if(1&s){const t=e.RV6();e.j41(0,"tr",89),e.bIt("dblclick",function(){const i=e.eBV(t).$implicit,n=e.XpG(2);return e.Njj(n.viewRejectionDetails(i.id))}),e.j41(1,"td",90)(2,"div",91),e.nrm(3,"lucide-icon",92),e.j41(4,"div")(5,"p",93),e.EFF(6),e.k0s(),e.j41(7,"p",94),e.EFF(8),e.k0s()()()(),e.j41(9,"td",90)(10,"div")(11,"p",93),e.EFF(12),e.k0s(),e.j41(13,"p",94),e.EFF(14),e.k0s()()(),e.j41(15,"td",90)(16,"div")(17,"p",93),e.EFF(18),e.k0s(),e.j41(19,"p",94),e.EFF(20),e.k0s()()(),e.j41(21,"td",90)(22,"span",95),e.EFF(23),e.k0s()(),e.j41(24,"td",90)(25,"div")(26,"p",93),e.EFF(27),e.k0s(),e.j41(28,"p",94),e.EFF(29),e.k0s()()(),e.j41(30,"td",90)(31,"span",95),e.EFF(32),e.k0s()(),e.j41(33,"td",90)(34,"button",96),e.bIt("click",function(){const i=e.eBV(t).$implicit,n=e.XpG(2);return e.Njj(n.viewRejectionDetails(i.id))}),e.nrm(35,"lucide-icon",50),e.k0s()()()}if(2&s){const t=h.$implicit,r=e.XpG(2);e.R7$(3),e.Y8G("img",r.calendarIcon),e.R7$(3),e.JRh(t.date),e.R7$(2),e.JRh(t.time),e.R7$(4),e.JRh(t.prescriptionNumber),e.R7$(2),e.JRh(t.doctorName),e.R7$(4),e.JRh(t.patientName),e.R7$(2),e.JRh(t.patientId),e.R7$(2),e.Y8G("ngClass",r.getCategoryBadgeClass(t.category)),e.R7$(),e.SpI(" ",t.category," "),e.R7$(4),e.JRh(t.reason),e.R7$(2),e.JRh(t.reasonCode),e.R7$(2),e.Y8G("ngClass",r.getStatusBadgeClass(t.status)),e.R7$(),e.SpI(" ",t.status," "),e.R7$(3),e.Y8G("img",r.eyeIcon)}}function l(s,h){if(1&s){const t=e.RV6();e.j41(0,"button",48),e.bIt("click",function(){const i=e.eBV(t).$implicit,n=e.XpG(3);return e.Njj(n.goToPage(i))}),e.EFF(1),e.k0s()}if(2&s){const t=h.$implicit,r=e.XpG(3);e.HbH(t===r.currentPage?"px-3 py-2 text-sm font-medium text-white bg-red-600 border border-red-600 rounded-md":"px-3 py-2 text-sm font-medium text-gray-500 bg-white border border-gray-300 rounded-md hover:bg-gray-50"),e.R7$(),e.SpI(" ",t," ")}}function g(s,h){if(1&s){const t=e.RV6();e.j41(0,"div",97)(1,"div",5)(2,"div",98),e.EFF(3),e.k0s(),e.j41(4,"div",91)(5,"button",99),e.bIt("click",function(){e.eBV(t);const i=e.XpG(2);return e.Njj(i.previousPage())}),e.nrm(6,"lucide-icon",50),e.EFF(7," Anterior "),e.k0s(),e.j41(8,"div",100),e.DNE(9,l,2,3,"button",101),e.k0s(),e.j41(10,"button",99),e.bIt("click",function(){e.eBV(t);const i=e.XpG(2);return e.Njj(i.nextPage())}),e.EFF(11," Siguiente "),e.nrm(12,"lucide-icon",50),e.k0s()()()()}if(2&s){const t=e.XpG(2);e.R7$(3),e.E5c(" Mostrando ",t.startIndex+1," a ",t.Math.min(t.endIndex,t.rejections.length)," de ",t.rejections.length," rechazos "),e.R7$(2),e.Y8G("disabled",1===t.currentPage),e.R7$(),e.Y8G("img",t.chevronLeftIcon),e.R7$(3),e.Y8G("ngForOf",t.getPageNumbers()),e.R7$(),e.Y8G("disabled",t.currentPage===t.totalPages),e.R7$(2),e.Y8G("img",t.chevronRightIcon)}}function p(s,h){if(1&s&&(e.j41(0,"div",78)(1,"div",79)(2,"div")(3,"h3",80),e.EFF(4,"Historial de rechazos"),e.k0s(),e.j41(5,"p",56),e.EFF(6),e.k0s()(),e.j41(7,"button",81),e.nrm(8,"lucide-icon",50),e.EFF(9," Exportar "),e.k0s()(),e.j41(10,"div",17)(11,"div",82)(12,"table",83)(13,"thead",84)(14,"tr")(15,"th",85),e.EFF(16,"Fecha/Hora"),e.k0s(),e.j41(17,"th",85),e.EFF(18,"Receta"),e.k0s(),e.j41(19,"th",85),e.EFF(20,"Paciente"),e.k0s(),e.j41(21,"th",85),e.EFF(22,"Categor\xeda"),e.k0s(),e.j41(23,"th",85),e.EFF(24,"Motivo"),e.k0s(),e.j41(25,"th",85),e.EFF(26,"Estado"),e.k0s(),e.j41(27,"th",85),e.EFF(28,"Acci\xf3n"),e.k0s()()(),e.j41(29,"tbody",86),e.DNE(30,u,36,14,"tr",87),e.k0s()()(),e.DNE(31,g,13,8,"div",88),e.k0s()()),2&s){const t=e.XpG();e.R7$(6),e.SpI(" ",t.rejections.length," rechazo(s) registrado(s) "),e.R7$(2),e.Y8G("img",t.downloadIcon),e.R7$(22),e.Y8G("ngForOf",t.currentRejections),e.R7$(),e.Y8G("ngIf",t.totalPages>1)}}function k(s,h){if(1&s){const t=e.RV6();e.j41(0,"div",102),e.bIt("click",function(){e.eBV(t);const i=e.XpG();return e.Njj(i.closeModal())}),e.nrm(1,"div",103),e.j41(2,"div",104),e.bIt("click",function(i){return e.eBV(t),e.Njj(i.stopPropagation())}),e.j41(3,"div",105)(4,"div",5)(5,"div")(6,"div",106),e.nrm(7,"lucide-icon",107),e.j41(8,"h2",108),e.EFF(9,"Detalle de Rechazo"),e.k0s()(),e.j41(10,"p",109),e.EFF(11,"RX-2025-009842"),e.k0s()(),e.j41(12,"button",110),e.bIt("click",function(){e.eBV(t);const i=e.XpG();return e.Njj(i.closeModal())}),e.nrm(13,"lucide-icon",107),e.k0s()()(),e.j41(14,"div",111)(15,"div",112)(16,"div",113)(17,"div",114)(18,"div",106),e.nrm(19,"lucide-icon",115),e.j41(20,"h3",116),e.EFF(21,"Motivo farmac\xe9utico"),e.k0s()(),e.j41(22,"span",117),e.EFF(23," FAR-001 "),e.k0s()(),e.j41(24,"p",118),e.EFF(25,"Medicamento fuera de stock"),e.k0s(),e.j41(26,"p",119),e.EFF(27,"Stock disponibilidad o aspectos farmac\xe9uticos"),e.k0s()(),e.j41(28,"div",120)(29,"div",121),e.nrm(30,"lucide-icon",122),e.j41(31,"div")(32,"p",123),e.EFF(33,"Requiere acci\xf3n"),e.k0s(),e.j41(34,"p",124),e.EFF(35," Este rechazo requiere seguimiento o acci\xf3n adicional por parte del m\xe9dico prescriptor. "),e.k0s()()()(),e.j41(36,"div")(37,"h3",125),e.nrm(38,"lucide-icon",50),e.EFF(39," Informaci\xf3n del Paciente "),e.k0s(),e.j41(40,"div",57)(41,"div")(42,"p",56),e.EFF(43,"Nombre completo"),e.k0s(),e.j41(44,"p",126),e.EFF(45,"Carlos Andr\xe9s P\xe9rez Morales"),e.k0s()(),e.j41(46,"div")(47,"p",56),e.EFF(48,"Identificaci\xf3n"),e.k0s(),e.j41(49,"p",126),e.EFF(50,"CC-43.654.789"),e.k0s()()()(),e.j41(51,"div")(52,"h3",125),e.nrm(53,"lucide-icon",50),e.EFF(54," Informaci\xf3n de la Receta "),e.k0s(),e.j41(55,"div",57)(56,"div",127)(57,"div")(58,"p",56),e.EFF(59,"M\xe9dico prescriptor"),e.k0s(),e.j41(60,"p",126),e.EFF(61,"Dr. Carlos Alberto Mendoza Herrera"),e.k0s()(),e.j41(62,"div")(63,"p",56),e.EFF(64,"Medicamentos"),e.k0s(),e.j41(65,"p",126),e.EFF(66,"2 prescrito(s)"),e.k0s()()(),e.j41(67,"div",91),e.nrm(68,"lucide-icon",92),e.j41(69,"div")(70,"p",56),e.EFF(71,"Fecha de emisi\xf3n"),e.k0s(),e.j41(72,"p",126),e.EFF(73,"27/09/2025"),e.k0s()()()()(),e.j41(74,"div")(75,"h3",125),e.nrm(76,"lucide-icon",50),e.EFF(77," Detalles del Rechazo "),e.k0s(),e.j41(78,"div",128)(79,"p",129),e.EFF(80," El medicamento Atorvastatina 40mg no est\xe1 disponible en inventario actual. Se agot\xf3 el lote anterior y el nuevo pedido est\xe1 programado para el 02/10/2025. Se recomienda al paciente consultar con el m\xe9dico para alternativa temporal o esperar reabastecimiento. "),e.k0s()(),e.j41(81,"div",130)(82,"div")(83,"div",131),e.nrm(84,"lucide-icon",50),e.j41(85,"p",132),e.EFF(86,"Fecha de rechazo"),e.k0s()(),e.j41(87,"p",93),e.EFF(88,"28/09/2025"),e.k0s()(),e.j41(89,"div")(90,"div",131),e.nrm(91,"lucide-icon",50),e.j41(92,"p",132),e.EFF(93,"Hora"),e.k0s()(),e.j41(94,"p",93),e.EFF(95,"03:45 p.m."),e.k0s()()(),e.j41(96,"div",133)(97,"p",134),e.EFF(98,"Rechazado por"),e.k0s(),e.j41(99,"p",93),e.EFF(100,"Farm. Ana Mar\xeda Castillo"),e.k0s(),e.j41(101,"p",135),e.EFF(102,"Qu\xedmico Farmac\xe9utico"),e.k0s()()(),e.j41(103,"div",136)(104,"div",137),e.nrm(105,"lucide-icon",138),e.j41(106,"div")(107,"p",139),e.EFF(108,"Notificaci\xf3n enviada al m\xe9dico"),e.k0s(),e.j41(109,"p",140),e.EFF(110," El m\xe9dico prescriptor ha sido notificado del rechazo de esta receta. "),e.k0s()()()(),e.j41(111,"div",141)(112,"div",121),e.nrm(113,"lucide-icon",142),e.j41(114,"div")(115,"p",143),e.EFF(116,"Cumplimiento normativo"),e.k0s(),e.j41(117,"p",144),e.EFF(118," Este rechazo ha sido registrado seg\xfan las normativas vigentes (HL7, FDA, OMS) y forma parte del sistema de trazabilidad y auditor\xeda. "),e.k0s()()()()()(),e.j41(119,"div",145)(120,"div",57)(121,"div",146)(122,"button",147),e.nrm(123,"lucide-icon",50),e.EFF(124," Imprimir "),e.k0s(),e.j41(125,"button",147),e.nrm(126,"lucide-icon",50),e.EFF(127," Exportar "),e.k0s()()()()()()}if(2&s){const t=e.XpG();e.R7$(7),e.Y8G("img",t.xCircleIcon),e.R7$(6),e.Y8G("img",t.xIcon),e.R7$(6),e.Y8G("img",t.alertTriangleIcon),e.R7$(11),e.Y8G("img",t.alertTriangleIcon),e.R7$(8),e.Y8G("img",t.userIcon),e.R7$(15),e.Y8G("img",t.fileTextIcon),e.R7$(15),e.Y8G("img",t.calendarIcon),e.R7$(8),e.Y8G("img",t.fileTextIcon),e.R7$(8),e.Y8G("img",t.calendarIcon),e.R7$(7),e.Y8G("img",t.clockIcon),e.R7$(14),e.Y8G("img",t.mailIcon),e.R7$(8),e.Y8G("img",t.infoIcon),e.R7$(10),e.Y8G("img",t.printerIcon),e.R7$(3),e.Y8G("img",t.downloadIcon)}}let y=(()=>{class s{constructor(t,r){this.roleDemoService=t,this.roleSuggestionService=r,this.alertTriangleIcon=a.hcu,this.xCircleIcon=a.Jpz,this.fileTextIcon=a.iUU,this.userIcon=a.KJW,this.searchIcon=a.vji,this.plusIcon=a.FWt,this.filterIcon=a.dJT,this.filterXIcon=a.Jog,this.eyeIcon=a.kU3,this.downloadIcon=a.f5X,this.calendarIcon=a.VvS,this.clockIcon=a.zD7,this.mailIcon=a.gE4,this.printerIcon=a.xjr,this.infoIcon=a.R2D,this.xIcon=a.X,this.chevronLeftIcon=a.JGc,this.chevronRightIcon=a.c_$,this.breadcrumbItems=[{label:"Dispensaci\xf3n",route:"/dispensacion"},{label:"Rechazos"}],this.showRoleSuggestionModal=(0,e.vPA)(!1),this.subscriptions=new o.yU,this.PAGE_NAME="rechazos-dispensacion",this.rejections=[{id:"1",date:"28/09/2025",time:"03:45 p.m.",prescriptionNumber:"RX-2025-009842",doctorName:"Dr. Carlos Alberto Mendoza Herrera",patientName:"Carlos Andr\xe9s P\xe9rez Morales",patientId:"CC-43.654.789",category:"Farmac\xe9utico",reason:"Medicamento fuera de stock",reasonCode:"FAR-001",status:"Req. acci\xf3n"},{id:"2",date:"27/09/2025",time:"11:20 a.m.",prescriptionNumber:"RX-2025-009838",doctorName:"Dra. Patricia S\xe1nchez Vega",patientName:"Mar\xeda Jos\xe9 Ram\xedrez Silva",patientId:"CC-52.987.456",category:"M\xe9dico",reason:"Interacci\xf3n medicamentosa peligrosa",reasonCode:"MED-002",status:"Notificado"},{id:"3",date:"26/09/2025",time:"09:15 a.m.",prescriptionNumber:"RX-2025-009835",doctorName:"Dr. Roberto Jim\xe9nez Ortiz",patientName:"Jorge Luis Mart\xednez Castro",patientId:"CC-38.741.963",category:"Administrativo",reason:"Receta vencida",reasonCode:"ADM-001",status:"Notificado"},{id:"4",date:"25/09/2025",time:"02:30 p.m.",prescriptionNumber:"RX-2025-009830",doctorName:"Dr. Carlos Alberto Mendoza Herrera",patientName:"Sof\xeda Elena Vargas D\xedaz",patientId:"CC-41.852.741",category:"Paciente",reason:"Paciente rechaza el medicamento",reasonCode:"PAC-001",status:"Notificado"},{id:"5",date:"24/09/2025",time:"04:50 p.m.",prescriptionNumber:"RX-2025-009828",doctorName:"Dra. Laura Fern\xe1ndez Torres",patientName:"Diego Fernando Ruiz L\xf3pez",patientId:"CC-45.963.852",category:"M\xe9dico",reason:"Alergia conocida al medicamento",reasonCode:"MED-004",status:"Notificado"},{id:"6",date:"23/09/2025",time:"01:15 p.m.",prescriptionNumber:"RX-2025-009820",doctorName:"Dr. Miguel \xc1ngel Rodr\xedguez",patientName:"Ana Luc\xeda Moreno Vega",patientId:"CC-29.876.543",category:"Farmac\xe9utico",reason:"Dosis incorrecta prescrita",reasonCode:"FAR-003",status:"Req. acci\xf3n"},{id:"7",date:"22/09/2025",time:"10:45 a.m.",prescriptionNumber:"RX-2025-009815",doctorName:"Dra. Carmen Isabel L\xf3pez",patientName:"Pedro Antonio Silva Ruiz",patientId:"CC-51.234.876",category:"Administrativo",reason:"Firma digital inv\xe1lida",reasonCode:"ADM-003",status:"Notificado"}],this.searchMethod="historial",this.quickSearchInput="",this.categoryFilter="all",this.searchFilter="",this.dateFromFilter="",this.dateToFilter="",this.showModal=!1,this.currentPage=1,this.itemsPerPage=5,this.Math=Math}get totalPages(){return Math.ceil(this.rejections.length/this.itemsPerPage)}get startIndex(){return(this.currentPage-1)*this.itemsPerPage}get endIndex(){return this.startIndex+this.itemsPerPage}get currentRejections(){return this.rejections.slice(this.startIndex,this.endIndex)}ngOnInit(){this.checkRoleSuggestion();const t=this.roleDemoService.currentSession$.subscribe(r=>{"Farmac\xe9utico"===r.activeRole&&(this.showRoleSuggestionModal.set(!1),this.roleSuggestionService.clearDismissedPages())});this.subscriptions.add(t)}ngOnDestroy(){this.subscriptions.unsubscribe()}checkRoleSuggestion(){const t=this.roleDemoService.getCurrentSession();this.showRoleSuggestionModal.set("Farmac\xe9utico"!==t.activeRole&&"Administrador"!==t.activeRole)}onRoleSuggestionDismiss(){this.showRoleSuggestionModal.set(!1)}onRoleChanged(){this.showRoleSuggestionModal.set(!1)}setSearchMethod(t){this.searchMethod=t}searchPrescription(){console.log("Buscando receta:",this.quickSearchInput)}applyFilters(){console.log("Aplicando filtros")}clearFilters(){this.categoryFilter="all",this.searchFilter="",this.dateFromFilter="",this.dateToFilter=""}viewRejectionDetails(t){this.showModal=!0,console.log("Ver detalles del rechazo:",t)}closeModal(){this.showModal=!1}previousPage(){this.currentPage>1&&this.currentPage--}nextPage(){this.currentPage<this.totalPages&&this.currentPage++}goToPage(t){t>=1&&t<=this.totalPages&&(this.currentPage=t)}getPageNumbers(){const t=[];let i=Math.max(1,this.currentPage-Math.floor(2.5)),n=Math.min(this.totalPages,i+5-1);n-i<4&&(i=Math.max(1,n-5+1));for(let j=i;j<=n;j++)t.push(j);return t}getCategoryBadgeClass(t){const r={Farmac\u00e9utico:"bg-orange-100 text-orange-700 border-orange-300",M\u00e9dico:"bg-red-100 text-red-700 border-red-300",Administrativo:"bg-blue-100 text-blue-700 border-blue-300",Paciente:"bg-purple-100 text-purple-700 border-purple-300"};return r[t]||r.Farmac\u00e9utico}getStatusBadgeClass(t){const r={Notificado:"bg-green-100 text-green-700 border-green-300","Req. acci\xf3n":"bg-yellow-100 text-yellow-700 border-yellow-300",Resuelto:"bg-gray-100 text-gray-700 border-gray-300"};return r[t]||r.Notificado}static{this.\u0275fac=function(r){return new(r||s)(e.rXU(f.z),e.rXU(v.i))}}static{this.\u0275cmp=e.VBU({type:s,selectors:[["app-rechazos-dispensacion"]],standalone:!0,features:[e.aNF],decls:94,vars:20,consts:[[3,"items"],[1,"space-y-6"],[1,"relative","overflow-hidden","bg-gradient-to-r","from-red-600","via-red-500","to-red-700","rounded-lg","shadow-lg"],[1,"absolute","inset-0","bg-grid-white/[0.05]","bg-[size:20px_20px]"],[1,"relative","p-8"],[1,"flex","items-center","justify-between"],[1,"flex","items-center","space-x-3","mb-2"],[1,"p-3","bg-white/20","backdrop-blur-sm","rounded-lg"],[1,"w-8","h-8","text-white",3,"img"],[1,"text-white","text-2xl","font-bold"],[1,"text-red-100","text-sm"],[1,"hidden","md:block"],[1,"p-4","bg-white/10","backdrop-blur-sm","rounded-lg","border","border-white/20"],[1,"text-center"],[1,"text-2xl","font-bold","text-white"],[1,"text-xs","text-red-100"],[1,"bg-red-50","border","border-red-200","rounded-lg"],[1,"p-6"],[1,"flex","items-start","space-x-3"],[1,"w-5","h-5","text-red-600","mt-0.5","flex-shrink-0",3,"img"],[1,"font-medium","text-red-900","mb-2"],[1,"text-sm","text-red-800","space-y-2"],[1,"list-disc","list-inside","space-y-1","ml-2"],[1,"grid","grid-cols-5","gap-4"],[1,"bg-white","rounded-lg","p-6","border-l-4","border-l-gray-500","shadow-sm"],[1,"flex","flex-col","items-center","text-center"],[1,"w-8","h-8","text-gray-500","mb-2",3,"img"],[1,"text-sm","text-gray-600","mb-1"],[1,"text-3xl","font-bold","text-gray-900"],[1,"bg-white","rounded-lg","p-6","border-l-4","border-l-red-500","shadow-sm"],[1,"w-8","h-8","text-red-500","mb-2",3,"img"],[1,"text-sm","text-red-600","mb-1"],[1,"text-3xl","font-bold","text-red-900"],[1,"bg-white","rounded-lg","p-6","border-l-4","border-l-orange-500","shadow-sm"],[1,"w-8","h-8","text-orange-500","mb-2",3,"img"],[1,"text-sm","text-orange-600","mb-1"],[1,"text-3xl","font-bold","text-orange-900"],[1,"bg-white","rounded-lg","p-6","border-l-4","border-l-yellow-500","shadow-sm"],[1,"w-8","h-8","text-yellow-500","mb-2",3,"img"],[1,"text-sm","text-yellow-600","mb-1"],[1,"text-3xl","font-bold","text-yellow-900"],[1,"bg-white","rounded-lg","p-6","border-l-4","border-l-blue-500","shadow-sm"],[1,"w-8","h-8","text-blue-500","mb-2",3,"img"],[1,"text-sm","text-blue-600","mb-1"],[1,"text-3xl","font-bold","text-blue-900"],[1,"bg-white","rounded-lg","shadow","border","border-gray-200"],[1,"border-b","border-gray-200"],[1,"-mb-px","flex"],[3,"click"],[1,"flex","items-center","justify-center","gap-2"],[1,"w-4","h-4",3,"img"],["class","space-y-6",4,"ngIf"],["class","bg-white rounded-lg shadow-lg",4,"ngIf"],["class","fixed inset-0 z-50 overflow-hidden",3,"click",4,"ngIf"],[3,"dismiss","roleChanged","isOpen"],[1,"text-lg","font-semibold","text-gray-900","mb-2"],[1,"text-sm","text-gray-600"],[1,"space-y-3"],[1,"flex","gap-3"],[1,"flex-1","relative"],[1,"absolute","left-3","top-1/2","transform","-translate-y-1/2","w-5","h-5","text-gray-400",3,"img"],["type","text","placeholder","N\xfamero de receta (ej: RX-2025-009847)",1,"pl-11","h-12","w-full","px-3","py-2","border","border-gray-300","rounded-lg","focus:ring-2","focus:ring-red-500","focus:border-red-500",3,"ngModelChange","ngModel"],[1,"bg-red-600","hover:bg-red-700","text-white","px-8","py-3","rounded-lg","font-medium","flex","items-center","gap-2","transition-colors",3,"click"],[1,"text-lg","font-semibold","text-gray-900","mb-4"],[1,"space-y-4"],[1,"grid","grid-cols-1","md:grid-cols-4","gap-4"],[1,"text-sm","font-medium","text-gray-700","mb-2","block"],[1,"w-full","p-3","border","border-gray-300","rounded-lg","focus:ring-2","focus:ring-red-500","focus:border-red-500",3,"ngModelChange","ngModel"],["value","all"],["value","farmaceutico"],["value","medico"],["value","administrativo"],["value","paciente"],[1,"relative"],["type","text","placeholder","Receta o paciente...",1,"w-full","p-3","border","border-gray-300","rounded-lg","focus:ring-2","focus:ring-red-500","focus:border-red-500",3,"ngModelChange","ngModel"],["type","date","placeholder","mm/dd/yyyy",1,"w-full","p-3","border","border-gray-300","rounded-lg","focus:ring-2","focus:ring-red-500","focus:border-red-500",3,"ngModelChange","ngModel"],[1,"bg-red-600","hover:bg-red-700","text-white","px-6","py-3","rounded-lg","font-medium","flex","items-center","gap-2","transition-colors",3,"click"],[1,"border","border-gray-300","text-gray-700","hover:bg-gray-50","px-6","py-3","rounded-lg","font-medium","flex","items-center","gap-2","transition-colors",3,"click"],[1,"bg-white","rounded-lg","shadow-lg"],[1,"p-6","border-b","border-gray-200","flex","justify-between","items-center"],[1,"text-lg","font-semibold","text-gray-900","mb-1"],[1,"flex","items-center","gap-2","border","border-gray-300","text-gray-700","hover:bg-gray-50","px-4","py-2","rounded-lg","transition-colors"],[1,"overflow-x-auto"],[1,"w-full"],[1,"bg-gray-50"],[1,"px-6","py-3","text-left","text-xs","font-medium","text-gray-500","uppercase","tracking-wider"],[1,"bg-white","divide-y","divide-gray-200"],["class","cursor-pointer hover:bg-gray-50",3,"dblclick",4,"ngFor","ngForOf"],["class","px-6 py-4 border-t border-gray-200 bg-gray-50",4,"ngIf"],[1,"cursor-pointer","hover:bg-gray-50",3,"dblclick"],[1,"px-6","py-4","whitespace-nowrap"],[1,"flex","items-center","space-x-2"],[1,"w-4","h-4","text-gray-400",3,"img"],[1,"text-sm","font-medium","text-gray-900"],[1,"text-xs","text-gray-500"],[1,"px-2","py-1","text-xs","font-medium","rounded-full","border",3,"ngClass"],[1,"text-gray-400","hover:text-gray-600",3,"click"],[1,"px-6","py-4","border-t","border-gray-200","bg-gray-50"],[1,"text-sm","text-gray-700"],[1,"px-3","py-2","text-sm","font-medium","text-gray-500","bg-white","border","border-gray-300","rounded-md","hover:bg-gray-50","disabled:opacity-50","disabled:cursor-not-allowed","flex","items-center","gap-1",3,"click","disabled"],[1,"flex","space-x-1"],[3,"class","click",4,"ngFor","ngForOf"],[1,"fixed","inset-0","z-50","overflow-hidden",3,"click"],[1,"absolute","inset-0","bg-black","bg-opacity-50"],[1,"absolute","right-0","top-0","h-full","w-full","max-w-md","bg-white","shadow-xl","transform","transition-transform","duration-300","ease-in-out","flex","flex-col",3,"click"],[1,"bg-red-600","px-6","py-4","text-white","flex-shrink-0"],[1,"flex","items-center","gap-2"],[1,"w-5","h-5",3,"img"],[1,"text-lg","font-semibold"],[1,"text-red-100","text-sm","mt-1"],[1,"p-2","hover:bg-white/20","rounded-lg","transition-colors",3,"click"],[1,"flex-1","overflow-y-auto"],[1,"p-6","space-y-6"],[1,"p-4","bg-orange-50","border","border-orange-200","rounded-lg"],[1,"flex","items-start","justify-between","mb-3"],[1,"w-5","h-5","text-orange-600",3,"img"],[1,"font-medium","text-orange-900"],[1,"px-2","py-1","text-xs","font-medium","rounded-md","bg-orange-100","text-orange-700","border","border-orange-300"],[1,"font-medium","text-orange-900","mb-1"],[1,"text-sm","text-orange-800"],[1,"p-4","bg-yellow-50","border","border-yellow-200","rounded-lg"],[1,"flex","items-start","gap-2"],[1,"w-5","h-5","text-yellow-600","mt-0.5","flex-shrink-0",3,"img"],[1,"font-medium","text-yellow-900"],[1,"text-sm","text-yellow-800","mt-1"],[1,"font-medium","text-gray-900","mb-3","flex","items-center","gap-2"],[1,"font-medium","text-gray-900"],[1,"grid","grid-cols-2","gap-4"],[1,"p-4","bg-gray-50","rounded-lg","border","border-gray-200"],[1,"text-sm","text-gray-900"],[1,"grid","grid-cols-2","gap-3","mt-4"],[1,"flex","items-center","space-x-2","text-gray-600","mb-1"],[1,"text-xs"],[1,"mt-3"],[1,"text-xs","text-gray-600","mb-1"],[1,"text-xs","text-gray-600","mt-1"],[1,"p-4","bg-green-50","border","border-green-200","rounded-lg"],[1,"flex","items-start","gap-3"],[1,"w-5","h-5","text-green-600","mt-0.5","flex-shrink-0",3,"img"],[1,"font-medium","text-green-900"],[1,"text-sm","text-green-800","mt-1"],[1,"p-4","bg-blue-50","border","border-blue-200","rounded-lg"],[1,"w-5","h-5","text-blue-600","mt-0.5","flex-shrink-0",3,"img"],[1,"font-medium","text-blue-900"],[1,"text-sm","text-blue-800","mt-1"],[1,"bg-gray-50","px-6","py-4","flex-shrink-0"],[1,"grid","grid-cols-2","gap-2"],[1,"flex","items-center","justify-center","gap-2","border","border-gray-300","text-gray-700","hover:bg-gray-50","px-4","py-2","rounded-lg","transition-colors"]],template:function(r,i){1&r&&(e.nrm(0,"app-breadcrumbs",0),e.j41(1,"div",1)(2,"div",2),e.nrm(3,"div",3),e.j41(4,"div",4)(5,"div",5)(6,"div")(7,"div",6)(8,"div",7),e.nrm(9,"lucide-icon",8),e.k0s(),e.j41(10,"div")(11,"h1",9),e.EFF(12,"Rechazos y Motivos"),e.k0s(),e.j41(13,"p",10),e.EFF(14," Sistema de trazabilidad de rechazos de dispensaci\xf3n "),e.k0s()()()(),e.j41(15,"div",11)(16,"div",12)(17,"div",13)(18,"div",14),e.EFF(19),e.k0s(),e.j41(20,"div",15),e.EFF(21,"Total rechazos"),e.k0s()()()()()()(),e.j41(22,"div",16)(23,"div",17)(24,"div",18),e.nrm(25,"lucide-icon",19),e.j41(26,"div")(27,"h4",20),e.EFF(28,"Sistema de trazabilidad de rechazos"),e.k0s(),e.j41(29,"div",21)(30,"p"),e.EFF(31," Documenta todos los rechazos de dispensaci\xf3n para garantizar seguridad del paciente, cumplimiento normativo y an\xe1lisis de causas ra\xedz. "),e.k0s(),e.j41(32,"ul",22)(33,"li"),e.EFF(34,"Motivos estandarizados seg\xfan normativas HL7, FDA y OMS"),e.k0s(),e.j41(35,"li"),e.EFF(36,"Notificaci\xf3n autom\xe1tica a m\xe9dicos prescriptores"),e.k0s(),e.j41(37,"li"),e.EFF(38,"Trazabilidad completa para auditor\xedas"),e.k0s(),e.j41(39,"li"),e.EFF(40,"An\xe1lisis estad\xedstico para mejora continua"),e.k0s()()()()()()(),e.j41(41,"div",23)(42,"div",24)(43,"div",25),e.nrm(44,"lucide-icon",26),e.j41(45,"p",27),e.EFF(46,"Total"),e.k0s(),e.j41(47,"p",28),e.EFF(48,"5"),e.k0s()()(),e.j41(49,"div",29)(50,"div",25),e.nrm(51,"lucide-icon",30),e.j41(52,"p",31),e.EFF(53,"M\xe9dicos"),e.k0s(),e.j41(54,"p",32),e.EFF(55,"2"),e.k0s()()(),e.j41(56,"div",33)(57,"div",25),e.nrm(58,"lucide-icon",34),e.j41(59,"p",35),e.EFF(60,"Administrativos"),e.k0s(),e.j41(61,"p",36),e.EFF(62,"1"),e.k0s()()(),e.j41(63,"div",37)(64,"div",25),e.nrm(65,"lucide-icon",38),e.j41(66,"p",39),e.EFF(67,"Farmac\xe9uticos"),e.k0s(),e.j41(68,"p",40),e.EFF(69,"1"),e.k0s()()(),e.j41(70,"div",41)(71,"div",25),e.nrm(72,"lucide-icon",42),e.j41(73,"p",43),e.EFF(74,"Paciente"),e.k0s(),e.j41(75,"p",44),e.EFF(76,"1"),e.k0s()()()(),e.j41(77,"div",45)(78,"div",46)(79,"nav",47)(80,"button",48),e.bIt("click",function(){return i.setSearchMethod("registrar")}),e.j41(81,"div",49),e.nrm(82,"lucide-icon",50),e.EFF(83," Registrar rechazo "),e.k0s()(),e.j41(84,"button",48),e.bIt("click",function(){return i.setSearchMethod("historial")}),e.j41(85,"div",49),e.nrm(86,"lucide-icon",50),e.EFF(87," Historial de rechazos "),e.k0s()()()(),e.j41(88,"div",17),e.DNE(89,R,13,2,"div",51)(90,c,40,6,"div",51),e.k0s()(),e.DNE(91,p,32,4,"div",52),e.k0s(),e.DNE(92,k,128,14,"div",53),e.j41(93,"app-role-suggestion-modal",54),e.bIt("dismiss",function(){return i.onRoleSuggestionDismiss()})("roleChanged",function(){return i.onRoleChanged()}),e.k0s()),2&r&&(e.Y8G("items",i.breadcrumbItems),e.R7$(9),e.Y8G("img",i.alertTriangleIcon),e.R7$(10),e.JRh(i.rejections.length),e.R7$(6),e.Y8G("img",i.alertTriangleIcon),e.R7$(19),e.Y8G("img",i.fileTextIcon),e.R7$(7),e.Y8G("img",i.alertTriangleIcon),e.R7$(7),e.Y8G("img",i.fileTextIcon),e.R7$(7),e.Y8G("img",i.xCircleIcon),e.R7$(7),e.Y8G("img",i.userIcon),e.R7$(8),e.HbH("registrar"===i.searchMethod?"border-red-500 text-red-600 bg-red-50 w-1/2 py-4 px-6 text-center border-b-2 font-medium text-sm transition-colors":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300 w-1/2 py-4 px-6 text-center border-b-2 font-medium text-sm transition-colors"),e.R7$(2),e.Y8G("img",i.plusIcon),e.R7$(2),e.HbH("historial"===i.searchMethod?"border-red-500 text-red-600 bg-red-50 w-1/2 py-4 px-6 text-center border-b-2 font-medium text-sm transition-colors":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300 w-1/2 py-4 px-6 text-center border-b-2 font-medium text-sm transition-colors"),e.R7$(2),e.Y8G("img",i.fileTextIcon),e.R7$(3),e.Y8G("ngIf","registrar"===i.searchMethod),e.R7$(),e.Y8G("ngIf","historial"===i.searchMethod),e.R7$(),e.Y8G("ngIf","historial"===i.searchMethod),e.R7$(),e.Y8G("ngIf",i.showModal),e.R7$(),e.Y8G("isOpen",i.showRoleSuggestionModal()))},dependencies:[_.MD,_.YU,_.Sq,_.bT,m.YN,m.xH,m.y7,m.me,m.wz,m.BC,m.vS,a.flO,a.WGl,x.m,F.t],encapsulation:2})}}return s})()}}]);