"use strict";(self.webpackChunkeprescription_angular=self.webpackChunkeprescription_angular||[]).push([[1614],{1614:(k,p,s)=>{s.r(p),s.d(p,{PoliticasComponent:()=>P});var g=s(177),m=s(6283),l=s(4341),n=s(8516),f=s(8961),h=s(9590),u=s(3922),e=s(4438),b=s(7473);function _(a,c){if(1&a&&(e.j41(0,"option",47),e.EFF(1),e.k0s()),2&a){const i=c.$implicit;e.Y8G("value",i),e.R7$(),e.JRh(i)}}function v(a,c){if(1&a&&(e.j41(0,"span",54),e.EFF(1),e.k0s()),2&a){const i=e.XpG().$implicit;e.HbH("true"===i.value?"bg-green-100 text-green-700 border-green-300":"bg-red-100 text-red-700 border-red-300"),e.R7$(),e.SpI(" ","true"===i.value?"S\xed":"No"," ")}}function F(a,c){if(1&a&&(e.j41(0,"span",61),e.EFF(1),e.k0s()),2&a){const i=e.XpG().$implicit;e.R7$(),e.Lme(" ",i.value," ",i.unit," ")}}function x(a,c){if(1&a){const i=e.RV6();e.j41(0,"tr",48)(1,"td",49)(2,"div",50),e.EFF(3),e.k0s()(),e.j41(4,"td",49)(5,"div",51),e.DNE(6,v,2,3,"span",52)(7,F,2,2,"span",53),e.k0s()(),e.j41(8,"td",49)(9,"span",54),e.EFF(10),e.k0s()(),e.j41(11,"td",49)(12,"div",55),e.EFF(13),e.k0s()(),e.j41(14,"td",49)(15,"div",56),e.EFF(16),e.k0s()(),e.j41(17,"td",49)(18,"span",57),e.EFF(19," Activa "),e.k0s()(),e.j41(20,"td",58)(21,"button",59),e.bIt("click",function(){const t=e.eBV(i).$implicit,r=e.XpG();return e.Njj(r.openEditDialog(t))}),e.nrm(22,"lucide-icon",60),e.EFF(23," Editar "),e.k0s()()()}if(2&a){const i=c.$implicit,o=e.XpG();e.R7$(3),e.JRh(i.name),e.R7$(3),e.Y8G("ngIf","boolean"===i.unit),e.R7$(),e.Y8G("ngIf","boolean"!==i.unit),e.R7$(2),e.HbH(o.getCategoryClass(i.category)),e.R7$(),e.SpI(" ",i.category," "),e.R7$(3),e.JRh(i.description),e.R7$(3),e.JRh(i.lastModified),e.R7$(6),e.Y8G("img",o.editIcon)}}function E(a,c){if(1&a){const i=e.RV6();e.j41(0,"div",73)(1,"label",74)(2,"input",75),e.mxI("ngModelChange",function(t){e.eBV(i);const r=e.XpG(2);return e.DH7(r.editFormData.booleanValue,t)||(r.editFormData.booleanValue=t),e.Njj(t)}),e.k0s(),e.j41(3,"span",76),e.EFF(4,"Activado"),e.k0s()()()}if(2&a){const i=e.XpG(2);e.R7$(2),e.Y8G("checked","true"===i.selectedPolitica.value),e.R50("ngModel",i.editFormData.booleanValue)}}function y(a,c){if(1&a){const i=e.RV6();e.j41(0,"div",77)(1,"input",78),e.mxI("ngModelChange",function(t){e.eBV(i);const r=e.XpG(2);return e.DH7(r.editFormData.numericValue,t)||(r.editFormData.numericValue=t),e.Njj(t)}),e.k0s(),e.nrm(2,"input",79),e.k0s()}if(2&a){const i=e.XpG(2);e.R7$(),e.R50("ngModel",i.editFormData.numericValue),e.R7$(),e.Y8G("value",i.selectedPolitica.unit)}}function D(a,c){if(1&a&&(e.j41(0,"div",1)(1,"div")(2,"label",62),e.EFF(3,"Categor\xeda"),e.k0s(),e.nrm(4,"input",63),e.k0s(),e.j41(5,"div")(6,"label",62),e.EFF(7,"Valor actual"),e.k0s(),e.DNE(8,E,5,2,"div",64)(9,y,3,2,"div",65),e.k0s(),e.j41(10,"div",66)(11,"div",35),e.nrm(12,"lucide-icon",67),e.j41(13,"div",68)(14,"p",69),e.EFF(15,"Advertencia"),e.k0s(),e.j41(16,"p",70),e.EFF(17," Modificar esta pol\xedtica afectar\xe1 el comportamiento del sistema. Los cambios se aplicar\xe1n inmediatamente. "),e.k0s()()()(),e.j41(18,"div",71)(19,"div",35),e.nrm(20,"lucide-icon",36),e.j41(21,"div",56)(22,"p",37),e.EFF(23,"Vista previa del cambio"),e.k0s(),e.j41(24,"div",72)(25,"p")(26,"strong"),e.EFF(27,"Valor actual:"),e.k0s(),e.EFF(28),e.k0s(),e.j41(29,"p")(30,"strong"),e.EFF(31,"Nuevo valor:"),e.k0s(),e.EFF(32),e.k0s()()()()()()),2&a){const i=e.XpG();e.R7$(4),e.Y8G("value",i.selectedPolitica.category),e.R7$(4),e.Y8G("ngIf","boolean"===i.selectedPolitica.unit),e.R7$(),e.Y8G("ngIf","boolean"!==i.selectedPolitica.unit),e.R7$(3),e.Y8G("img",i.shieldIcon),e.R7$(8),e.Y8G("img",i.infoIcon),e.R7$(8),e.SpI(" ",i.getDisplayValue(i.selectedPolitica),""),e.R7$(4),e.SpI(" ",i.getNewDisplayValue(),"")}}let P=(()=>{class a{constructor(i){this.notificationService=i,this.settingsIcon=n.wB_,this.checkCircle2Icon=n.Jly,this.xCircleIcon=n.Jpz,this.editIcon=n.ffu,this.trash2Icon=n.TBR,this.plusIcon=n.FWt,this.saveIcon=n.eMP,this.xIcon=n.X,this.alertTriangleIcon=n.hcu,this.databaseIcon=n.WmV,this.clockIcon=n.zD7,this.infoIcon=n.R2D,this.shieldIcon=n.ekZ,this.breadcrumbItems=[{label:"Configuraci\xf3n",route:"/config"},{label:"Pol\xedticas de recetas",route:"/config/politicas"}],this.searchTerm="",this.categoryFilter="",this.isEditDialogOpen=!1,this.selectedPolitica=null,this.editFormData={booleanValue:!1,numericValue:0},this.politicas=[{id:"POL-001",name:"Vigencia de recetas",value:"30",unit:"d\xedas",description:"Tiempo m\xe1ximo de validez de una receta desde su emisi\xf3n",category:"Temporal",status:"active",lastModified:"2024-09-15"},{id:"POL-002",name:"M\xe1ximo de medicamentos por receta",value:"5",unit:"medicamentos",description:"Cantidad m\xe1xima de medicamentos que puede contener una receta",category:"L\xedmites",status:"active",lastModified:"2024-08-20"},{id:"POL-003",name:"Requiere diagn\xf3stico obligatorio",value:"true",unit:"boolean",description:"Si es obligatorio incluir diagn\xf3stico en toda receta",category:"Validaci\xf3n",status:"active",lastModified:"2024-07-10"},{id:"POL-004",name:"Permitir prescripci\xf3n de controlados",value:"true",unit:"boolean",description:"Habilita la prescripci\xf3n de medicamentos controlados",category:"Permisos",status:"active",lastModified:"2024-09-01"},{id:"POL-005",name:"Duraci\xf3n m\xe1xima de tratamiento",value:"90",unit:"d\xedas",description:"Duraci\xf3n m\xe1xima permitida para un tratamiento continuo",category:"Temporal",status:"active",lastModified:"2024-06-15"},{id:"POL-006",name:"Requiere firma digital obligatoria",value:"true",unit:"boolean",description:"Si todas las recetas deben ser firmadas digitalmente",category:"Seguridad",status:"active",lastModified:"2024-09-20"},{id:"POL-007",name:"Alertas cl\xednicas bloqueantes",value:"true",unit:"boolean",description:"Si las alertas cr\xedticas bloquean la emisi\xf3n de recetas",category:"Seguridad",status:"active",lastModified:"2024-08-30"},{id:"POL-008",name:"Dispensaci\xf3n parcial permitida",value:"true",unit:"boolean",description:"Permite dispensar parcialmente una receta en farmacia",category:"Farmacia",status:"active",lastModified:"2024-07-25"}]}ngOnInit(){}get filteredPoliticas(){return this.politicas.filter(i=>(!this.searchTerm||i.name.toLowerCase().includes(this.searchTerm.toLowerCase()))&&(!this.categoryFilter||i.category===this.categoryFilter))}get politicasActivas(){return this.politicas.filter(i=>"active"===i.status).length}get politicasInactivas(){return this.politicas.filter(i=>"inactive"===i.status).length}get categorias(){return[...new Set(this.politicas.map(i=>i.category))]}getCategoryClass(i){return{Temporal:"bg-blue-100 text-blue-700 border-blue-300",L\u00edmites:"bg-orange-100 text-orange-700 border-orange-300",Validaci\u00f3n:"bg-green-100 text-green-700 border-green-300",Permisos:"bg-purple-100 text-purple-700 border-purple-300",Seguridad:"bg-red-100 text-red-700 border-red-300",Farmacia:"bg-teal-100 text-teal-700 border-teal-300"}[i]||"bg-gray-100 text-gray-700 border-gray-300"}getStatusClass(i){return{active:"bg-green-100 text-green-800",inactive:"bg-gray-100 text-gray-800"}[i]||"bg-gray-100 text-gray-800"}getStatusIcon(i){return{active:this.checkCircle2Icon,inactive:this.xCircleIcon}[i]||this.xCircleIcon}getStatusLabel(i){return{active:"Activa",inactive:"Inactiva"}[i]||"Inactiva"}openEditDialog(i){this.selectedPolitica=i,"boolean"===i.unit?this.editFormData.booleanValue="true"===i.value:this.editFormData.numericValue=parseInt(i.value)||0,this.isEditDialogOpen=!0}closeEditDialog(){this.isEditDialogOpen=!1,this.selectedPolitica=null}getDisplayValue(i){return"boolean"===i.unit?"true"===i.value?"S\xed":"No":`${i.value} ${i.unit}`}getNewDisplayValue(){return this.selectedPolitica?"boolean"===this.selectedPolitica.unit?this.editFormData.booleanValue?"S\xed":"No":`${this.editFormData.numericValue} ${this.selectedPolitica.unit}`:""}savePolicy(){if(!this.selectedPolitica)return;const i="boolean"===this.selectedPolitica.unit?this.editFormData.booleanValue.toString():this.editFormData.numericValue.toString(),o=this.politicas.findIndex(t=>t.id===this.selectedPolitica.id);-1!==o&&(this.politicas[o]={...this.politicas[o],value:i,lastModified:(new Date).toISOString().split("T")[0]}),this.notificationService.showSuccess("La configuraci\xf3n ha sido guardada correctamente","Pol\xedtica actualizada"),this.closeEditDialog()}static{this.\u0275fac=function(o){return new(o||a)(e.rXU(b.J))}}static{this.\u0275cmp=e.VBU({type:a,selectors:[["app-politicas"]],standalone:!0,features:[e.aNF],decls:105,vars:23,consts:[["title","Pol\xedticas de Recetas","description","Configuraci\xf3n de reglas y l\xedmites del sistema de prescripciones","headerGradient","from-indigo-600 via-purple-500 to-pink-600",3,"icon","breadcrumbItems"],[1,"space-y-6"],[1,"grid","grid-cols-1","md:grid-cols-4","gap-4"],[1,"bg-white","rounded-lg","shadow-lg","hover:shadow-xl","transition-all","cursor-pointer","border-l-4","border-l-indigo-500"],[1,"p-6"],[1,"flex","items-center","justify-between"],[1,"space-y-1","flex-1"],[1,"text-sm","text-gray-600"],[1,"text-3xl","font-bold","text-gray-900"],[1,"p-3","bg-indigo-100","rounded-xl"],[1,"w-8","h-8","text-indigo-600",3,"img"],[1,"bg-white","rounded-lg","shadow-lg","hover:shadow-xl","transition-all","cursor-pointer","border-l-4","border-l-green-500"],[1,"p-3","bg-green-100","rounded-xl"],[1,"w-8","h-8","text-green-600",3,"img"],[1,"bg-white","rounded-lg","shadow-lg","hover:shadow-xl","transition-all","cursor-pointer","border-l-4","border-l-purple-500"],[1,"p-3","bg-purple-100","rounded-xl"],[1,"w-8","h-8","text-purple-600",3,"img"],[1,"bg-white","rounded-lg","shadow-lg","hover:shadow-xl","transition-all","cursor-pointer","border-l-4","border-l-orange-500"],[1,"p-3","bg-orange-100","rounded-xl"],[1,"w-8","h-8","text-orange-600",3,"img"],[1,"flex","gap-4"],[1,"flex-1","relative"],["type","text","placeholder","Buscar pol\xedtica...",1,"w-full","px-3","py-2","border","border-gray-300","rounded-lg","focus:ring-2","focus:ring-indigo-500","focus:border-transparent",3,"ngModelChange","ngModel"],[1,"px-3","py-2","border","border-gray-300","rounded-lg","focus:ring-2","focus:ring-indigo-500","focus:border-transparent","w-48",3,"ngModelChange","ngModel"],["value",""],[3,"value",4,"ngFor","ngForOf"],[1,"overflow-x-auto"],[1,"w-full"],[1,"bg-gray-50","border-b"],[1,"px-6","py-3","text-left","text-xs","font-medium","text-gray-500","uppercase","tracking-wider"],[1,"px-6","py-3","text-right","text-xs","font-medium","text-gray-500","uppercase","tracking-wider"],[1,"bg-white","divide-y","divide-gray-200"],["class","hover:bg-gray-50",4,"ngFor","ngForOf"],[1,"border-indigo-200","bg-indigo-50"],[1,"p-4"],[1,"flex","items-start","gap-3"],[1,"w-5","h-5","text-indigo-600","flex-shrink-0","mt-0.5",3,"img"],[1,"font-medium","text-indigo-900","mb-1"],[1,"space-y-1","text-sm","text-indigo-700"],[1,"flex","items-start","gap-2"],[1,"w-4","h-4","mt-0.5","flex-shrink-0",3,"img"],[3,"openChange","open","title","description","showFooter"],["class","space-y-6",4,"ngIf"],["slot","footer",1,"flex","justify-end","gap-3"],[1,"px-4","py-2","border","border-gray-300","rounded-lg","text-gray-700","hover:bg-gray-50","focus:outline-none","focus:ring-2","focus:ring-offset-2","focus:ring-indigo-500",3,"click"],[1,"px-4","py-2","bg-indigo-600","text-white","rounded-lg","hover:bg-indigo-700","focus:outline-none","focus:ring-2","focus:ring-offset-2","focus:ring-indigo-500","flex","items-center","gap-2",3,"click"],[1,"w-4","h-4",3,"img"],[3,"value"],[1,"hover:bg-gray-50"],[1,"px-6","py-4"],[1,"text-sm","font-medium","text-gray-900"],[1,"flex","items-center","gap-2"],["class","inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium border",3,"class",4,"ngIf"],["class","font-semibold",4,"ngIf"],[1,"inline-flex","items-center","px-2.5","py-0.5","rounded-full","text-xs","font-medium","border"],[1,"text-sm","text-gray-600","max-w-xs","truncate"],[1,"text-sm"],[1,"inline-flex","items-center","px-2.5","py-0.5","rounded-full","text-xs","font-medium","bg-green-100","text-green-700","border","border-green-300"],[1,"px-6","py-4","text-right"],[1,"inline-flex","items-center","px-3","py-1.5","border","border-gray-300","rounded-md","text-sm","font-medium","text-gray-700","bg-white","hover:bg-gray-50","focus:outline-none","focus:ring-2","focus:ring-offset-2","focus:ring-indigo-500",3,"click"],[1,"w-4","h-4","mr-2",3,"img"],[1,"font-semibold"],[1,"block","text-sm","font-medium","text-gray-700","mb-2"],["type","text","disabled","",1,"w-full","px-3","py-2","border","border-gray-300","rounded-lg","bg-gray-50",3,"value"],["class","mt-2",4,"ngIf"],["class","flex gap-2 mt-2",4,"ngIf"],[1,"bg-yellow-50","border","border-yellow-200","rounded-lg","p-4"],[1,"w-5","h-5","text-yellow-600","flex-shrink-0","mt-0.5",3,"img"],[1,"text-sm","text-yellow-900"],[1,"font-medium","mb-1"],[1,"text-yellow-700"],[1,"bg-indigo-50","border","border-indigo-200","rounded-lg","p-4"],[1,"text-indigo-700"],[1,"mt-2"],[1,"inline-flex","items-center"],["type","checkbox",1,"form-checkbox","h-5","w-5","text-indigo-600","rounded","focus:ring-indigo-500",3,"ngModelChange","checked","ngModel"],[1,"ml-2","text-sm","text-gray-700"],[1,"flex","gap-2","mt-2"],["type","number",1,"flex-1","px-3","py-2","border","border-gray-300","rounded-lg","focus:ring-2","focus:ring-indigo-500","focus:border-transparent",3,"ngModelChange","ngModel"],["type","text","disabled","",1,"w-32","px-3","py-2","border","border-gray-300","rounded-lg","bg-gray-50",3,"value"]],template:function(o,t){1&o&&(e.j41(0,"app-page-layout",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5)(6,"div",6)(7,"p",7),e.EFF(8,"Total pol\xedticas"),e.k0s(),e.j41(9,"p",8),e.EFF(10),e.k0s()(),e.j41(11,"div",9),e.nrm(12,"lucide-icon",10),e.k0s()()()(),e.j41(13,"div",11)(14,"div",4)(15,"div",5)(16,"div",6)(17,"p",7),e.EFF(18,"Activas"),e.k0s(),e.j41(19,"p",8),e.EFF(20),e.k0s()(),e.j41(21,"div",12),e.nrm(22,"lucide-icon",13),e.k0s()()()(),e.j41(23,"div",14)(24,"div",4)(25,"div",5)(26,"div",6)(27,"p",7),e.EFF(28,"Categor\xedas"),e.k0s(),e.j41(29,"p",8),e.EFF(30),e.k0s()(),e.j41(31,"div",15),e.nrm(32,"lucide-icon",16),e.k0s()()()(),e.j41(33,"div",17)(34,"div",4)(35,"div",5)(36,"div",6)(37,"p",7),e.EFF(38,"Modificadas (mes)"),e.k0s(),e.j41(39,"p",8),e.EFF(40,"3"),e.k0s()(),e.j41(41,"div",18),e.nrm(42,"lucide-icon",19),e.k0s()()()()(),e.j41(43,"app-card")(44,"app-card-content",4)(45,"div",20)(46,"div",21)(47,"input",22),e.mxI("ngModelChange",function(d){return e.DH7(t.searchTerm,d)||(t.searchTerm=d),d}),e.k0s()(),e.j41(48,"select",23),e.mxI("ngModelChange",function(d){return e.DH7(t.categoryFilter,d)||(t.categoryFilter=d),d}),e.j41(49,"option",24),e.EFF(50,"Todas las categor\xedas"),e.k0s(),e.DNE(51,_,2,2,"option",25),e.k0s()()()(),e.j41(52,"app-card")(53,"app-card-header")(54,"app-card-title"),e.EFF(55,"Pol\xedticas Configuradas"),e.k0s()(),e.j41(56,"app-card-content")(57,"div",26)(58,"table",27)(59,"thead",28)(60,"tr")(61,"th",29),e.EFF(62,"Pol\xedtica"),e.k0s(),e.j41(63,"th",29),e.EFF(64,"Valor"),e.k0s(),e.j41(65,"th",29),e.EFF(66,"Categor\xeda"),e.k0s(),e.j41(67,"th",29),e.EFF(68,"Descripci\xf3n"),e.k0s(),e.j41(69,"th",29),e.EFF(70,"\xdaltima modificaci\xf3n"),e.k0s(),e.j41(71,"th",29),e.EFF(72,"Estado"),e.k0s(),e.j41(73,"th",30),e.EFF(74,"Acciones"),e.k0s()()(),e.j41(75,"tbody",31),e.DNE(76,x,24,9,"tr",32),e.k0s()()()()(),e.j41(77,"app-card",33)(78,"app-card-content",34)(79,"div",35),e.nrm(80,"lucide-icon",36),e.j41(81,"div")(82,"h4",37),e.EFF(83,"Pol\xedticas del Sistema"),e.k0s(),e.j41(84,"ul",38)(85,"li",39),e.nrm(86,"lucide-icon",40),e.j41(87,"span"),e.EFF(88,"Las pol\xedticas afectan el comportamiento global del sistema de prescripciones"),e.k0s()(),e.j41(89,"li",39),e.nrm(90,"lucide-icon",40),e.j41(91,"span"),e.EFF(92,"Cambios en pol\xedticas cr\xedticas requieren confirmaci\xf3n del administrador"),e.k0s()(),e.j41(93,"li",39),e.nrm(94,"lucide-icon",40),e.j41(95,"span"),e.EFF(96,"Todas las modificaciones quedan registradas en log de auditor\xeda"),e.k0s()()()()()()(),e.j41(97,"app-side-panel",41),e.bIt("openChange",function(){return t.closeEditDialog()}),e.DNE(98,D,33,7,"div",42),e.j41(99,"div",43)(100,"button",44),e.bIt("click",function(){return t.closeEditDialog()}),e.EFF(101," Cancelar "),e.k0s(),e.j41(102,"button",45),e.bIt("click",function(){return t.savePolicy()}),e.nrm(103,"lucide-icon",46),e.EFF(104," Guardar cambios "),e.k0s()()()()()),2&o&&(e.Y8G("icon",t.settingsIcon)("breadcrumbItems",t.breadcrumbItems),e.R7$(10),e.JRh(t.politicas.length),e.R7$(2),e.Y8G("img",t.settingsIcon),e.R7$(8),e.JRh(t.politicasActivas),e.R7$(2),e.Y8G("img",t.checkCircle2Icon),e.R7$(8),e.JRh(t.categorias.length),e.R7$(2),e.Y8G("img",t.databaseIcon),e.R7$(10),e.Y8G("img",t.clockIcon),e.R7$(5),e.R50("ngModel",t.searchTerm),e.R7$(),e.R50("ngModel",t.categoryFilter),e.R7$(3),e.Y8G("ngForOf",t.categorias),e.R7$(25),e.Y8G("ngForOf",t.filteredPoliticas),e.R7$(4),e.Y8G("img",t.infoIcon),e.R7$(6),e.Y8G("img",t.checkCircle2Icon),e.R7$(4),e.Y8G("img",t.checkCircle2Icon),e.R7$(4),e.Y8G("img",t.checkCircle2Icon),e.R7$(3),e.Y8G("open",t.isEditDialogOpen)("title","Editar Pol\xedtica: "+((null==t.selectedPolitica?null:t.selectedPolitica.name)||""))("description",(null==t.selectedPolitica?null:t.selectedPolitica.description)||"")("showFooter",!0),e.R7$(),e.Y8G("ngIf",t.selectedPolitica),e.R7$(5),e.Y8G("img",t.saveIcon))},dependencies:[g.MD,g.Sq,g.bT,m.iI,l.YN,l.xH,l.y7,l.me,l.Q0,l.Zm,l.wz,l.BC,l.vS,n.flO,n.WGl,f.J,u.ib,u.lM,u.y1,u.l3,h.$],encapsulation:2})}}return a})()}}]);