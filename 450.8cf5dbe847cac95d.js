"use strict";(self.webpackChunkeprescription_angular=self.webpackChunkeprescription_angular||[]).push([[450],{450:(h,r,i)=>{i.r(r),i.d(r,{LoginTestComponent:()=>c});var l=i(177),e=i(4438),g=i(4796),u=i(6283);function d(o,b){if(1&o&&(e.j41(0,"div",8),e.EFF(1),e.k0s()),2&o){const s=e.XpG();e.HbH(s.messageClass),e.R7$(),e.SpI(" ",s.message," ")}}let c=(()=>{class o{constructor(s,a){this.authService=s,this.router=a,this.loading=!1,this.message="",this.messageClass=""}get isAuthenticated(){return this.authService.isAuthenticated()}get currentUser(){return this.authService.currentUser}testLogin(){this.loading=!0,this.message="",this.authService.login("dr.martinez@hospital.cr","Demo123!").subscribe({next:s=>{console.log("Resultado del login:",s),s.success?(this.message=`Login exitoso! Usuario: ${s.userId}, MFA: ${s.requiresMFA}`,this.messageClass="bg-green-100 text-green-800",s.requiresMFA||setTimeout(()=>{console.log("Navegando al dashboard..."),this.router.navigate(["/dashboard"])},1e3)):(this.message=`Error: ${s.error}`,this.messageClass="bg-red-100 text-red-800"),this.loading=!1},error:s=>{console.error("Error en login:",s),this.message="Error de conexi\xf3n",this.messageClass="bg-red-100 text-red-800",this.loading=!1}})}testGaudi(){this.loading=!0,this.message="",this.authService.validateGaudiSignature("1-0456-0789","mock-signature").subscribe({next:s=>{console.log("Resultado GAUDI:",s),s.success?(this.message=`GAUDI exitoso! Usuario: ${s.userId}`,this.messageClass="bg-green-100 text-green-800",setTimeout(()=>{console.log("Navegando al dashboard..."),this.router.navigate(["/dashboard"])},1e3)):(this.message=`Error: ${s.error}`,this.messageClass="bg-red-100 text-red-800"),this.loading=!1},error:s=>{console.error("Error en GAUDI:",s),this.message="Error de conexi\xf3n",this.messageClass="bg-red-100 text-red-800",this.loading=!1}})}logout(){this.authService.logout(),this.message="Logout exitoso",this.messageClass="bg-blue-100 text-blue-800"}goToDashboard(){this.router.navigate(["/dashboard"])}static{this.\u0275fac=function(a){return new(a||o)(e.rXU(g.u),e.rXU(u.Ix))}}static{this.\u0275cmp=e.VBU({type:o,selectors:[["app-login-test"]],standalone:!0,features:[e.aNF],decls:22,vars:7,consts:[[1,"p-4","max-w-md","mx-auto","mt-8"],[1,"text-xl","font-bold","mb-4"],[1,"space-y-4"],[1,"w-full","bg-blue-600","text-white","py-2","px-4","rounded","hover:bg-blue-700","disabled:opacity-50",3,"click","disabled"],[1,"w-full","bg-green-600","text-white","py-2","px-4","rounded","hover:bg-green-700","disabled:opacity-50",3,"click","disabled"],[1,"w-full","bg-red-600","text-white","py-2","px-4","rounded","hover:bg-red-700",3,"click"],[1,"w-full","bg-purple-600","text-white","py-2","px-4","rounded","hover:bg-purple-700",3,"click"],["class","p-3 rounded",3,"class",4,"ngIf"],[1,"p-3","rounded"]],template:function(a,t){1&a&&(e.j41(0,"div",0)(1,"h2",1),e.EFF(2,"Test de Login"),e.k0s(),e.j41(3,"div",2)(4,"div")(5,"p")(6,"strong"),e.EFF(7,"Estado de autenticaci\xf3n:"),e.k0s(),e.EFF(8),e.k0s(),e.j41(9,"p")(10,"strong"),e.EFF(11,"Usuario actual:"),e.k0s(),e.EFF(12),e.k0s()(),e.j41(13,"button",3),e.bIt("click",function(){return t.testLogin()}),e.EFF(14),e.k0s(),e.j41(15,"button",4),e.bIt("click",function(){return t.testGaudi()}),e.EFF(16),e.k0s(),e.j41(17,"button",5),e.bIt("click",function(){return t.logout()}),e.EFF(18," Logout "),e.k0s(),e.j41(19,"button",6),e.bIt("click",function(){return t.goToDashboard()}),e.EFF(20," Ir al Dashboard "),e.k0s(),e.DNE(21,d,2,3,"div",7),e.k0s()()),2&a&&(e.R7$(8),e.SpI(" ",t.isAuthenticated?"Autenticado":"No autenticado",""),e.R7$(4),e.SpI(" ",(null==t.currentUser?null:t.currentUser.email)||"Ninguno",""),e.R7$(),e.Y8G("disabled",t.loading),e.R7$(),e.SpI(" ",t.loading?"Probando...":"Probar Login"," "),e.R7$(),e.Y8G("disabled",t.loading),e.R7$(),e.SpI(" ",t.loading?"Probando...":"Probar GAUDI"," "),e.R7$(5),e.Y8G("ngIf",t.message))},dependencies:[l.MD,l.bT],encapsulation:2})}}return o})()}}]);