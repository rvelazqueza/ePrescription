"use strict";(self.webpackChunkeprescription_angular=self.webpackChunkeprescription_angular||[]).push([[4610],{4610:(v,m,n)=>{n.r(m),n.d(m,{ExportarComponent:()=>E});var p=n(177),d=n(4341),a=n(8516),u=n(8961),e=n(4438),g=n(2957),f=n(1822);function h(r,l){if(1&r&&(e.j41(0,"option",31),e.EFF(1),e.k0s()),2&r){const t=l.$implicit;e.Y8G("value",t),e.R7$(),e.JRh(t)}}function _(r,l){if(1&r&&(e.j41(0,"span",48),e.EFF(1),e.k0s()),2&r){const t=l.$implicit;e.R7$(),e.SpI(" ",t," ")}}function F(r,l){if(1&r){const t=e.RV6();e.j41(0,"div",32)(1,"div",4)(2,"div",33)(3,"div",34)(4,"div",35),e.nrm(5,"lucide-icon",36),e.k0s(),e.j41(6,"div")(7,"h3",37),e.EFF(8),e.k0s(),e.j41(9,"span",38),e.EFF(10),e.k0s()()()(),e.j41(11,"p",39),e.EFF(12),e.k0s(),e.j41(13,"div",40)(14,"div")(15,"label",41),e.EFF(16,"Frecuencia"),e.k0s(),e.j41(17,"p",42),e.EFF(18),e.k0s()(),e.j41(19,"div")(20,"label",41),e.EFF(21,"\xdaltima generaci\xf3n"),e.k0s(),e.j41(22,"p",42),e.EFF(23),e.k0s()(),e.j41(24,"div")(25,"label",41),e.EFF(26,"Tiempo estimado"),e.k0s(),e.j41(27,"p",42),e.EFF(28),e.k0s()(),e.j41(29,"div")(30,"label",41),e.EFF(31,"Tama\xf1o promedio"),e.k0s(),e.j41(32,"p",42),e.EFF(33),e.k0s()()(),e.j41(34,"div",43)(35,"label",7),e.EFF(36,"Formatos disponibles"),e.k0s(),e.j41(37,"div",44),e.DNE(38,_,2,1,"span",45),e.k0s()(),e.j41(39,"button",46),e.bIt("click",function(){const o=e.eBV(t).$implicit,s=e.XpG();return e.Njj(s.openExportDialog(o))}),e.nrm(40,"lucide-icon",47),e.EFF(41," Generar reporte "),e.k0s()()()}if(2&r){const t=l.$implicit,i=e.XpG();e.R7$(5),e.Y8G("img",i.fileTextIcon),e.R7$(3),e.JRh(t.name),e.R7$(2),e.SpI(" ",t.category," "),e.R7$(2),e.JRh(t.description),e.R7$(6),e.JRh(t.frequency),e.R7$(5),e.JRh(t.lastGenerated),e.R7$(5),e.JRh(t.estimatedTime),e.R7$(5),e.JRh(t.size),e.R7$(5),e.Y8G("ngForOf",t.format),e.R7$(2),e.Y8G("img",i.downloadIcon)}}function b(r,l){if(1&r&&(e.j41(0,"option",31),e.EFF(1),e.k0s()),2&r){const t=l.$implicit;e.Y8G("value",t),e.R7$(),e.JRh(t)}}function x(r,l){if(1&r){const t=e.RV6();e.j41(0,"div",49),e.bIt("click",function(){e.eBV(t);const o=e.XpG();return e.Njj(o.closeExportDialog())}),e.j41(1,"div",50),e.bIt("click",function(o){return e.eBV(t),e.Njj(o.stopPropagation())}),e.j41(2,"div",51)(3,"h2",52),e.EFF(4),e.k0s(),e.j41(5,"p",41),e.EFF(6),e.k0s()(),e.j41(7,"div",53)(8,"div")(9,"label",54),e.EFF(10,"Formato de exportaci\xf3n"),e.k0s(),e.j41(11,"select",55),e.mxI("ngModelChange",function(o){e.eBV(t);const s=e.XpG();return e.DH7(s.selectedFormat,o)||(s.selectedFormat=o),e.Njj(o)}),e.DNE(12,b,2,2,"option",27),e.k0s()(),e.j41(13,"div")(14,"label",54),e.EFF(15,"Per\xedodo"),e.k0s(),e.j41(16,"select",55),e.mxI("ngModelChange",function(o){e.eBV(t);const s=e.XpG();return e.DH7(s.selectedPeriod,o)||(s.selectedPeriod=o),e.Njj(o)}),e.j41(17,"option",56),e.EFF(18,"Mes actual"),e.k0s(),e.j41(19,"option",57),e.EFF(20,"Mes anterior"),e.k0s(),e.j41(21,"option",58),e.EFF(22,"\xdaltimos 3 meses"),e.k0s(),e.j41(23,"option",59),e.EFF(24,"A\xf1o en curso"),e.k0s(),e.j41(25,"option",60),e.EFF(26,"Personalizado"),e.k0s()()(),e.j41(27,"div",61)(28,"div",62),e.nrm(29,"lucide-icon",63),e.j41(30,"div",64)(31,"p",65),e.EFF(32,"Informaci\xf3n del reporte"),e.k0s(),e.j41(33,"ul",66)(34,"li"),e.EFF(35),e.k0s(),e.j41(36,"li"),e.EFF(37),e.k0s(),e.j41(38,"li"),e.EFF(39,"\u2022 El reporte se descargar\xe1 autom\xe1ticamente al completarse"),e.k0s()()()()()(),e.j41(40,"div",67)(41,"button",68),e.bIt("click",function(){e.eBV(t);const o=e.XpG();return e.Njj(o.closeExportDialog())}),e.EFF(42," Cancelar "),e.k0s(),e.j41(43,"button",69),e.bIt("click",function(){e.eBV(t);const o=e.XpG();return e.Njj(o.handleExport())}),e.nrm(44,"lucide-icon",47),e.EFF(45," Generar y descargar "),e.k0s()()()()}if(2&r){const t=e.XpG();e.R7$(4),e.SpI("Generar Reporte: ",t.selectedTemplate.name,""),e.R7$(2),e.JRh(t.selectedTemplate.description),e.R7$(5),e.R50("ngModel",t.selectedFormat),e.R7$(),e.Y8G("ngForOf",t.selectedTemplate.format),e.R7$(4),e.R50("ngModel",t.selectedPeriod),e.R7$(13),e.Y8G("img",t.fileTextIcon),e.R7$(6),e.SpI("\u2022 Tiempo estimado: ",t.selectedTemplate.estimatedTime,""),e.R7$(2),e.SpI("\u2022 Tama\xf1o aproximado: ",t.selectedTemplate.size,""),e.R7$(7),e.Y8G("img",t.downloadIcon)}}let E=(()=>{class r{constructor(t,i){this.roleSuggestionService=t,this.roleDemoService=i,this.fileSpreadsheetIcon=a.nmj,this.fileTextIcon=a.iUU,this.fileClockIcon=a.VzH,this.calendarIcon=a.VvS,this.downloadIcon=a.f5X,this.searchIcon=a.vji,this.searchTerm="",this.categoryFilter="all",this.isExportDialogOpen=!1,this.selectedTemplate=null,this.selectedFormat="PDF",this.selectedPeriod="current_month",this.breadcrumbItems=[{label:"Reportes y Anal\xedtica",route:"/reportes"},{label:"Exportaciones"}],this.templates=[{id:"REP-001",name:"Reporte Mensual de Prescripciones",category:"Prescripciones",description:"Estad\xedsticas completas de prescripciones emitidas por per\xedodo",frequency:"Mensual",format:["PDF","Excel","CSV"],lastGenerated:"2024-09-30",estimatedTime:"2-3 min",size:"2.4 MB"},{id:"REP-002",name:"Actividad por M\xe9dico",category:"M\xe9dicos",description:"An\xe1lisis detallado de prescripciones por m\xe9dico",frequency:"Mensual",format:["PDF","Excel"],lastGenerated:"2024-09-30",estimatedTime:"3-4 min",size:"1.8 MB"},{id:"REP-003",name:"Inventario y Stock",category:"Farmacia",description:"Estado actual de inventario, alertas y movimientos",frequency:"Semanal",format:["PDF","Excel"],lastGenerated:"2024-10-01",estimatedTime:"1-2 min",size:"1.2 MB"},{id:"REP-004",name:"Dispensaciones de Farmacia",category:"Farmacia",description:"Reporte completo de dispensaciones realizadas",frequency:"Diario",format:["PDF","Excel","CSV"],lastGenerated:"2024-10-01",estimatedTime:"1-2 min",size:"950 KB"},{id:"REP-005",name:"Alertas Cl\xednicas (CDS)",category:"Seguridad",description:"Registro de alertas cl\xednicas y resoluciones",frequency:"Mensual",format:["PDF","Excel"],lastGenerated:"2024-09-30",estimatedTime:"2-3 min",size:"1.5 MB"},{id:"REP-006",name:"Medicamentos M\xe1s Prescritos",category:"Anal\xedtica",description:"Top de medicamentos por frecuencia de prescripci\xf3n",frequency:"Mensual",format:["PDF","Excel"],lastGenerated:"2024-09-30",estimatedTime:"1-2 min",size:"800 KB"},{id:"REP-007",name:"Auditor\xeda de Accesos",category:"Seguridad",description:"Log de auditor\xeda completo seg\xfan normativas HIPAA",frequency:"Mensual",format:["PDF","CSV"],lastGenerated:"2024-09-30",estimatedTime:"3-5 min",size:"3.2 MB"},{id:"REP-008",name:"Costos de Medicamentos",category:"Financiero",description:"An\xe1lisis de costos por medicamento y total",frequency:"Mensual",format:["PDF","Excel"],lastGenerated:"2024-09-30",estimatedTime:"2-3 min",size:"1.6 MB"}]}ngOnInit(){}ngOnDestroy(){this.roleSubscription&&this.roleSubscription.unsubscribe()}get filteredTemplates(){return this.templates.filter(t=>(t.name.toLowerCase().includes(this.searchTerm.toLowerCase())||t.description.toLowerCase().includes(this.searchTerm.toLowerCase()))&&("all"===this.categoryFilter||t.category===this.categoryFilter))}get categories(){return Array.from(new Set(this.templates.map(t=>t.category)))}openExportDialog(t){this.selectedTemplate=t,this.selectedFormat=t.format[0],this.isExportDialogOpen=!0}closeExportDialog(){this.isExportDialogOpen=!1,this.selectedTemplate=null}handleExport(){this.selectedTemplate&&(alert(`Reporte "${this.selectedTemplate.name}" se est\xe1 generando en formato ${this.selectedFormat}`),this.closeExportDialog())}static{this.\u0275fac=function(i){return new(i||r)(e.rXU(g.i),e.rXU(f.z))}}static{this.\u0275cmp=e.VBU({type:r,selectors:[["app-exportar"]],standalone:!0,features:[e.aNF],decls:56,vars:13,consts:[["title","Exportaciones de Reportes","description","Generaci\xf3n y descarga de reportes en m\xfaltiples formatos","headerGradient","from-purple-600 via-violet-500 to-indigo-600",3,"icon","breadcrumbItems"],[1,"space-y-6"],[1,"grid","grid-cols-1","md:grid-cols-4","gap-4"],[1,"bg-white","rounded-lg","shadow-lg","hover:shadow-xl","transition-all","cursor-pointer","border-l-4","border-l-purple-500"],[1,"p-6"],[1,"flex","items-center","justify-between"],[1,"space-y-1","flex-1"],[1,"text-sm","text-gray-600"],[1,"text-3xl","font-bold","text-gray-900"],[1,"p-3","bg-purple-100","rounded-xl"],[1,"w-8","h-8","text-purple-600",3,"img"],[1,"bg-white","rounded-lg","shadow-lg","hover:shadow-xl","transition-all","cursor-pointer","border-l-4","border-l-blue-500"],[1,"p-3","bg-blue-100","rounded-xl"],[1,"w-8","h-8","text-blue-600",3,"img"],[1,"bg-white","rounded-lg","shadow-lg","hover:shadow-xl","transition-all","cursor-pointer","border-l-4","border-l-green-500"],[1,"p-3","bg-green-100","rounded-xl"],[1,"w-8","h-8","text-green-600",3,"img"],[1,"bg-white","rounded-lg","shadow-lg","hover:shadow-xl","transition-all","cursor-pointer","border-l-4","border-l-orange-500"],[1,"p-3","bg-orange-100","rounded-xl"],[1,"w-8","h-8","text-orange-600",3,"img"],[1,"bg-white","rounded-lg","shadow"],[1,"flex","gap-4"],[1,"flex-1","relative"],[1,"absolute","left-3","top-1/2","transform","-translate-y-1/2","w-4","h-4","text-gray-400",3,"img"],["type","text","placeholder","Buscar reportes...",1,"w-full","pl-10","pr-4","py-2","border","border-gray-300","rounded-md","focus:ring-blue-500","focus:border-blue-500",3,"ngModelChange","ngModel"],[1,"px-4","py-2","border","border-gray-300","rounded-md","focus:ring-blue-500","focus:border-blue-500",3,"ngModelChange","ngModel"],["value","all"],[3,"value",4,"ngFor","ngForOf"],[1,"grid","grid-cols-1","md:grid-cols-2","gap-6"],["class","bg-white rounded-lg shadow hover:shadow-lg transition-shadow",4,"ngFor","ngForOf"],["class","fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",3,"click",4,"ngIf"],[3,"value"],[1,"bg-white","rounded-lg","shadow","hover:shadow-lg","transition-shadow"],[1,"flex","items-start","justify-between","mb-4"],[1,"flex","items-start","gap-3"],[1,"p-2","bg-purple-100","rounded-lg"],[1,"w-6","h-6","text-purple-600",3,"img"],[1,"text-lg","font-semibold"],[1,"inline-flex","items-center","px-2","py-1","rounded-full","text-xs","font-medium","bg-blue-100","text-blue-700","border","border-blue-300","mt-2"],[1,"text-sm","text-gray-600","mb-4"],[1,"grid","grid-cols-2","gap-4","text-sm","mb-4"],[1,"text-gray-600"],[1,"mt-1"],[1,"mb-4"],[1,"flex","gap-2","mt-2"],["class","inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-green-100 text-green-700 border border-green-300",4,"ngFor","ngForOf"],[1,"w-full","flex","items-center","justify-center","gap-2","px-4","py-2","bg-blue-600","text-white","rounded-md","hover:bg-blue-700",3,"click"],[1,"w-4","h-4",3,"img"],[1,"inline-flex","items-center","px-2","py-1","rounded-full","text-xs","font-medium","bg-green-100","text-green-700","border","border-green-300"],[1,"fixed","inset-0","bg-black","bg-opacity-50","flex","items-center","justify-center","z-50",3,"click"],[1,"bg-white","rounded-lg","shadow-xl","max-w-2xl","w-full","mx-4","max-h-[90vh]","overflow-y-auto",3,"click"],[1,"px-6","py-4","border-b","border-gray-200"],[1,"text-xl","font-semibold"],[1,"p-6","space-y-6"],[1,"block","text-sm","font-medium","text-gray-700","mb-2"],[1,"w-full","px-3","py-2","border","border-gray-300","rounded-md","focus:ring-blue-500","focus:border-blue-500",3,"ngModelChange","ngModel"],["value","current_month"],["value","last_month"],["value","last_3_months"],["value","year_to_date"],["value","custom"],[1,"bg-blue-50","border","border-blue-200","rounded-lg","p-4"],[1,"flex","items-start","gap-2"],[1,"w-5","h-5","text-blue-600","flex-shrink-0","mt-0.5",3,"img"],[1,"text-sm"],[1,"font-medium","text-blue-900","mb-1"],[1,"space-y-1","text-blue-700"],[1,"px-6","py-4","border-t","border-gray-200","flex","justify-end","gap-3"],[1,"px-4","py-2","border","border-gray-300","rounded-md","hover:bg-gray-50",3,"click"],[1,"flex","items-center","gap-2","px-4","py-2","bg-blue-600","text-white","rounded-md","hover:bg-blue-700",3,"click"]],template:function(i,o){1&i&&(e.j41(0,"app-page-layout",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5)(6,"div",6)(7,"p",7),e.EFF(8,"Reportes disponibles"),e.k0s(),e.j41(9,"p",8),e.EFF(10),e.k0s()(),e.j41(11,"div",9),e.nrm(12,"lucide-icon",10),e.k0s()()()(),e.j41(13,"div",11)(14,"div",4)(15,"div",5)(16,"div",6)(17,"p",7),e.EFF(18,"Generados hoy"),e.k0s(),e.j41(19,"p",8),e.EFF(20,"12"),e.k0s()(),e.j41(21,"div",12),e.nrm(22,"lucide-icon",13),e.k0s()()()(),e.j41(23,"div",14)(24,"div",4)(25,"div",5)(26,"div",6)(27,"p",7),e.EFF(28,"Formatos"),e.k0s(),e.j41(29,"p",8),e.EFF(30,"3"),e.k0s()(),e.j41(31,"div",15),e.nrm(32,"lucide-icon",16),e.k0s()()()(),e.j41(33,"div",17)(34,"div",4)(35,"div",5)(36,"div",6)(37,"p",7),e.EFF(38,"Programados"),e.k0s(),e.j41(39,"p",8),e.EFF(40,"5"),e.k0s()(),e.j41(41,"div",18),e.nrm(42,"lucide-icon",19),e.k0s()()()()(),e.j41(43,"div",20)(44,"div",4)(45,"div",21)(46,"div",22),e.nrm(47,"lucide-icon",23),e.j41(48,"input",24),e.mxI("ngModelChange",function(c){return e.DH7(o.searchTerm,c)||(o.searchTerm=c),c}),e.k0s()(),e.j41(49,"select",25),e.mxI("ngModelChange",function(c){return e.DH7(o.categoryFilter,c)||(o.categoryFilter=c),c}),e.j41(50,"option",26),e.EFF(51,"Todas las categor\xedas"),e.k0s(),e.DNE(52,h,2,2,"option",27),e.k0s()()()(),e.j41(53,"div",28),e.DNE(54,F,42,10,"div",29),e.k0s(),e.DNE(55,x,46,9,"div",30),e.k0s()()),2&i&&(e.Y8G("icon",o.fileSpreadsheetIcon)("breadcrumbItems",o.breadcrumbItems),e.R7$(10),e.JRh(o.templates.length),e.R7$(2),e.Y8G("img",o.fileTextIcon),e.R7$(10),e.Y8G("img",o.fileClockIcon),e.R7$(10),e.Y8G("img",o.fileSpreadsheetIcon),e.R7$(10),e.Y8G("img",o.calendarIcon),e.R7$(5),e.Y8G("img",o.searchIcon),e.R7$(),e.R50("ngModel",o.searchTerm),e.R7$(),e.R50("ngModel",o.categoryFilter),e.R7$(3),e.Y8G("ngForOf",o.categories),e.R7$(2),e.Y8G("ngForOf",o.filteredTemplates),e.R7$(),e.Y8G("ngIf",o.selectedTemplate&&o.isExportDialogOpen))},dependencies:[p.MD,p.Sq,p.bT,d.YN,d.xH,d.y7,d.me,d.wz,d.BC,d.vS,a.flO,a.WGl,u.J],encapsulation:2})}}return r})()}}]);