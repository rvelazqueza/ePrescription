/* Inventory Views - Utility Classes and Enhanced Accessibility */

/* ===== FOCUS MANAGEMENT UTILITIES ===== */
.focus-trap {
  /* Ensures focus stays within a container */
  position: relative;
}

.focus-trap:focus-within {
  outline: 2px solid #3b82f6;
  outline-offset: 2px;
}

.focus-first:focus {
  /* First focusable element in a group */
  @apply ring-2 ring-blue-500 ring-offset-2;
}

.focus-last:focus {
  /* Last focusable element in a group */
  @apply ring-2 ring-blue-500 ring-offset-2;
}

/* ===== KEYBOARD NAVIGATION HELPERS ===== */
.keyboard-only {
  /* Only visible when navigating with keyboard */
  opacity: 0;
  pointer-events: none;
}

.keyboard-navigation .keyboard-only {
  opacity: 1;
  pointer-events: auto;
}

.tab-indicator {
  /* Visual indicator for tab navigation */
  @apply absolute -top-1 -right-1 w-3 h-3 bg-blue-500 rounded-full opacity-0 transition-opacity;
}

.focus-visible .tab-indicator {
  @apply opacity-100;
}

/* ===== ENHANCED CONTRAST UTILITIES ===== */
.contrast-enhanced {
  /* Enhanced contrast for better readability */
  filter: contrast(1.2);
}

.text-high-contrast {
  /* High contrast text */
  color: #000000;
  text-shadow: 0 0 1px rgba(255, 255, 255, 0.8);
}

.bg-high-contrast {
  /* High contrast background */
  background-color: #ffffff;
  border: 2px solid #000000;
}

/* ===== MOTION PREFERENCES ===== */
.motion-safe {
  /* Only animate if user prefers motion */
  @apply transition-none;
}

@media (prefers-reduced-motion: no-preference) {
  .motion-safe {
    transition: all 200ms ease-in-out;
  }
}

.motion-reduce {
  /* Reduced motion alternative */
  @apply transition-none transform-none;
}

@media (prefers-reduced-motion: reduce) {
  .motion-reduce {
    animation: none !important;
    transition: none !important;
  }
}

/* ===== SCREEN READER UTILITIES ===== */
.sr-describe {
  /* Provides additional context for screen readers */
  @apply sr-only;
}

.sr-describe-visible {
  /* Makes screen reader text visible on focus */
  @apply sr-only;
}

.sr-describe-visible:focus {
  @apply not-sr-only absolute z-50 bg-black text-white p-2 rounded text-sm;
}

.aria-expanded-icon {
  /* Icon that changes based on aria-expanded state */
  @apply transition-transform duration-200;
}

[aria-expanded="true"] .aria-expanded-icon {
  @apply rotate-180;
}

/* ===== TOUCH AND MOBILE ACCESSIBILITY ===== */
.touch-friendly {
  /* Ensures minimum touch target size */
  @apply min-h-[44px] min-w-[44px] flex items-center justify-center;
}

.mobile-accessible {
  /* Mobile-specific accessibility enhancements */
  @apply text-base; /* Prevents zoom on iOS */
}

@media (max-width: 768px) {
  .mobile-accessible {
    min-height: 44px;
    padding: 0.75rem 1rem;
  }
}

/* ===== COLOR BLIND SUPPORT ===== */
.colorblind-pattern-adequate::before {
  content: "✓";
  @apply mr-1 text-green-600 font-bold;
}

.colorblind-pattern-warning::before {
  content: "⚠";
  @apply mr-1 text-yellow-600 font-bold;
}

.colorblind-pattern-critical::before {
  content: "⚠";
  @apply mr-1 text-orange-600 font-bold;
}

.colorblind-pattern-error::before {
  content: "✗";
  @apply mr-1 text-red-600 font-bold;
}

/* ===== LOADING AND SKELETON UTILITIES ===== */
.skeleton-pulse {
  @apply animate-pulse bg-gray-200 rounded;
}

@media (prefers-reduced-motion: reduce) {
  .skeleton-pulse {
    animation: none;
    background-color: #d1d5db;
  }
}

.loading-accessible {
  /* Accessible loading indicator */
  @apply relative;
}

.loading-accessible::after {
  content: "Cargando contenido...";
  @apply sr-only;
}

.loading-accessible[aria-busy="true"] {
  @apply opacity-75 pointer-events-none;
}

/* ===== ERROR AND VALIDATION UTILITIES ===== */
.validation-error {
  /* Accessible error styling */
  @apply border-red-500 bg-red-50 text-red-900;
}

.validation-error:focus {
  @apply ring-2 ring-red-500 ring-offset-2;
}

.validation-success {
  /* Accessible success styling */
  @apply border-green-500 bg-green-50 text-green-900;
}

.validation-success:focus {
  @apply ring-2 ring-green-500 ring-offset-2;
}

.error-icon::before {
  content: "⚠";
  @apply mr-2 text-red-500;
}

.success-icon::before {
  content: "✓";
  @apply mr-2 text-green-500;
}

/* ===== INTERACTIVE STATES ===== */
.interactive-element {
  /* Base interactive element styling */
  @apply cursor-pointer transition-all duration-200;
}

.interactive-element:hover {
  @apply transform scale-105;
}

.interactive-element:active {
  @apply transform scale-95;
}

.interactive-element:focus-visible {
  @apply ring-2 ring-blue-500 ring-offset-2;
}

@media (prefers-reduced-motion: reduce) {
  .interactive-element:hover,
  .interactive-element:active {
    transform: none;
  }
}

/* ===== TOOLTIP UTILITIES ===== */
.tooltip-container {
  @apply relative;
}

.tooltip-content {
  @apply absolute z-50 px-3 py-2 bg-gray-900 text-white text-sm rounded-lg opacity-0 pointer-events-none transition-opacity duration-200;
  bottom: 100%;
  left: 50%;
  transform: translateX(-50%) translateY(-8px);
  max-width: 200px;
  word-wrap: break-word;
}

.tooltip-container:hover .tooltip-content,
.tooltip-container:focus-within .tooltip-content {
  @apply opacity-100;
}

.tooltip-arrow {
  @apply absolute w-2 h-2 bg-gray-900 transform rotate-45;
  top: 100%;
  left: 50%;
  margin-left: -4px;
  margin-top: -4px;
}

/* ===== NOTIFICATION UTILITIES ===== */
.notification-enter {
  @apply opacity-0 transform translate-y-2;
}

.notification-enter-active {
  @apply opacity-100 transform translate-y-0 transition-all duration-300;
}

.notification-exit {
  @apply opacity-100 transform translate-y-0;
}

.notification-exit-active {
  @apply opacity-0 transform -translate-y-2 transition-all duration-300;
}

@media (prefers-reduced-motion: reduce) {
  .notification-enter,
  .notification-enter-active,
  .notification-exit,
  .notification-exit-active {
    transition: none;
    transform: none;
  }
}

/* ===== MODAL UTILITIES ===== */
.modal-enter {
  @apply opacity-0 transform scale-95;
}

.modal-enter-active {
  @apply opacity-100 transform scale-100 transition-all duration-200;
}

.modal-exit {
  @apply opacity-100 transform scale-100;
}

.modal-exit-active {
  @apply opacity-0 transform scale-95 transition-all duration-200;
}

@media (prefers-reduced-motion: reduce) {
  .modal-enter,
  .modal-enter-active,
  .modal-exit,
  .modal-exit-active {
    transition: none;
    transform: none;
    opacity: 1;
  }
}

/* ===== PROGRESS UTILITIES ===== */
.progress-accessible {
  @apply relative w-full bg-gray-200 rounded-full h-2;
}

.progress-bar-accessible {
  @apply bg-blue-600 h-2 rounded-full transition-all duration-300;
}

.progress-text-accessible {
  @apply sr-only;
}

.progress-accessible[aria-valuenow]::after {
  content: attr(aria-valuenow) "% completado";
  @apply sr-only;
}

/* ===== TABLE UTILITIES ===== */
.table-accessible {
  @apply w-full;
}

.table-accessible th {
  @apply text-left font-medium;
}

.table-accessible th[aria-sort] {
  @apply cursor-pointer select-none;
}

.table-accessible th[aria-sort]:hover {
  @apply bg-gray-100;
}

.table-accessible th[aria-sort="ascending"]::after {
  content: " ↑";
  @apply text-blue-600;
}

.table-accessible th[aria-sort="descending"]::after {
  content: " ↓";
  @apply text-blue-600;
}

.table-row-accessible {
  @apply cursor-pointer;
}

.table-row-accessible:hover {
  @apply bg-gray-50;
}

.table-row-accessible:focus {
  @apply outline-none ring-2 ring-blue-500 ring-inset;
}

/* ===== FORM UTILITIES ===== */
.form-accessible {
  @apply space-y-4;
}

.form-group-accessible {
  @apply space-y-2;
}

.form-label-accessible {
  @apply block text-sm font-medium text-gray-700;
}

.form-input-accessible {
  @apply w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500;
}

.form-input-accessible[aria-invalid="true"] {
  @apply border-red-500 focus:ring-red-500 focus:border-red-500;
}

.form-error-accessible {
  @apply text-red-600 text-sm flex items-center gap-1;
}

.form-help-accessible {
  @apply text-gray-500 text-sm;
}

/* ===== BUTTON UTILITIES ===== */
.button-accessible {
  @apply px-4 py-2 rounded-lg font-medium transition-colors focus:outline-none focus:ring-2 focus:ring-offset-2;
}

.button-primary-accessible {
  @apply bg-blue-600 text-white hover:bg-blue-700 focus:ring-blue-500;
}

.button-secondary-accessible {
  @apply bg-gray-100 text-gray-900 hover:bg-gray-200 focus:ring-gray-500;
}

.button-loading-accessible {
  @apply relative;
}

.button-loading-accessible::after {
  content: "Cargando...";
  @apply sr-only;
}

/* ===== RESPONSIVE UTILITIES ===== */
.responsive-text {
  @apply text-sm md:text-base;
}

.responsive-padding {
  @apply p-4 md:p-6;
}

.responsive-margin {
  @apply m-4 md:m-6;
}

.responsive-grid {
  @apply grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4;
}

/* ===== PRINT UTILITIES ===== */
@media print {
  .print-hidden {
    display: none;
  }
  
  .print-visible {
    display: block;
  }
  
  .print-break-before {
    page-break-before: always;
  }
  
  .print-break-after {
    page-break-after: always;
  }
  
  .print-no-break {
    page-break-inside: avoid;
  }
}

.print-visible {
  display: none;
}

/* ===== DARK MODE UTILITIES ===== */
@media (prefers-color-scheme: dark) {
  .dark-mode-text {
    color: #f3f4f6;
  }
  
  .dark-mode-bg {
    background-color: #1f2937;
  }
  
  .dark-mode-border {
    border-color: #4b5563;
  }
}

/* ===== ANIMATION UTILITIES ===== */
.fade-in {
  animation: fadeIn 0.3s ease-in-out;
}

@keyframes fadeIn {
  from { opacity: 0; }
  to { opacity: 1; }
}

.slide-up {
  animation: slideUp 0.3s ease-in-out;
}

@keyframes slideUp {
  from { 
    opacity: 0;
    transform: translateY(20px);
  }
  to { 
    opacity: 1;
    transform: translateY(0);
  }
}

.scale-in {
  animation: scaleIn 0.2s ease-in-out;
}

@keyframes scaleIn {
  from { 
    opacity: 0;
    transform: scale(0.9);
  }
  to { 
    opacity: 1;
    transform: scale(1);
  }
}

@media (prefers-reduced-motion: reduce) {
  .fade-in,
  .slide-up,
  .scale-in {
    animation: none;
  }
}

/* ===== FOCUS MANAGEMENT FOR COMPLEX COMPONENTS ===== */
.focus-within-highlight:focus-within {
  @apply ring-2 ring-blue-500 ring-offset-2 rounded-lg;
}

.focus-group {
  @apply relative;
}

.focus-group:focus-within .focus-group-indicator {
  @apply opacity-100;
}

.focus-group-indicator {
  @apply absolute -inset-1 bg-blue-100 rounded-lg opacity-0 transition-opacity duration-200 pointer-events-none;
}

/* ===== ACCESSIBILITY TESTING UTILITIES ===== */
.a11y-test-landmark {
  /* For testing landmark navigation */
  outline: 2px dashed #ff0000;
  outline-offset: 2px;
}

.a11y-test-heading {
  /* For testing heading hierarchy */
  background-color: rgba(255, 255, 0, 0.3);
}

.a11y-test-focus {
  /* For testing focus order */
  outline: 3px solid #00ff00;
  outline-offset: 2px;
}

/* Only show in development/testing */
.a11y-test-landmark,
.a11y-test-heading,
.a11y-test-focus {
  display: none;
}

/* Uncomment for accessibility testing */
/*
.a11y-test-landmark,
.a11y-test-heading,
.a11y-test-focus {
  display: block;
}
*/