"use strict";(self.webpackChunkeprescription_angular=self.webpackChunkeprescription_angular||[]).push([[8336],{8336:(V,p,d)=>{d.r(p),d.d(p,{AprobacionesComponent:()=>S});var u=d(177),l=d(4341),s=d(8516),m=d(8961),e=d(4438);function g(i,r){if(1&i&&(e.j41(0,"span",37),e.EFF(1),e.k0s()),2&i){const t=e.XpG().$implicit;e.R7$(),e.SpI(" ",t.count," ")}}function f(i,r){if(1&i){const t=e.RV6();e.j41(0,"button",35),e.bIt("click",function(){const n=e.eBV(t).$implicit,c=e.XpG();return e.Njj(c.setActiveTab(n.key))}),e.EFF(1),e.DNE(2,g,2,1,"span",36),e.k0s()}if(2&i){const t=r.$implicit,o=e.XpG();e.HbH(o.getTabClass(t.key)),e.R7$(),e.SpI(" ",t.label," "),e.R7$(),e.Y8G("ngIf",t.count>0)}}function _(i,r){if(1&i&&(e.j41(0,"div",38),e.nrm(1,"lucide-icon",39),e.j41(2,"p",40),e.EFF(3),e.k0s()()),2&i){const t=e.XpG();e.R7$(),e.Y8G("img",t.alertCircleIcon),e.R7$(2),e.SpI("No hay solicitudes ","all"!==t.activeTab?t.getTabLabel(t.activeTab):""," en este momento.")}}function b(i,r){if(1&i&&e.nrm(0,"lucide-icon",61),2&i){const t=e.XpG(3);e.Y8G("img",t.checkCircle2Icon)}}function x(i,r){if(1&i&&e.nrm(0,"lucide-icon",61),2&i){const t=e.XpG(4);e.Y8G("img",t.checkCircle2Icon)}}function h(i,r){if(1&i&&(e.j41(0,"div",49),e.nrm(1,"lucide-icon",50),e.EFF(2),e.DNE(3,x,1,1,"lucide-icon",51),e.k0s()),2&i){const t=e.XpG().$implicit,o=e.XpG(2);e.R7$(),e.Y8G("img",o.phoneIcon),e.R7$(),e.SpI(" ",t.phone," "),e.R7$(),e.Y8G("ngIf",t.phoneVerified)}}function v(i,r){if(1&i&&(e.j41(0,"div",53),e.nrm(1,"lucide-icon",50),e.EFF(2),e.k0s()),2&i){const t=e.XpG().$implicit,o=e.XpG(2);e.R7$(),e.Y8G("img","approved"===t.status?o.checkCircle2Icon:o.xCircleIcon),e.R7$(),e.Lme(" ","approved"===t.status?"Aprobada":"Rechazada",": ",o.formatDate(t.reviewedAt)," ")}}function R(i,r){if(1&i&&(e.j41(0,"div",62)(1,"p",63)(2,"strong"),e.EFF(3,"Motivo de rechazo:"),e.k0s(),e.EFF(4),e.k0s()()),2&i){const t=e.XpG().$implicit;e.R7$(4),e.SpI(" ",t.rejectionReason,"")}}function k(i,r){if(1&i){const t=e.RV6();e.j41(0,"button",64),e.bIt("click",function(){e.eBV(t);const n=e.XpG().$implicit,c=e.XpG(2);return e.Njj(c.approveRequest(n))}),e.nrm(1,"lucide-icon",58),e.EFF(2," Aprobar "),e.k0s()}if(2&i){const t=e.XpG(3);e.R7$(),e.Y8G("img",t.checkCircle2Icon)}}function F(i,r){if(1&i){const t=e.RV6();e.j41(0,"button",65),e.bIt("click",function(){e.eBV(t);const n=e.XpG().$implicit,c=e.XpG(2);return e.Njj(c.rejectRequest(n))}),e.nrm(1,"lucide-icon",58),e.EFF(2," Rechazar "),e.k0s()}if(2&i){const t=e.XpG(3);e.R7$(),e.Y8G("img",t.xCircleIcon)}}function j(i,r){if(1&i){const t=e.RV6();e.j41(0,"div",43)(1,"div",44)(2,"div",45)(3,"div",46)(4,"h4",47),e.EFF(5),e.k0s(),e.j41(6,"span"),e.EFF(7),e.k0s(),e.j41(8,"span"),e.EFF(9),e.k0s()(),e.j41(10,"div",48)(11,"div",49),e.nrm(12,"lucide-icon",50),e.EFF(13),e.k0s(),e.j41(14,"div",49),e.nrm(15,"lucide-icon",50),e.EFF(16),e.DNE(17,b,1,1,"lucide-icon",51),e.k0s(),e.DNE(18,h,4,3,"div",52),e.j41(19,"div",49),e.nrm(20,"lucide-icon",50),e.EFF(21),e.k0s(),e.j41(22,"div",53),e.nrm(23,"lucide-icon",50),e.EFF(24),e.k0s(),e.DNE(25,v,3,3,"div",54)(26,R,5,1,"div",55),e.k0s()(),e.j41(27,"div",56)(28,"button",57),e.bIt("click",function(){const n=e.eBV(t).$implicit,c=e.XpG(2);return e.Njj(c.viewDetails(n))}),e.nrm(29,"lucide-icon",58),e.EFF(30," Ver detalles "),e.k0s(),e.DNE(31,k,3,1,"button",59)(32,F,3,1,"button",60),e.k0s()()()}if(2&i){const t=r.$implicit,o=e.XpG(2);e.R7$(5),e.JRh(t.fullName),e.R7$(),e.HbH(o.getStatusBadgeClass(t.status)),e.R7$(),e.SpI(" ",o.getStatusText(t.status)," "),e.R7$(),e.HbH(o.getRiskBadgeClass(t.riskScore)),e.R7$(),e.SpI(" ",o.getRiskText(t.riskScore)," "),e.R7$(3),e.Y8G("img",o.fileTextIcon),e.R7$(),e.Lme(" ",t.idType," ",t.idNumber," "),e.R7$(2),e.Y8G("img",o.mailIcon),e.R7$(),e.SpI(" ",t.email," "),e.R7$(),e.Y8G("ngIf",t.emailVerified),e.R7$(),e.Y8G("ngIf",t.phone),e.R7$(2),e.Y8G("img",o.shieldIcon),e.R7$(),e.SpI(" ","password"===t.preferredAuthMethod?"Usuario + Contrase\xf1a":"Firma Digital BCCR"," "),e.R7$(2),e.Y8G("img",o.clockIcon),e.R7$(),e.SpI(" Enviada: ",o.formatDate(t.submittedAt)," "),e.R7$(),e.Y8G("ngIf",t.reviewedAt),e.R7$(),e.Y8G("ngIf",t.rejectionReason),e.R7$(3),e.Y8G("img",o.eyeIcon),e.R7$(2),e.Y8G("ngIf","pending"===t.status),e.R7$(),e.Y8G("ngIf","pending"===t.status)}}function y(i,r){if(1&i&&(e.j41(0,"div",41),e.DNE(1,j,33,23,"div",42),e.k0s()),2&i){const t=e.XpG();e.R7$(),e.Y8G("ngForOf",t.filteredRequests)}}function I(i,r){if(1&i&&e.nrm(0,"lucide-icon",61),2&i){const t=e.XpG(3);e.Y8G("img",t.checkCircle2Icon)}}function C(i,r){if(1&i&&e.nrm(0,"lucide-icon",61),2&i){const t=e.XpG(4);e.Y8G("img",t.checkCircle2Icon)}}function E(i,r){if(1&i&&(e.j41(0,"div")(1,"label",80),e.EFF(2,"Tel\xe9fono"),e.k0s(),e.j41(3,"p",82),e.EFF(4),e.DNE(5,C,1,1,"lucide-icon",51),e.k0s()()),2&i){const t=e.XpG(3);e.R7$(4),e.SpI(" ",t.selectedRequest.phone," "),e.R7$(),e.Y8G("ngIf",t.selectedRequest.phoneVerified)}}function A(i,r){if(1&i&&(e.j41(0,"p",92)(1,"strong"),e.EFF(2,"Motivo:"),e.k0s(),e.EFF(3),e.k0s()),2&i){const t=e.XpG(4);e.R7$(3),e.SpI(" ",t.selectedRequest.rejectionReason," ")}}function w(i,r){if(1&i&&(e.j41(0,"div")(1,"div",89),e.nrm(2,"lucide-icon",50),e.j41(3,"span",90),e.EFF(4," Revisada por "),e.j41(5,"strong"),e.EFF(6,"Administrador"),e.k0s(),e.EFF(7),e.k0s()(),e.DNE(8,A,4,1,"p",91),e.k0s()),2&i){const t=e.XpG(3);e.HbH("approved"===t.selectedRequest.status?"p-4 bg-green-50 border border-green-200 rounded-lg":"p-4 bg-red-50 border border-red-200 rounded-lg"),e.R7$(2),e.Y8G("img",t.alertCircleIcon),e.R7$(5),e.SpI(" el ",t.formatDate(t.selectedRequest.reviewedAt)," "),e.R7$(),e.Y8G("ngIf",t.selectedRequest.rejectionReason)}}function G(i,r){if(1&i&&(e.j41(0,"div",78)(1,"div",41)(2,"div",79)(3,"div")(4,"label",80),e.EFF(5,"Nombre completo"),e.k0s(),e.j41(6,"p",81),e.EFF(7),e.k0s()(),e.j41(8,"div")(9,"label",80),e.EFF(10,"Identificaci\xf3n"),e.k0s(),e.j41(11,"p",81),e.EFF(12),e.k0s()(),e.j41(13,"div")(14,"label",80),e.EFF(15,"Correo electr\xf3nico"),e.k0s(),e.j41(16,"p",82),e.EFF(17),e.DNE(18,I,1,1,"lucide-icon",51),e.k0s()(),e.DNE(19,E,6,2,"div",83),e.j41(20,"div")(21,"label",80),e.EFF(22,"M\xe9todo de autenticaci\xf3n"),e.k0s(),e.j41(23,"p",81),e.EFF(24),e.k0s()(),e.j41(25,"div")(26,"label",80),e.EFF(27,"Puntuaci\xf3n de riesgo"),e.k0s(),e.j41(28,"p",84)(29,"span"),e.EFF(30),e.k0s()()(),e.j41(31,"div")(32,"label",80),e.EFF(33,"Fecha de solicitud"),e.k0s(),e.j41(34,"p",81),e.EFF(35),e.k0s()(),e.j41(36,"div")(37,"label",80),e.EFF(38,"Estado"),e.k0s(),e.j41(39,"p",84)(40,"span"),e.EFF(41),e.k0s()()()(),e.j41(42,"div",85)(43,"label",80),e.EFF(44,"Verificaciones"),e.k0s(),e.j41(45,"div",86)(46,"span"),e.nrm(47,"lucide-icon",87),e.EFF(48),e.k0s(),e.j41(49,"span"),e.nrm(50,"lucide-icon",87),e.EFF(51),e.k0s(),e.j41(52,"span"),e.nrm(53,"lucide-icon",87),e.EFF(54," T\xe9rminos aceptados "),e.k0s(),e.j41(55,"span"),e.nrm(56,"lucide-icon",87),e.EFF(57," Privacidad aceptada "),e.k0s()()(),e.DNE(58,w,9,5,"div",88),e.k0s()()),2&i){const t=e.XpG(2);e.R7$(7),e.JRh(t.selectedRequest.fullName),e.R7$(5),e.Lme("",t.selectedRequest.idType," ",t.selectedRequest.idNumber,""),e.R7$(5),e.SpI(" ",t.selectedRequest.email," "),e.R7$(),e.Y8G("ngIf",t.selectedRequest.emailVerified),e.R7$(),e.Y8G("ngIf",t.selectedRequest.phone),e.R7$(5),e.JRh("password"===t.selectedRequest.preferredAuthMethod?"Usuario y Contrase\xf1a":"Firma Digital BCCR"),e.R7$(5),e.HbH(t.getRiskBadgeClass(t.selectedRequest.riskScore)),e.R7$(),e.SpI(" ",t.getRiskText(t.selectedRequest.riskScore)," "),e.R7$(5),e.JRh(t.formatDate(t.selectedRequest.submittedAt)),e.R7$(5),e.HbH(t.getStatusBadgeClass(t.selectedRequest.status)),e.R7$(),e.SpI(" ",t.getStatusText(t.selectedRequest.status)," "),e.R7$(5),e.HbH(t.selectedRequest.emailVerified?"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-green-100 text-green-800":"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-gray-100 text-gray-800"),e.R7$(),e.Y8G("img",t.selectedRequest.emailVerified?t.checkCircle2Icon:t.xCircleIcon),e.R7$(),e.SpI(" Email ",t.selectedRequest.emailVerified?"verificado":"no verificado"," "),e.R7$(),e.HbH(t.selectedRequest.phoneVerified?"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-green-100 text-green-800":"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-gray-100 text-gray-800"),e.R7$(),e.Y8G("img",t.selectedRequest.phoneVerified?t.checkCircle2Icon:t.xCircleIcon),e.R7$(),e.SpI(" Tel\xe9fono ",t.selectedRequest.phoneVerified?"verificado":"no verificado"," "),e.R7$(),e.HbH(t.selectedRequest.termsAccepted?"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-green-100 text-green-800":"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-gray-100 text-gray-800"),e.R7$(),e.Y8G("img",t.selectedRequest.termsAccepted?t.checkCircle2Icon:t.xCircleIcon),e.R7$(2),e.HbH(t.selectedRequest.privacyAccepted?"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-green-100 text-green-800":"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-gray-100 text-gray-800"),e.R7$(),e.Y8G("img",t.selectedRequest.privacyAccepted?t.checkCircle2Icon:t.xCircleIcon),e.R7$(2),e.Y8G("ngIf",t.selectedRequest.reviewedAt)}}function $(i,r){if(1&i){const t=e.RV6();e.j41(0,"button",93),e.bIt("click",function(){e.eBV(t);const n=e.XpG(2);return e.Njj(n.approveFromModal())}),e.nrm(1,"lucide-icon",58),e.EFF(2," Aprobar "),e.k0s()}if(2&i){const t=e.XpG(2);e.R7$(),e.Y8G("img",t.checkCircle2Icon)}}function T(i,r){if(1&i){const t=e.RV6();e.j41(0,"button",94),e.bIt("click",function(){e.eBV(t);const n=e.XpG(2);return e.Njj(n.rejectFromModal())}),e.nrm(1,"lucide-icon",58),e.EFF(2," Rechazar "),e.k0s()}if(2&i){const t=e.XpG(2);e.R7$(),e.Y8G("img",t.xCircleIcon)}}function q(i,r){if(1&i){const t=e.RV6();e.j41(0,"div",66),e.bIt("click",function(){e.eBV(t);const n=e.XpG();return e.Njj(n.closeDetailModal())}),e.j41(1,"div",67),e.bIt("click",function(n){return e.eBV(t),e.Njj(n.stopPropagation())}),e.j41(2,"div",68)(3,"div",46)(4,"div",69),e.nrm(5,"lucide-icon",70),e.k0s(),e.j41(6,"div")(7,"h3",31),e.EFF(8,"Detalles de la solicitud"),e.k0s(),e.j41(9,"p",6),e.EFF(10,"Informaci\xf3n completa del solicitante"),e.k0s()()(),e.j41(11,"button",71),e.bIt("click",function(){e.eBV(t);const n=e.XpG();return e.Njj(n.closeDetailModal())}),e.nrm(12,"lucide-icon",72),e.k0s()(),e.DNE(13,G,59,29,"div",73),e.j41(14,"div",74)(15,"button",75),e.bIt("click",function(){e.eBV(t);const n=e.XpG();return e.Njj(n.closeDetailModal())}),e.EFF(16," Cerrar "),e.k0s(),e.DNE(17,$,3,1,"button",76)(18,T,3,1,"button",77),e.k0s()()()}if(2&i){const t=e.XpG();e.R7$(5),e.Y8G("img",t.userCheckIcon),e.R7$(7),e.Y8G("img",t.xCircleIcon),e.R7$(),e.Y8G("ngIf",t.selectedRequest),e.R7$(4),e.Y8G("ngIf","pending"===(null==t.selectedRequest?null:t.selectedRequest.status)),e.R7$(),e.Y8G("ngIf","pending"===(null==t.selectedRequest?null:t.selectedRequest.status))}}function M(i,r){if(1&i&&(e.j41(0,"div",102)(1,"div",89),e.nrm(2,"lucide-icon",61),e.j41(3,"span",103),e.EFF(4," Se enviar\xe1 un correo a "),e.j41(5,"strong"),e.EFF(6),e.k0s(),e.EFF(7," notificando que su cuenta ha sido aprobada y puede acceder al sistema. "),e.k0s()()()),2&i){const t=e.XpG(2);e.R7$(2),e.Y8G("img",t.checkCircle2Icon),e.R7$(4),e.JRh(t.selectedRequest.email)}}function D(i,r){if(1&i){const t=e.RV6();e.j41(0,"div",66),e.bIt("click",function(){e.eBV(t);const n=e.XpG();return e.Njj(n.closeApproveModal())}),e.j41(1,"div",95),e.bIt("click",function(n){return e.eBV(t),e.Njj(n.stopPropagation())}),e.j41(2,"div",17)(3,"div",96)(4,"div",97),e.nrm(5,"lucide-icon",98),e.k0s(),e.j41(6,"div")(7,"h3",31),e.EFF(8,"Aprobar solicitud"),e.k0s(),e.j41(9,"p",6),e.EFF(10,"\xbfConfirmas que deseas aprobar esta solicitud de registro?"),e.k0s()()(),e.DNE(11,M,8,2,"div",99),e.j41(12,"div",100)(13,"button",75),e.bIt("click",function(){e.eBV(t);const n=e.XpG();return e.Njj(n.closeApproveModal())}),e.EFF(14," Cancelar "),e.k0s(),e.j41(15,"button",101),e.bIt("click",function(){e.eBV(t);const n=e.XpG();return e.Njj(n.confirmApprove())}),e.EFF(16," Confirmar aprobaci\xf3n "),e.k0s()()()()()}if(2&i){const t=e.XpG();e.R7$(5),e.Y8G("img",t.checkCircle2Icon),e.R7$(6),e.Y8G("ngIf",t.selectedRequest)}}function Y(i,r){if(1&i&&(e.j41(0,"div",112)(1,"div",113),e.nrm(2,"lucide-icon",114),e.j41(3,"span",63),e.EFF(4," Se enviar\xe1 un correo a "),e.j41(5,"strong"),e.EFF(6),e.k0s(),e.EFF(7," con el motivo del rechazo. "),e.k0s()()()),2&i){const t=e.XpG(2);e.R7$(2),e.Y8G("img",t.xCircleIcon),e.R7$(4),e.JRh(t.selectedRequest.email)}}function N(i,r){if(1&i){const t=e.RV6();e.j41(0,"div",66),e.bIt("click",function(){e.eBV(t);const n=e.XpG();return e.Njj(n.closeRejectModal())}),e.j41(1,"div",95),e.bIt("click",function(n){return e.eBV(t),e.Njj(n.stopPropagation())}),e.j41(2,"div",17)(3,"div",96)(4,"div",104),e.nrm(5,"lucide-icon",105),e.k0s(),e.j41(6,"div")(7,"h3",31),e.EFF(8,"Rechazar solicitud"),e.k0s(),e.j41(9,"p",6),e.EFF(10,"Proporciona un motivo claro del rechazo"),e.k0s()()(),e.j41(11,"div",41)(12,"div")(13,"label",106),e.EFF(14,"Motivo del rechazo *"),e.k0s(),e.j41(15,"textarea",107),e.mxI("ngModelChange",function(n){e.eBV(t);const c=e.XpG();return e.DH7(c.rejectionReason,n)||(c.rejectionReason=n),e.Njj(n)}),e.EFF(16,"              "),e.k0s(),e.j41(17,"p",108),e.EFF(18,"Este mensaje ser\xe1 enviado al solicitante"),e.k0s()(),e.DNE(19,Y,8,2,"div",109),e.k0s(),e.j41(20,"div",110)(21,"button",75),e.bIt("click",function(){e.eBV(t);const n=e.XpG();return e.Njj(n.closeRejectModal())}),e.EFF(22," Cancelar "),e.k0s(),e.j41(23,"button",111),e.bIt("click",function(){e.eBV(t);const n=e.XpG();return e.Njj(n.confirmReject())}),e.EFF(24," Confirmar rechazo "),e.k0s()()()()()}if(2&i){const t=e.XpG();e.R7$(5),e.Y8G("img",t.xCircleIcon),e.R7$(10),e.R50("ngModel",t.rejectionReason),e.R7$(4),e.Y8G("ngIf",t.selectedRequest),e.R7$(4),e.Y8G("disabled",!t.rejectionReason.trim())}}let S=(()=>{class i{constructor(){this.userCheckIcon=s.MWd,this.searchIcon=s.vji,this.filterIcon=s.dJT,this.clockIcon=s.zD7,this.checkCircle2Icon=s.Jly,this.xCircleIcon=s.Jpz,this.alertCircleIcon=s.RIJ,this.mailIcon=s.gE4,this.phoneIcon=s.bcf,this.shieldIcon=s.ekZ,this.fileTextIcon=s.iUU,this.eyeIcon=s.kU3,this.breadcrumbItems=[{label:"Seguridad y usuarios",route:"/seguridad"},{label:"Aprobaci\xf3n de usuarios",route:"/seguridad/aprobaciones"}],this.searchTerm="",this.statusFilter="pending",this.activeTab="pending",this.showDetailModal=!1,this.showApproveModal=!1,this.showRejectModal=!1,this.selectedRequest=null,this.rejectionReason="",this.registrationRequests=[{id:"REQ-001",fullName:"Dr. Luis Hern\xe1ndez Quesada",email:"luis.hernandez@medico.cr",phone:"+506 8666-5555",idType:"C\xe9dula",idNumber:"1-0678-0901",preferredAuthMethod:"password",status:"pending",submittedAt:"2025-10-05 10:45",emailVerified:!0,phoneVerified:!0,termsAccepted:!0,privacyAccepted:!0,riskScore:.2},{id:"REQ-002",fullName:"Dra. Mar\xeda C\xe9spedes Mora",email:"maria.cespedes@clinica.cr",phone:"+506 8555-4444",idType:"C\xe9dula",idNumber:"1-0789-0123",preferredAuthMethod:"digital-signature",status:"pending",submittedAt:"2025-10-06 03:30",emailVerified:!0,phoneVerified:!1,termsAccepted:!0,privacyAccepted:!0,riskScore:.4},{id:"REQ-003",fullName:"Dr. Carlos Rodr\xedguez Vega",email:"carlos.rodriguez@hospital.cr",phone:"+506 8777-6666",idType:"C\xe9dula",idNumber:"1-0890-1234",preferredAuthMethod:"password",status:"approved",submittedAt:"2025-10-03 14:20",reviewedAt:"2025-10-04 09:15",reviewedBy:"admin-001",emailVerified:!0,phoneVerified:!0,termsAccepted:!0,privacyAccepted:!0,riskScore:.1},{id:"REQ-004",fullName:"Dra. Ana Jim\xe9nez Castro",email:"ana.jimenez@medico.cr",phone:"+506 8999-8888",idType:"C\xe9dula",idNumber:"1-0901-2345",preferredAuthMethod:"digital-signature",status:"rejected",submittedAt:"2025-10-02 16:45",reviewedAt:"2025-10-03 11:30",reviewedBy:"admin-001",rejectionReason:"Documentaci\xf3n incompleta - No se pudo verificar n\xfamero de colegiado",emailVerified:!1,phoneVerified:!1,termsAccepted:!0,privacyAccepted:!0,riskScore:.8}]}ngOnInit(){}get tabs(){return[{key:"all",label:"Todas",count:this.registrationRequests.length},{key:"pending",label:"Pendientes",count:this.pendingCount},{key:"approved",label:"Aprobadas",count:this.approvedCount},{key:"rejected",label:"Rechazadas",count:this.rejectedCount}]}get pendingCount(){return this.registrationRequests.filter(t=>"pending"===t.status).length}get approvedCount(){return this.registrationRequests.filter(t=>"approved"===t.status).length}get rejectedCount(){return this.registrationRequests.filter(t=>"rejected"===t.status).length}get filteredRequests(){return this.registrationRequests.filter(t=>{const o="all"===this.activeTab||t.status===this.activeTab,n=t.fullName.toLowerCase().includes(this.searchTerm.toLowerCase())||t.email.toLowerCase().includes(this.searchTerm.toLowerCase())||t.idNumber.includes(this.searchTerm);return o&&n})}setActiveTab(t){this.activeTab=t,this.statusFilter=t}getTabClass(t){return this.activeTab===t?"border-blue-600 text-blue-600 border-b-2 py-4 px-1 text-sm font-medium":"border-transparent text-gray-500 hover:text-gray-700 py-4 px-1 text-sm font-medium cursor-pointer"}getTabLabel(t){switch(t){case"pending":return"pendientes";case"approved":return"aprobadas";case"rejected":return"rechazadas";default:return""}}getStatusBadgeClass(t){switch(t){case"pending":return"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-orange-100 text-orange-800 border border-orange-200";case"approved":return"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-green-100 text-green-800 border border-green-200";case"rejected":return"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-red-100 text-red-800 border border-red-200";default:return"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-gray-100 text-gray-800 border border-gray-200"}}getStatusText(t){switch(t){case"pending":return"Pendiente";case"approved":return"Aprobada";case"rejected":return"Rechazada";default:return"Desconocido"}}getRiskBadgeClass(t){return t<.3?"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-green-100 text-green-800 border border-green-200":t<.6?"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-yellow-100 text-yellow-800 border border-yellow-200":"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-red-100 text-red-800 border border-red-200"}getRiskText(t){return t<.3?"Bajo riesgo":t<.6?"Riesgo medio":"Alto riesgo"}formatDate(t){return new Date(t).toLocaleString("es-CR",{day:"2-digit",month:"short",year:"numeric",hour:"2-digit",minute:"2-digit"})}viewDetails(t){this.selectedRequest=t,this.showDetailModal=!0}closeDetailModal(){this.showDetailModal=!1,this.selectedRequest=null}approveRequest(t){this.selectedRequest=t,this.showApproveModal=!0}approveFromModal(){this.closeDetailModal(),this.showApproveModal=!0}closeApproveModal(){this.showApproveModal=!1,this.selectedRequest=null}confirmApprove(){if(this.selectedRequest){this.selectedRequest.status="approved",this.selectedRequest.reviewedAt=(new Date).toISOString().slice(0,16).replace("T"," "),this.selectedRequest.reviewedBy="admin-001";const t=this.registrationRequests.findIndex(o=>o.id===this.selectedRequest.id);-1!==t&&(this.registrationRequests[t]={...this.selectedRequest}),alert(`Solicitud aprobada. Se ha enviado un correo de notificaci\xf3n a ${this.selectedRequest.email}`),this.closeApproveModal()}}rejectRequest(t){this.selectedRequest=t,this.rejectionReason="",this.showRejectModal=!0}rejectFromModal(){this.closeDetailModal(),this.rejectionReason="",this.showRejectModal=!0}closeRejectModal(){this.showRejectModal=!1,this.selectedRequest=null,this.rejectionReason=""}confirmReject(){if(this.selectedRequest&&this.rejectionReason.trim()){this.selectedRequest.status="rejected",this.selectedRequest.reviewedAt=(new Date).toISOString().slice(0,16).replace("T"," "),this.selectedRequest.reviewedBy="admin-001",this.selectedRequest.rejectionReason=this.rejectionReason;const t=this.registrationRequests.findIndex(o=>o.id===this.selectedRequest.id);-1!==t&&(this.registrationRequests[t]={...this.selectedRequest}),alert(`Solicitud rechazada. Se ha enviado un correo de notificaci\xf3n a ${this.selectedRequest.email}`),this.closeRejectModal()}}static{this.\u0275fac=function(o){return new(o||i)}}static{this.\u0275cmp=e.VBU({type:i,selectors:[["app-aprobaciones"]],standalone:!0,features:[e.aNF],decls:60,vars:23,consts:[[3,"title","description","icon","breadcrumbItems","headerGradient"],[1,"space-y-6"],[1,"grid","grid-cols-1","md:grid-cols-3","gap-4"],[1,"bg-white","rounded-lg","shadow-lg","hover:shadow-xl","transition-all","cursor-pointer","border-l-4","border-l-orange-500","p-6"],[1,"flex","items-center","justify-between"],[1,"space-y-1","flex-1"],[1,"text-sm","text-gray-600"],[1,"text-3xl","font-bold","text-gray-900"],[1,"p-3","bg-orange-100","rounded-xl"],[1,"w-8","h-8","text-orange-600",3,"img"],[1,"bg-white","rounded-lg","shadow-lg","hover:shadow-xl","transition-all","cursor-pointer","border-l-4","border-l-green-500","p-6"],[1,"p-3","bg-green-100","rounded-xl"],[1,"w-8","h-8","text-green-600",3,"img"],[1,"bg-white","rounded-lg","shadow-lg","hover:shadow-xl","transition-all","cursor-pointer","border-l-4","border-l-red-500","p-6"],[1,"p-3","bg-red-100","rounded-xl"],[1,"w-8","h-8","text-red-600",3,"img"],[1,"bg-white","rounded-lg","shadow-lg"],[1,"p-6"],[1,"flex","gap-4","flex-wrap"],[1,"flex-1","min-w-[300px]","relative"],[1,"absolute","left-3","top-1/2","transform","-translate-y-1/2","w-4","h-4","text-gray-400",3,"img"],["type","text","placeholder","Buscar por nombre, correo o identificaci\xf3n...",1,"w-full","pl-10","pr-4","py-2","border","border-gray-300","rounded-lg","focus:outline-none","focus:ring-2","focus:ring-blue-500","focus:border-blue-500",3,"ngModelChange","ngModel"],[1,"px-4","py-2","border","border-gray-300","rounded-lg","focus:outline-none","focus:ring-2","focus:ring-blue-500","focus:border-blue-500",3,"ngModelChange","ngModel"],["value","all"],["value","pending"],["value","approved"],["value","rejected"],[1,"border-b","border-gray-200"],[1,"flex","space-x-8","px-6"],[3,"class","click",4,"ngFor","ngForOf"],[1,"mb-4"],[1,"text-lg","font-semibold","text-gray-900"],["class","text-center py-8",4,"ngIf"],["class","space-y-4",4,"ngIf"],["class","fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50",3,"click",4,"ngIf"],[3,"click"],["class","ml-2 inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-gray-100 text-gray-800",4,"ngIf"],[1,"ml-2","inline-flex","items-center","px-2.5","py-0.5","rounded-full","text-xs","font-medium","bg-gray-100","text-gray-800"],[1,"text-center","py-8"],[1,"w-12","h-12","text-gray-400","mx-auto","mb-4",3,"img"],[1,"text-gray-500"],[1,"space-y-4"],["class","border border-gray-200 rounded-lg p-6 hover:border-blue-300 transition-colors",4,"ngFor","ngForOf"],[1,"border","border-gray-200","rounded-lg","p-6","hover:border-blue-300","transition-colors"],[1,"flex","items-start","justify-between","gap-4"],[1,"flex-1","space-y-3"],[1,"flex","items-center","gap-3"],[1,"font-semibold","text-gray-900"],[1,"grid","grid-cols-2","gap-3","text-sm"],[1,"flex","items-center","gap-2","text-gray-600"],[1,"w-4","h-4",3,"img"],["class","w-4 h-4 text-green-600",3,"img",4,"ngIf"],["class","flex items-center gap-2 text-gray-600",4,"ngIf"],[1,"flex","items-center","gap-2","text-gray-600","col-span-2"],["class","flex items-center gap-2 text-gray-600 col-span-2",4,"ngIf"],["class","col-span-2 p-3 bg-red-50 border border-red-200 rounded-lg",4,"ngIf"],[1,"flex","flex-col","gap-2"],[1,"inline-flex","items-center","px-3","py-2","border","border-gray-300","rounded-md","text-sm","font-medium","text-gray-700","bg-white","hover:bg-gray-50","focus:outline-none","focus:ring-2","focus:ring-blue-500",3,"click"],[1,"w-4","h-4","mr-2",3,"img"],["class","inline-flex items-center px-3 py-2 bg-green-600 text-white rounded-md text-sm font-medium hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-green-500",3,"click",4,"ngIf"],["class","inline-flex items-center px-3 py-2 bg-red-600 text-white rounded-md text-sm font-medium hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-red-500",3,"click",4,"ngIf"],[1,"w-4","h-4","text-green-600",3,"img"],[1,"col-span-2","p-3","bg-red-50","border","border-red-200","rounded-lg"],[1,"text-sm","text-red-800"],[1,"inline-flex","items-center","px-3","py-2","bg-green-600","text-white","rounded-md","text-sm","font-medium","hover:bg-green-700","focus:outline-none","focus:ring-2","focus:ring-green-500",3,"click"],[1,"inline-flex","items-center","px-3","py-2","bg-red-600","text-white","rounded-md","text-sm","font-medium","hover:bg-red-700","focus:outline-none","focus:ring-2","focus:ring-red-500",3,"click"],[1,"fixed","inset-0","bg-gray-600","bg-opacity-50","overflow-y-auto","h-full","w-full","z-50",3,"click"],[1,"relative","top-20","mx-auto","border","w-11/12","md:w-3/4","lg:w-1/2","shadow-lg","rounded-md","bg-white","flex","flex-col","max-h-[80vh]",3,"click"],[1,"flex","items-center","justify-between","p-5","pb-4","border-b","border-gray-200","flex-shrink-0"],[1,"w-12","h-12","bg-blue-100","rounded-full","flex","items-center","justify-center"],[1,"w-6","h-6","text-blue-600",3,"img"],[1,"text-gray-400","hover:text-gray-600",3,"click"],[1,"w-6","h-6",3,"img"],["class","flex-1 overflow-y-auto px-5 py-6",4,"ngIf"],[1,"flex","justify-end","gap-3","p-5","pt-4","border-t","border-gray-200","flex-shrink-0"],[1,"px-4","py-2","border","border-gray-300","rounded-md","text-sm","font-medium","text-gray-700","bg-white","hover:bg-gray-50","focus:outline-none","focus:ring-2","focus:ring-blue-500",3,"click"],["class","inline-flex items-center px-4 py-2 bg-green-600 text-white rounded-md text-sm font-medium hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-green-500",3,"click",4,"ngIf"],["class","inline-flex items-center px-4 py-2 bg-red-600 text-white rounded-md text-sm font-medium hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-red-500",3,"click",4,"ngIf"],[1,"flex-1","overflow-y-auto","px-5","py-6"],[1,"grid","grid-cols-2","gap-4","text-sm"],[1,"block","text-sm","font-medium","text-gray-700"],[1,"mt-1","text-gray-900"],[1,"mt-1","flex","items-center","gap-2","text-gray-900"],[4,"ngIf"],[1,"mt-1"],[1,"space-y-2"],[1,"flex","flex-wrap","gap-2"],[1,"w-3","h-3","mr-1",3,"img"],[3,"class",4,"ngIf"],[1,"flex","items-center","gap-2","mb-2"],[1,"font-medium"],["class","text-sm",4,"ngIf"],[1,"text-sm"],[1,"inline-flex","items-center","px-4","py-2","bg-green-600","text-white","rounded-md","text-sm","font-medium","hover:bg-green-700","focus:outline-none","focus:ring-2","focus:ring-green-500",3,"click"],[1,"inline-flex","items-center","px-4","py-2","bg-red-600","text-white","rounded-md","text-sm","font-medium","hover:bg-red-700","focus:outline-none","focus:ring-2","focus:ring-red-500",3,"click"],[1,"relative","top-20","mx-auto","border","w-11/12","md:w-2/3","lg:w-1/2","max-w-2xl","shadow-lg","rounded-md","bg-white",3,"click"],[1,"flex","items-center","gap-3","mb-4"],[1,"w-12","h-12","bg-green-100","rounded-full","flex","items-center","justify-center"],[1,"w-6","h-6","text-green-600",3,"img"],["class","p-4 bg-green-50 border border-green-200 rounded-lg mb-4",4,"ngIf"],[1,"flex","justify-end","gap-3"],[1,"px-4","py-2","bg-green-600","text-white","rounded-md","text-sm","font-medium","hover:bg-green-700","focus:outline-none","focus:ring-2","focus:ring-green-500",3,"click"],[1,"p-4","bg-green-50","border","border-green-200","rounded-lg","mb-4"],[1,"text-sm","text-green-800"],[1,"w-12","h-12","bg-red-100","rounded-full","flex","items-center","justify-center"],[1,"w-6","h-6","text-red-600",3,"img"],[1,"block","text-sm","font-medium","text-gray-700","mb-2"],["rows","4","placeholder","Ejemplo: Documentaci\xf3n incompleta - No se pudo verificar n\xfamero de colegiado",1,"w-full","px-3","py-2","border","border-gray-300","rounded-md","focus:outline-none","focus:ring-2","focus:ring-blue-500","focus:border-blue-500","resize-none",3,"ngModelChange","ngModel"],[1,"text-xs","text-gray-500","mt-1"],["class","p-4 bg-red-50 border border-red-200 rounded-lg",4,"ngIf"],[1,"flex","justify-end","gap-3","mt-6"],[1,"px-4","py-2","bg-red-600","text-white","rounded-md","text-sm","font-medium","hover:bg-red-700","focus:outline-none","focus:ring-2","focus:ring-red-500","disabled:opacity-50","disabled:cursor-not-allowed",3,"click","disabled"],[1,"p-4","bg-red-50","border","border-red-200","rounded-lg"],[1,"flex","items-center","gap-2"],[1,"w-4","h-4","text-red-600",3,"img"]],template:function(o,n){1&o&&(e.j41(0,"app-page-layout",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5)(6,"p",6),e.EFF(7,"Solicitudes pendientes"),e.k0s(),e.j41(8,"p",7),e.EFF(9),e.k0s()(),e.j41(10,"div",8),e.nrm(11,"lucide-icon",9),e.k0s()()(),e.j41(12,"div",10)(13,"div",4)(14,"div",5)(15,"p",6),e.EFF(16,"Aprobadas (\xfaltimos 7 d\xedas)"),e.k0s(),e.j41(17,"p",7),e.EFF(18),e.k0s()(),e.j41(19,"div",11),e.nrm(20,"lucide-icon",12),e.k0s()()(),e.j41(21,"div",13)(22,"div",4)(23,"div",5)(24,"p",6),e.EFF(25,"Rechazadas (\xfaltimos 7 d\xedas)"),e.k0s(),e.j41(26,"p",7),e.EFF(27),e.k0s()(),e.j41(28,"div",14),e.nrm(29,"lucide-icon",15),e.k0s()()()(),e.j41(30,"div",16)(31,"div",17)(32,"div",18)(33,"div",19),e.nrm(34,"lucide-icon",20),e.j41(35,"input",21),e.mxI("ngModelChange",function(a){return e.DH7(n.searchTerm,a)||(n.searchTerm=a),a}),e.k0s()(),e.j41(36,"select",22),e.mxI("ngModelChange",function(a){return e.DH7(n.statusFilter,a)||(n.statusFilter=a),a}),e.j41(37,"option",23),e.EFF(38,"Todas las solicitudes"),e.k0s(),e.j41(39,"option",24),e.EFF(40,"Pendientes"),e.k0s(),e.j41(41,"option",25),e.EFF(42,"Aprobadas"),e.k0s(),e.j41(43,"option",26),e.EFF(44,"Rechazadas"),e.k0s()()()()(),e.j41(45,"div",16)(46,"div",27)(47,"nav",28),e.DNE(48,f,3,4,"button",29),e.k0s()(),e.j41(49,"div",17)(50,"div",30)(51,"h2",31),e.EFF(52,"Solicitudes de registro"),e.k0s(),e.j41(53,"p",6),e.EFF(54),e.k0s()(),e.DNE(55,_,4,2,"div",32)(56,y,2,1,"div",33),e.k0s()()()(),e.DNE(57,q,19,5,"div",34)(58,D,17,2,"div",34)(59,N,25,4,"div",34)),2&o&&(e.Y8G("title","Aprobaci\xf3n de usuarios")("description","Revisa y gestiona las solicitudes de registro al sistema")("icon",n.userCheckIcon)("breadcrumbItems",n.breadcrumbItems)("headerGradient","from-blue-600 via-blue-500 to-blue-700"),e.R7$(9),e.JRh(n.pendingCount),e.R7$(2),e.Y8G("img",n.clockIcon),e.R7$(7),e.JRh(n.approvedCount),e.R7$(2),e.Y8G("img",n.checkCircle2Icon),e.R7$(7),e.JRh(n.rejectedCount),e.R7$(2),e.Y8G("img",n.xCircleIcon),e.R7$(5),e.Y8G("img",n.searchIcon),e.R7$(),e.R50("ngModel",n.searchTerm),e.R7$(),e.R50("ngModel",n.statusFilter),e.R7$(12),e.Y8G("ngForOf",n.tabs),e.R7$(6),e.E5c(" ",n.filteredRequests.length," solicitud",1!==n.filteredRequests.length?"es":""," encontrada",1!==n.filteredRequests.length?"s":""," "),e.R7$(),e.Y8G("ngIf",0===n.filteredRequests.length),e.R7$(),e.Y8G("ngIf",n.filteredRequests.length>0),e.R7$(),e.Y8G("ngIf",n.showDetailModal),e.R7$(),e.Y8G("ngIf",n.showApproveModal),e.R7$(),e.Y8G("ngIf",n.showRejectModal))},dependencies:[u.MD,u.Sq,u.bT,l.YN,l.xH,l.y7,l.me,l.wz,l.BC,l.vS,s.flO,s.WGl,m.J],encapsulation:2})}}return i})()}}]);