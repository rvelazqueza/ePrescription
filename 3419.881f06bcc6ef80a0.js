"use strict";(self.webpackChunkeprescription_angular=self.webpackChunkeprescription_angular||[]).push([[3419],{8777:(C,v,l)=>{l.d(v,{m:()=>e});var u=l(177),p=l(6283),o=l(8516),n=l(4438);function b(c,_){if(1&c&&n.nrm(0,"lucide-icon",4),2&c){const d=n.XpG(2).$implicit;n.Y8G("img",d.icon)}}function F(c,_){if(1&c&&(n.j41(0,"a",9),n.DNE(1,b,1,1,"lucide-icon",10),n.EFF(2),n.k0s()),2&c){const d=n.XpG().$implicit;n.Y8G("routerLink",d.route),n.R7$(),n.Y8G("ngIf",d.icon),n.R7$(),n.SpI(" ",d.label," ")}}function P(c,_){if(1&c&&n.nrm(0,"lucide-icon",4),2&c){const d=n.XpG(2).$implicit;n.Y8G("img",d.icon)}}function y(c,_){if(1&c&&(n.j41(0,"span",11),n.DNE(1,P,1,1,"lucide-icon",10),n.EFF(2),n.k0s()),2&c){const d=n.XpG(),g=d.$implicit;n.BMQ("aria-current",d.last?"page":null),n.R7$(),n.Y8G("ngIf",g.icon),n.R7$(),n.SpI(" ",g.label," ")}}function x(c,_){if(1&c&&(n.j41(0,"li",2),n.nrm(1,"lucide-icon",6),n.DNE(2,F,3,3,"a",7)(3,y,3,3,"span",8),n.k0s()),2&c){const d=_.$implicit,g=_.last,h=n.XpG();n.R7$(),n.Y8G("img",h.chevronRightIcon),n.R7$(),n.Y8G("ngIf",d.route&&!g),n.R7$(),n.Y8G("ngIf",!d.route||g)}}let e=(()=>{class c{constructor(){this.items=[],this.homeIcon=o.ww0,this.chevronRightIcon=o.c_$}static{this.\u0275fac=function(g){return new(g||c)}}static{this.\u0275cmp=n.VBU({type:c,selectors:[["app-breadcrumbs"]],inputs:{items:"items"},standalone:!0,features:[n.aNF],decls:7,vars:2,consts:[["aria-label","Breadcrumb",1,"fixed","left-64","right-0","z-30","bg-gray-50","border-b","border-gray-200","px-6","py-3",2,"top","93px"],[1,"inline-flex","items-center","space-x-1","md:space-x-3"],[1,"inline-flex","items-center"],["routerLink","/dashboard",1,"inline-flex","items-center","text-sm","font-medium","text-gray-700","hover:text-blue-600","transition-colors"],["aria-hidden","true",1,"w-4","h-4","mr-2",3,"img"],["class","inline-flex items-center",4,"ngFor","ngForOf"],["aria-hidden","true",1,"w-4","h-4","text-gray-400","mx-1",3,"img"],["class","inline-flex items-center text-sm font-medium text-gray-700 hover:text-blue-600 transition-colors",3,"routerLink",4,"ngIf"],["class","inline-flex items-center text-sm font-medium text-gray-500",4,"ngIf"],[1,"inline-flex","items-center","text-sm","font-medium","text-gray-700","hover:text-blue-600","transition-colors",3,"routerLink"],["class","w-4 h-4 mr-2","aria-hidden","true",3,"img",4,"ngIf"],[1,"inline-flex","items-center","text-sm","font-medium","text-gray-500"]],template:function(g,h){1&g&&(n.j41(0,"nav",0)(1,"ol",1)(2,"li",2)(3,"a",3),n.nrm(4,"lucide-icon",4),n.EFF(5," Inicio "),n.k0s()(),n.DNE(6,x,4,3,"li",5),n.k0s()()),2&g&&(n.R7$(4),n.Y8G("img",h.homeIcon),n.R7$(2),n.Y8G("ngForOf",h.items))},dependencies:[u.MD,u.Sq,u.bT,p.iI,p.Wk,o.flO,o.WGl],encapsulation:2})}}return c})()},3419:(C,v,l)=>{l.r(v),l.d(v,{FarmaciasListaComponent:()=>G});var u=l(177),p=l(4341),o=l(8516),n=l(1413),b=l(6977),F=l(8777),P=l(5701),y=l(1797),x=l(3217),e=l(4438),c=l(3036);function _(s,m){1&s&&(e.j41(0,"div",10),e.nrm(1,"div",11),e.j41(2,"span",12),e.EFF(3,"Cargando farmacias..."),e.k0s()())}function d(s,m){if(1&s&&(e.j41(0,"div",13)(1,"div",14)(2,"div",15),e.nrm(3,"lucide-icon",16),e.k0s(),e.j41(4,"div")(5,"h1",17),e.EFF(6,"Farmacias Registradas"),e.k0s(),e.j41(7,"p",18),e.EFF(8,"Gesti\xf3n y consulta de farmacias del sistema ePrescription en Costa Rica"),e.k0s()()()()),2&s){const t=e.XpG();e.R7$(3),e.Y8G("img",t.buildingIcon)}}function g(s,m){if(1&s&&(e.j41(0,"div",19)(1,"div",20)(2,"div",21)(3,"div",22),e.nrm(4,"lucide-icon",23),e.k0s(),e.j41(5,"div")(6,"p",24),e.EFF(7),e.k0s(),e.j41(8,"p",25),e.EFF(9,"Total farmacias"),e.k0s()()()(),e.j41(10,"div",26)(11,"div",21)(12,"div",27),e.nrm(13,"lucide-icon",28),e.k0s(),e.j41(14,"div")(15,"p",29),e.EFF(16),e.k0s(),e.j41(17,"p",25),e.EFF(18,"Activas"),e.k0s()()()(),e.j41(19,"div",30)(20,"div",21)(21,"div",31),e.nrm(22,"lucide-icon",32),e.k0s(),e.j41(23,"div")(24,"p",29),e.EFF(25),e.k0s(),e.j41(26,"p",25),e.EFF(27,"Inactivas"),e.k0s()()()(),e.j41(28,"div",33)(29,"div",21)(30,"div",34),e.nrm(31,"lucide-icon",35),e.k0s(),e.j41(32,"div")(33,"p",29),e.EFF(34),e.k0s(),e.j41(35,"p",25),e.EFF(36,"Suspendidas"),e.k0s()()()(),e.j41(37,"div",36)(38,"div",21)(39,"div",37),e.nrm(40,"lucide-icon",38),e.k0s(),e.j41(41,"div")(42,"p",29),e.EFF(43),e.k0s(),e.j41(44,"p",25),e.EFF(45,"Provincias"),e.k0s()()()()()),2&s){const t=e.XpG();e.R7$(),e.BMQ("aria-label","Total de farmacias: "+t.getTotalPharmacies()),e.R7$(3),e.Y8G("img",t.buildingIcon),e.R7$(3),e.JRh(t.getTotalPharmacies()),e.R7$(6),e.Y8G("img",t.checkCircleIcon),e.R7$(3),e.JRh(t.getActivePharmacies()),e.R7$(6),e.Y8G("img",t.xCircleIcon),e.R7$(3),e.JRh(t.getInactivePharmacies()),e.R7$(6),e.Y8G("img",t.alertCircleIcon),e.R7$(3),e.JRh(t.getSuspendedPharmacies()),e.R7$(6),e.Y8G("img",t.mapPinIcon),e.R7$(3),e.JRh(t.getProvinceCount())}}function h(s,m){if(1&s&&(e.j41(0,"option",63),e.EFF(1),e.k0s()),2&s){const t=m.$implicit;e.Y8G("value",t.id),e.R7$(),e.SpI(" ",t.nombre," ")}}function E(s,m){if(1&s){const t=e.RV6();e.j41(0,"button",64),e.bIt("click",function(){e.eBV(t);const a=e.XpG(2);return e.Njj(a.clearFilters())}),e.nrm(1,"lucide-icon",61),e.EFF(2," Limpiar "),e.k0s()}if(2&s){const t=e.XpG(2);e.R7$(),e.Y8G("img",t.filterIcon)}}function I(s,m){if(1&s){const t=e.RV6();e.j41(0,"div",39)(1,"div",40)(2,"div",41),e.nrm(3,"lucide-icon",42),e.j41(4,"h3",43),e.EFF(5,"Listado de Farmacias"),e.k0s(),e.j41(6,"span",44),e.EFF(7),e.k0s()(),e.j41(8,"button",45),e.bIt("click",function(){e.eBV(t);const a=e.XpG();return e.Njj(a.openNewPharmacyModal())}),e.nrm(9,"lucide-icon",46),e.EFF(10," Nueva Farmacia "),e.k0s()(),e.j41(11,"div",47)(12,"div",48)(13,"div",49),e.nrm(14,"lucide-icon",50),e.j41(15,"input",51),e.mxI("ngModelChange",function(a){e.eBV(t);const r=e.XpG();return e.DH7(r.searchTerm,a)||(r.searchTerm=a),e.Njj(a)}),e.bIt("ngModelChange",function(){e.eBV(t);const a=e.XpG();return e.Njj(a.onSearchChange())}),e.k0s(),e.j41(16,"span",52),e.EFF(17," Escriba para buscar farmacias por c\xf3digo, nombre, direcci\xf3n o tel\xe9fono. Los resultados se actualizar\xe1n autom\xe1ticamente. "),e.k0s()()(),e.j41(18,"select",53),e.mxI("ngModelChange",function(a){e.eBV(t);const r=e.XpG();return e.DH7(r.selectedProvince,a)||(r.selectedProvince=a),e.Njj(a)}),e.bIt("ngModelChange",function(){e.eBV(t);const a=e.XpG();return e.Njj(a.onProvinceChange())}),e.j41(19,"option",54),e.EFF(20,"Todas las provincias"),e.k0s(),e.DNE(21,h,2,2,"option",55),e.k0s(),e.j41(22,"select",56),e.mxI("ngModelChange",function(a){e.eBV(t);const r=e.XpG();return e.DH7(r.selectedStatus,a)||(r.selectedStatus=a),e.Njj(a)}),e.bIt("ngModelChange",function(){e.eBV(t);const a=e.XpG();return e.Njj(a.onStatusChange())}),e.j41(23,"option",54),e.EFF(24,"Todos los estados"),e.k0s(),e.j41(25,"option",57),e.EFF(26,"Activas"),e.k0s(),e.j41(27,"option",58),e.EFF(28,"Inactivas"),e.k0s(),e.j41(29,"option",59),e.EFF(30,"Suspendidas"),e.k0s()(),e.j41(31,"button",60),e.bIt("click",function(){e.eBV(t);const a=e.XpG();return e.Njj(a.exportPharmacies())}),e.nrm(32,"lucide-icon",61),e.EFF(33," Exportar "),e.k0s(),e.DNE(34,E,3,1,"button",62),e.k0s()()}if(2&s){const t=e.XpG();e.R7$(3),e.Y8G("img",t.buildingIcon),e.R7$(4),e.E5c(" (",t.filteredPharmacies.length," farmacia",1!==t.filteredPharmacies.length?"s":""," encontrada",1!==t.filteredPharmacies.length?"s":"",") "),e.R7$(2),e.Y8G("img",t.plusIcon),e.R7$(5),e.Y8G("img",t.searchIcon),e.R7$(),e.R50("ngModel",t.searchTerm),e.BMQ("aria-describedby","search-help"),e.R7$(3),e.R50("ngModel",t.selectedProvince),e.R7$(3),e.Y8G("ngForOf",t.provincias),e.R7$(),e.R50("ngModel",t.selectedStatus),e.R7$(10),e.Y8G("img",t.downloadIcon),e.R7$(2),e.Y8G("ngIf",t.hasActiveFilters())}}function k(s,m){if(1&s){const t=e.RV6();e.j41(0,"button",77),e.bIt("click",function(){e.eBV(t);const a=e.XpG(3);return e.Njj(a.clearFilters())}),e.EFF(1," Limpiar filtros "),e.k0s()}}function M(s,m){if(1&s){const t=e.RV6();e.j41(0,"div",69)(1,"div",70),e.nrm(2,"lucide-icon",71),e.j41(3,"h3",72),e.EFF(4),e.k0s(),e.j41(5,"p",73),e.EFF(6),e.k0s(),e.j41(7,"div",74)(8,"button",75),e.bIt("click",function(){e.eBV(t);const a=e.XpG(2);return e.Njj(a.openNewPharmacyModal())}),e.EFF(9," Registrar primera farmacia "),e.k0s(),e.DNE(10,k,2,0,"button",76),e.k0s()()()}if(2&s){const t=e.XpG(2);e.R7$(2),e.Y8G("img",t.buildingIcon),e.R7$(2),e.SpI(" ",t.hasActiveFilters()?"No se encontraron farmacias":"No hay farmacias registradas"," "),e.R7$(2),e.SpI(" ",t.hasActiveFilters()?"Intenta ajustar los filtros de b\xfasqueda":"No hay farmacias registradas en el sistema"," "),e.R7$(4),e.Y8G("ngIf",t.hasActiveFilters())}}function R(s,m){1&s&&(e.j41(0,"div",106)(1,"span",107),e.EFF(2," Reciente "),e.k0s()())}function j(s,m){if(1&s){const t=e.RV6();e.j41(0,"tr",85),e.bIt("click",function(){const a=e.eBV(t).$implicit,r=e.XpG(3);return e.Njj(r.viewPharmacyDetails(a))})("keydown.enter",function(){const a=e.eBV(t).$implicit,r=e.XpG(3);return e.Njj(r.viewPharmacyDetails(a))})("keydown.space",function(a){const r=e.eBV(t).$implicit;return e.XpG(3).viewPharmacyDetails(r),e.Njj(a.preventDefault())}),e.j41(1,"td",86)(2,"div",87)(3,"div",88),e.nrm(4,"lucide-icon",89),e.k0s(),e.j41(5,"div")(6,"div",90),e.EFF(7),e.k0s(),e.DNE(8,R,3,0,"div",91),e.k0s()()(),e.j41(9,"td",86)(10,"div",92),e.EFF(11),e.k0s()(),e.j41(12,"td",93)(13,"div",94),e.nrm(14,"lucide-icon",95),e.j41(15,"span",96),e.EFF(16),e.k0s()()(),e.j41(17,"td",93)(18,"div",97),e.EFF(19),e.k0s()(),e.j41(20,"td",86)(21,"div",94),e.nrm(22,"lucide-icon",95),e.j41(23,"span",96),e.EFF(24),e.k0s()()(),e.j41(25,"td",86)(26,"span",98),e.EFF(27),e.k0s(),e.j41(28,"div",99),e.EFF(29),e.k0s()(),e.j41(30,"td",100)(31,"div",101)(32,"button",102),e.bIt("click",function(a){const r=e.eBV(t).$implicit;return e.XpG(3).viewPharmacyDetails(r),e.Njj(a.stopPropagation())}),e.nrm(33,"lucide-icon",103),e.k0s(),e.j41(34,"button",104),e.bIt("click",function(a){const r=e.eBV(t).$implicit;return e.XpG(3).editPharmacy(r),e.Njj(a.stopPropagation())}),e.nrm(35,"lucide-icon",103),e.k0s(),e.j41(36,"button",105),e.bIt("click",function(a){const r=e.eBV(t).$implicit;return e.XpG(3).deletePharmacy(r),e.Njj(a.stopPropagation())}),e.nrm(37,"lucide-icon",103),e.k0s()()()()}if(2&s){const t=m.$implicit,i=e.XpG(3);e.BMQ("aria-label","Farmacia "+t.nombre+" c\xf3digo "+t.codigo),e.R7$(4),e.Y8G("img",i.buildingIcon),e.R7$(3),e.JRh(t.codigo),e.R7$(),e.Y8G("ngIf",i.isRecentPharmacy(t.fechaRegistro)),e.R7$(3),e.JRh(t.nombre),e.R7$(3),e.Y8G("img",i.mapPinIcon),e.R7$(2),e.JRh(i.getFullLocationForPharmacy(t)),e.R7$(3),e.SpI(" ",t.direccionEspecifica," "),e.R7$(3),e.Y8G("img",i.phoneIcon),e.R7$(2),e.JRh(t.telefono),e.R7$(2),e.Y8G("ngClass",i.getStatusBadgeClass(t.estado)),e.BMQ("aria-label",i.getStatusDescription(t.estado)),e.R7$(),e.SpI(" ",i.getStatusLabel(t.estado)," "),e.R7$(2),e.SpI(" Registrada: ",i.formatDate(t.fechaRegistro)," "),e.R7$(2),e.BMQ("aria-label","Acciones para farmacia "+t.nombre),e.R7$(),e.BMQ("aria-label","Ver detalles de "+t.nombre),e.R7$(),e.Y8G("img",i.eyeIcon),e.R7$(),e.BMQ("aria-label","Editar "+t.nombre),e.R7$(),e.Y8G("img",i.editIcon),e.R7$(),e.BMQ("aria-label","Eliminar "+t.nombre),e.R7$(),e.Y8G("img",i.trashIcon)}}function T(s,m){if(1&s&&(e.j41(0,"div",78)(1,"table",79)(2,"thead",80)(3,"tr",81)(4,"th",82),e.EFF(5,"C\xf3digo"),e.k0s(),e.j41(6,"th",82),e.EFF(7,"Nombre"),e.k0s(),e.j41(8,"th",82),e.EFF(9,"Ubicaci\xf3n"),e.k0s(),e.j41(10,"th",82),e.EFF(11,"Direcci\xf3n Espec\xedfica"),e.k0s(),e.j41(12,"th",82),e.EFF(13,"Tel\xe9fono"),e.k0s(),e.j41(14,"th",82),e.EFF(15,"Estado"),e.k0s(),e.j41(16,"th",82),e.EFF(17,"Acciones"),e.k0s()()(),e.j41(18,"tbody",83),e.DNE(19,j,38,21,"tr",84),e.k0s()()()),2&s){const t=e.XpG(2);e.R7$(19),e.Y8G("ngForOf",t.paginatedPharmacies)("ngForTrackBy",t.trackByPharmacyId)}}function w(s,m){if(1&s){const t=e.RV6();e.j41(0,"button",122),e.bIt("click",function(){const a=e.eBV(t).$implicit,r=e.XpG(3);return e.Njj(r.goToPage(a))}),e.EFF(1),e.k0s()}if(2&s){const t=m.$implicit,i=e.XpG(3);e.Y8G("ngClass",t===i.currentPage?"active":"border border-gray-300 text-gray-700"),e.R7$(),e.SpI(" ",t," ")}}function O(s,m){if(1&s){const t=e.RV6();e.j41(0,"div",108)(1,"div",109)(2,"div",110),e.EFF(3," Mostrando "),e.j41(4,"span",111),e.EFF(5),e.k0s(),e.EFF(6," a "),e.j41(7,"span",111),e.EFF(8),e.k0s(),e.EFF(9," de "),e.j41(10,"span",111),e.EFF(11),e.k0s(),e.EFF(12," resultados "),e.k0s(),e.j41(13,"div",14)(14,"div",112)(15,"span"),e.EFF(16,"Mostrar:"),e.k0s(),e.j41(17,"select",113),e.bIt("change",function(a){e.eBV(t);const r=e.XpG(2);return e.Njj(r.onItemsPerPageChange(a))}),e.j41(18,"option",114),e.EFF(19,"5"),e.k0s(),e.j41(20,"option",115),e.EFF(21,"10"),e.k0s(),e.j41(22,"option",116),e.EFF(23,"20"),e.k0s(),e.j41(24,"option",117),e.EFF(25,"50"),e.k0s()()(),e.j41(26,"div",118)(27,"button",119),e.bIt("click",function(){e.eBV(t);const a=e.XpG(2);return e.Njj(a.previousPage())}),e.nrm(28,"lucide-icon",61),e.k0s(),e.DNE(29,w,2,2,"button",120),e.j41(30,"button",121),e.bIt("click",function(){e.eBV(t);const a=e.XpG(2);return e.Njj(a.nextPage())}),e.nrm(31,"lucide-icon",61),e.k0s()()()()()}if(2&s){const t=e.XpG(2);e.R7$(5),e.JRh(t.getStartIndex()),e.R7$(3),e.JRh(t.getEndIndex()),e.R7$(3),e.JRh(t.filteredPharmacies.length),e.R7$(6),e.Y8G("value",t.itemsPerPage),e.R7$(10),e.Y8G("disabled",!t.hasPreviousPage()),e.R7$(),e.Y8G("img",t.chevronLeftIcon),e.R7$(),e.Y8G("ngForOf",t.getVisiblePages()),e.R7$(),e.Y8G("disabled",!t.hasNextPage()),e.R7$(),e.Y8G("img",t.chevronRightIcon)}}function $(s,m){if(1&s&&(e.j41(0,"div",65),e.DNE(1,M,11,4,"div",66)(2,T,20,2,"div",67)(3,O,32,9,"div",68),e.k0s()),2&s){const t=e.XpG();e.R7$(),e.Y8G("ngIf",0===t.filteredPharmacies.length),e.R7$(),e.Y8G("ngIf",t.filteredPharmacies.length>0),e.R7$(),e.Y8G("ngIf",t.filteredPharmacies.length>0)}}let G=(()=>{class s{constructor(t){this.pharmacyService=t,this.destroy$=new n.B,this.buildingIcon=o.tIP,this.plusIcon=o.FWt,this.searchIcon=o.vji,this.downloadIcon=o.f5X,this.eyeIcon=o.kU3,this.editIcon=o.ffu,this.checkCircleIcon=o.rAV,this.xCircleIcon=o.Jpz,this.mapPinIcon=o.sDd,this.dollarSignIcon=o.G9t,this.phoneIcon=o.bcf,this.mailIcon=o.gE4,this.filterIcon=o.dJT,this.usersIcon=o.zWC,this.alertCircleIcon=o.RIJ,this.chevronLeftIcon=o.JGc,this.chevronRightIcon=o.c_$,this.trashIcon=o.TBR,this.breadcrumbItems=[{label:"Farmacias"}],this.provincias=x.en,this.searchTerm="",this.selectedProvince="",this.selectedStatus="",this.pharmacies=[],this.filteredPharmacies=[],this.showDetailModal=!1,this.showFormModal=!1,this.isEditMode=!1,this.selectedPharmacy=null,this.isLoading=!1,this.currentPage=1,this.itemsPerPage=10,this.paginatedPharmacies=[]}ngOnInit(){console.log("\u26a0\ufe0f COMPONENTE DEPRECATED - NO SE USA EN LA APLICACI\xd3N"),console.log("\u2705 La vista real de farmacias est\xe1 en: /inventario/farmacias"),console.log("\u{1f4c1} Archivo: src/app/pages/inventario/farmacias/farmacias.component.ts"),this.loadPharmacies()}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}loadPharmacies(){this.isLoading=!0,this.pharmacyService.getPharmacies().pipe((0,b.Q)(this.destroy$)).subscribe(t=>{this.pharmacies=t,this.applyFilters(),this.isLoading=!1})}applyFilters(){this.filteredPharmacies=this.pharmacies.filter(t=>(""===this.searchTerm||this.normalizeText(t.codigo).includes(this.normalizeText(this.searchTerm))||this.normalizeText(t.nombre).includes(this.normalizeText(this.searchTerm))||this.normalizeText(t.direccionEspecifica).includes(this.normalizeText(this.searchTerm))||this.normalizeText(t.telefono).includes(this.normalizeText(this.searchTerm))||this.normalizeText(t.email).includes(this.normalizeText(this.searchTerm))||this.normalizeText(t.responsable).includes(this.normalizeText(this.searchTerm)))&&(""===this.selectedProvince||t.provinciaId===this.selectedProvince)&&(""===this.selectedStatus||t.estado===this.selectedStatus)),this.currentPage=1,this.updatePagination()}updatePagination(){const t=(this.currentPage-1)*this.itemsPerPage;this.paginatedPharmacies=this.filteredPharmacies.slice(t,t+this.itemsPerPage)}normalizeText(t){return t.toLowerCase().normalize("NFD").replace(/[\u0300-\u036f]/g,"")}onSearchChange(){this.applyFilters()}onProvinceChange(){this.applyFilters()}onStatusChange(){this.applyFilters()}getTotalPharmacies(){return this.pharmacies.length}getActivePharmacies(){return this.pharmacies.filter(t=>"activa"===t.estado).length}getInactivePharmacies(){return this.pharmacies.filter(t=>"inactiva"===t.estado).length}getSuspendedPharmacies(){return this.pharmacies.filter(t=>"suspendida"===t.estado).length}getProvinceCount(){return new Set(this.pharmacies.map(i=>i.provinciaId)).size}getStatusClass(t){return{activa:"bg-green-100 text-green-700 border-green-300",inactiva:"bg-gray-100 text-gray-700 border-gray-300",suspendida:"bg-red-100 text-red-700 border-red-300"}[t]||"bg-gray-100 text-gray-700 border-gray-300"}getStatusLabel(t){return{activa:"Activa",inactiva:"Inactiva",suspendida:"Suspendida"}[t]||"Desconocido"}getFullLocationForPharmacy(t){return(0,x.RS)(t.provinciaId,t.cantonId,t.distritoId)}formatCurrency(t){return new Intl.NumberFormat("es-CR",{style:"currency",currency:"CRC",minimumFractionDigits:0,maximumFractionDigits:0}).format(t)}openNewPharmacyModal(){this.selectedPharmacy=null,this.isEditMode=!1,this.showFormModal=!0}viewPharmacyDetails(t){this.selectedPharmacy=t,this.showDetailModal=!0}editPharmacy(t){this.selectedPharmacy=t,this.isEditMode=!0,this.showFormModal=!0}onCloseDetailModal(){this.showDetailModal=!1,this.selectedPharmacy=null}onCloseFormModal(){this.showFormModal=!1,this.selectedPharmacy=null,this.isEditMode=!1}onEditFromDetail(t){this.showDetailModal=!1,this.editPharmacy(t)}onSavePharmacy(t){this.isEditMode&&this.selectedPharmacy?this.pharmacyService.updatePharmacy(this.selectedPharmacy.id,{...t,fechaRegistro:this.selectedPharmacy.fechaRegistro}).pipe((0,b.Q)(this.destroy$)).subscribe(()=>{this.loadPharmacies(),this.onCloseFormModal(),console.log("Farmacia actualizada exitosamente")}):this.pharmacyService.createPharmacy({...t,fechaRegistro:(new Date).toISOString().split("T")[0]}).pipe((0,b.Q)(this.destroy$)).subscribe(()=>{this.loadPharmacies(),this.onCloseFormModal(),console.log("Farmacia registrada exitosamente")})}exportPharmacies(){const t=this.filteredPharmacies.map(i=>({C\u00f3digo:i.codigo,Nombre:i.nombre,Ubicaci\u00f3n:this.getFullLocationForPharmacy(i),Direcci\u00f3n:i.direccionEspecifica,Tel\u00e9fono:i.telefono,Email:i.email,Responsable:i.responsable,Estado:i.estado,"Fecha Registro":i.fechaRegistro}));console.log("Exportar farmacias:",t)}deletePharmacy(t){confirm(`\xbfEst\xe1 seguro de eliminar la farmacia ${t.nombre}?`)&&console.log("Eliminar farmacia:",t)}hasActiveFilters(){return""!==this.searchTerm||""!==this.selectedProvince||""!==this.selectedStatus}clearFilters(){this.searchTerm="",this.selectedProvince="",this.selectedStatus="",this.applyFilters()}getStatusBadgeClass(t){return{activa:"bg-green-100 text-green-800 border-green-200",inactiva:"bg-gray-100 text-gray-800 border-gray-200",suspendida:"bg-red-100 text-red-800 border-red-200"}[t]||"bg-gray-100 text-gray-800 border-gray-200"}getStatusDotClass(t){return{activa:"bg-green-400",inactiva:"bg-gray-400",suspendida:"bg-red-400"}[t]||"bg-gray-400"}get totalPages(){return Math.ceil(this.filteredPharmacies.length/this.itemsPerPage)}hasPreviousPage(){return this.currentPage>1}hasNextPage(){return this.currentPage<this.totalPages}previousPage(){this.hasPreviousPage()&&(this.currentPage--,this.updatePagination())}nextPage(){this.hasNextPage()&&(this.currentPage++,this.updatePagination())}goToPage(t){t>=1&&t<=this.totalPages&&(this.currentPage=t,this.updatePagination())}getVisiblePages(){const t=this.totalPages,i=this.currentPage,a=[];if(t<=7)for(let r=1;r<=t;r++)a.push(r);else if(i<=4){for(let r=1;r<=5;r++)a.push(r);a.push(-1),a.push(t)}else if(i>=t-3){a.push(1),a.push(-1);for(let r=t-4;r<=t;r++)a.push(r)}else{a.push(1),a.push(-1);for(let r=i-1;r<=i+1;r++)a.push(r);a.push(-1),a.push(t)}return a}onItemsPerPageChange(t){this.itemsPerPage=parseInt(t.target.value),this.currentPage=1,this.updatePagination()}getStartIndex(){return(this.currentPage-1)*this.itemsPerPage+1}getEndIndex(){return Math.min(this.currentPage*this.itemsPerPage,this.filteredPharmacies.length)}formatDate(t){return new Date(t).toLocaleDateString("es-CR",{day:"2-digit",month:"2-digit",year:"numeric"})}isRecentPharmacy(t){const i=new Date(t),a=new Date;return a.setDate(a.getDate()-30),i>=a}getStatusDescription(t){switch(t){case"activa":return"Farmacia activa y operativa";case"inactiva":return"Farmacia temporalmente inactiva";case"suspendida":return"Farmacia suspendida por autoridades";default:return"Estado de farmacia desconocido"}}trackByPharmacyId(t,i){return i.id}static{this.\u0275fac=function(i){return new(i||s)(e.rXU(c.X))}}static{this.\u0275cmp=e.VBU({type:s,selectors:[["app-farmacias-lista"]],standalone:!0,features:[e.aNF],decls:11,vars:11,consts:[[1,"space-y-6"],["href","#main-content",1,"skip-link"],[3,"items"],["class","flex justify-center items-center py-12",4,"ngIf"],["class","bg-gradient-to-r from-blue-600 to-purple-600 rounded-lg p-6 text-white shadow-lg",4,"ngIf"],["class","grid grid-cols-2 md:grid-cols-5 gap-4 fade-in-scale","role","region","aria-label","Estad\xedsticas de farmacias del sistema","id","main-content",4,"ngIf"],["class","filter-container rounded-lg shadow p-6 slide-in-right",4,"ngIf"],["class","bg-white rounded-lg shadow overflow-hidden",4,"ngIf"],[3,"closeModal","editPharmacyEvent","isOpen","pharmacy"],[3,"closeModal","savePharmacy","isOpen","pharmacy","isEditMode"],[1,"flex","justify-center","items-center","py-12"],[1,"animate-spin","rounded-full","h-8","w-8","border-b-2","border-blue-600"],[1,"ml-2","text-gray-600"],[1,"bg-gradient-to-r","from-blue-600","to-purple-600","rounded-lg","p-6","text-white","shadow-lg"],[1,"flex","items-center","gap-4"],[1,"bg-white/20","p-3","rounded-lg"],[1,"w-8","h-8",3,"img"],[1,"text-2xl","font-bold"],[1,"text-blue-100"],["role","region","aria-label","Estad\xedsticas de farmacias del sistema","id","main-content",1,"grid","grid-cols-2","md:grid-cols-5","gap-4","fade-in-scale"],["role","group",1,"stat-card","stat-total","bg-white","rounded-lg","shadow","p-4","stagger-animation",2,"--stagger-delay","0"],[1,"flex","items-center","gap-3"],["aria-hidden","true",1,"p-2","bg-blue-100","rounded-lg"],["aria-hidden","true",1,"stat-icon","w-5","h-5","text-blue-600",3,"img"],["aria-label","N\xfamero total de farmacias",1,"text-2xl","font-semibold","text-gray-900"],[1,"text-xs","text-gray-600"],[1,"stat-card","stat-active","bg-white","rounded-lg","shadow","p-4","stagger-animation",2,"--stagger-delay","1"],[1,"p-2","bg-green-100","rounded-lg"],[1,"stat-icon","w-5","h-5","text-green-600",3,"img"],[1,"text-2xl","font-semibold","text-gray-900"],[1,"stat-card","stat-inactive","bg-white","rounded-lg","shadow","p-4","stagger-animation",2,"--stagger-delay","2"],[1,"p-2","bg-gray-100","rounded-lg"],[1,"stat-icon","w-5","h-5","text-gray-600",3,"img"],[1,"stat-card","stat-suspended","bg-white","rounded-lg","shadow","p-4","stagger-animation",2,"--stagger-delay","3"],[1,"p-2","bg-yellow-100","rounded-lg"],[1,"stat-icon","w-5","h-5","text-yellow-600",3,"img"],[1,"stat-card","stat-provinces","bg-white","rounded-lg","shadow","p-4","stagger-animation",2,"--stagger-delay","4"],[1,"p-2","bg-purple-100","rounded-lg"],[1,"stat-icon","w-5","h-5","text-purple-600",3,"img"],[1,"filter-container","rounded-lg","shadow","p-6","slide-in-right"],[1,"flex","items-center","justify-between","mb-4"],[1,"flex","items-center","gap-2"],[1,"w-5","h-5","text-blue-600",3,"img"],[1,"text-lg","font-semibold","text-gray-900"],[1,"text-sm","text-gray-600","ml-2"],[1,"inline-flex","items-center","px-4","py-2","bg-blue-600","text-white","text-sm","font-medium","rounded-lg","hover:bg-blue-700","transition-colors",3,"click"],[1,"w-4","h-4","mr-2",3,"img"],[1,"flex","flex-col","lg:flex-row","gap-4"],[1,"flex-1"],[1,"relative"],["aria-hidden","true",1,"absolute","left-3","top-1/2","transform","-translate-y-1/2","w-4","h-4","text-gray-400",3,"img"],["type","text","id","pharmacy-search","placeholder","Buscar por c\xf3digo, nombre, direcci\xf3n, tel\xe9fono...","aria-label","Buscar farmacias","autocomplete","off",1,"filter-input","w-full","pl-10","pr-4","py-2","rounded-lg","focus-visible",3,"ngModelChange","ngModel"],["id","search-help",1,"sr-only"],["id","province-filter","aria-label","Filtrar por provincia",1,"filter-select","px-3","py-2","rounded-lg","lg:w-48","focus-visible",3,"ngModelChange","ngModel"],["value",""],[3,"value",4,"ngFor","ngForOf"],["id","status-filter","aria-label","Filtrar por estado de farmacia",1,"filter-select","px-3","py-2","rounded-lg","lg:w-48","focus-visible",3,"ngModelChange","ngModel"],["value","activa"],["value","inactiva"],["value","suspendida"],[1,"px-4","py-2","border","border-gray-300","text-gray-700","rounded-lg","hover:bg-gray-50","transition-colors","flex","items-center","gap-2",3,"click"],[1,"w-4","h-4",3,"img"],["class","px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 flex items-center gap-2 transition-colors",3,"click",4,"ngIf"],[3,"value"],[1,"px-4","py-2","border","border-gray-300","text-gray-700","rounded-lg","hover:bg-gray-50","flex","items-center","gap-2","transition-colors",3,"click"],[1,"bg-white","rounded-lg","shadow","overflow-hidden"],["class","text-center py-12",4,"ngIf"],["class","overflow-x-auto",4,"ngIf"],["class","px-6 py-4 border-t border-gray-200 bg-gray-50",4,"ngIf"],[1,"text-center","py-12"],[1,"bg-gray-50","border","border-gray-200","rounded-lg","p-8"],[1,"w-16","h-16","text-gray-400","mx-auto","mb-4",3,"img"],[1,"text-lg","font-medium","text-gray-900","mb-2"],[1,"text-gray-600","mb-6"],[1,"flex","justify-center","gap-3"],[1,"bg-blue-600","text-white","px-4","py-2","rounded-lg","hover:bg-blue-700","transition-colors",3,"click"],["class","border border-gray-300 text-gray-700 px-4 py-2 rounded-lg hover:bg-gray-50 transition-colors",3,"click",4,"ngIf"],[1,"border","border-gray-300","text-gray-700","px-4","py-2","rounded-lg","hover:bg-gray-50","transition-colors",3,"click"],[1,"overflow-x-auto"],["role","table","aria-label","Tabla de farmacias registradas",1,"w-full","min-w-[1200px]"],[1,"bg-gray-50","sticky","top-0"],["role","row"],["role","columnheader","scope","col",1,"px-6","py-3","text-left","text-xs","font-medium","text-gray-500","uppercase","tracking-wider"],["role","rowgroup",1,"bg-white","divide-y","divide-gray-200"],["class","hover:bg-blue-50/50 cursor-pointer transition-all","role","row","tabindex","0",3,"click","keydown.enter","keydown.space",4,"ngFor","ngForOf","ngForTrackBy"],["role","row","tabindex","0",1,"hover:bg-blue-50/50","cursor-pointer","transition-all",3,"click","keydown.enter","keydown.space"],["role","gridcell",1,"px-6","py-4","whitespace-nowrap"],[1,"flex","items-center"],[1,"flex-shrink-0","w-8","h-8","bg-blue-100","rounded-lg","flex","items-center","justify-center","mr-3"],["aria-hidden","true",1,"w-4","h-4","text-blue-600",3,"img"],[1,"text-sm","font-semibold","text-blue-600"],["class","text-xs text-gray-500",4,"ngIf"],[1,"text-sm","font-medium","text-gray-900"],["role","gridcell",1,"px-6","py-4"],[1,"flex","items-center","gap-1"],["aria-hidden","true",1,"w-4","h-4","text-gray-400",3,"img"],[1,"text-sm","text-gray-900"],[1,"text-sm","text-gray-900","max-w-xs"],["role","status",1,"inline-flex","items-center","px-2.5","py-0.5","rounded-full","text-xs","font-medium",3,"ngClass"],[1,"text-xs","text-gray-500","mt-1"],["role","gridcell",1,"px-6","py-4","whitespace-nowrap","text-right","text-sm","font-medium"],["role","group",1,"flex","items-center","gap-2"],["type","button","title","Ver detalles",1,"text-blue-600","hover:text-blue-900","p-1","rounded","focus-visible",3,"click"],["aria-hidden","true",1,"w-4","h-4",3,"img"],["type","button","title","Editar",1,"text-gray-600","hover:text-gray-900","p-1","rounded","focus-visible",3,"click"],["type","button","title","Eliminar",1,"text-red-600","hover:text-red-900","p-1","rounded","focus-visible",3,"click"],[1,"text-xs","text-gray-500"],[1,"inline-flex","items-center","px-2","py-0.5","rounded-full","text-xs","font-medium","bg-green-100","text-green-800"],[1,"px-6","py-4","border-t","border-gray-200","bg-gray-50"],[1,"flex","flex-col","sm:flex-row","items-center","justify-between","gap-4"],[1,"text-sm","text-gray-700"],[1,"font-medium"],[1,"flex","items-center","gap-2","text-sm","text-gray-700"],[1,"px-2","py-1","border","border-gray-300","rounded","text-sm","focus:ring-2","focus:ring-blue-500","focus:border-transparent",3,"change","value"],["value","5"],["value","10"],["value","20"],["value","50"],[1,"flex","gap-1"],["title","P\xe1gina anterior",1,"pagination-button","p-2","border","border-gray-300","text-gray-500","rounded","disabled:opacity-50","disabled:cursor-not-allowed","focus-visible",3,"click","disabled"],["class","pagination-button px-3 py-2 rounded focus-visible",3,"ngClass","click",4,"ngFor","ngForOf"],["title","P\xe1gina siguiente",1,"pagination-button","p-2","border","border-gray-300","text-gray-700","rounded","disabled:opacity-50","disabled:cursor-not-allowed","focus-visible",3,"click","disabled"],[1,"pagination-button","px-3","py-2","rounded","focus-visible",3,"click","ngClass"]],template:function(i,a){1&i&&(e.j41(0,"div",0)(1,"a",1),e.EFF(2,"Saltar al contenido principal"),e.k0s(),e.nrm(3,"app-breadcrumbs",2),e.DNE(4,_,4,0,"div",3)(5,d,9,1,"div",4)(6,g,46,11,"div",5)(7,I,35,13,"div",6)(8,$,4,3,"div",7),e.k0s(),e.j41(9,"app-pharmacy-detail-modal",8),e.bIt("closeModal",function(){return a.onCloseDetailModal()})("editPharmacyEvent",function(f){return a.onEditFromDetail(f)}),e.k0s(),e.j41(10,"app-pharmacy-form-modal",9),e.bIt("closeModal",function(){return a.onCloseFormModal()})("savePharmacy",function(f){return a.onSavePharmacy(f)}),e.k0s()),2&i&&(e.R7$(3),e.Y8G("items",a.breadcrumbItems),e.R7$(),e.Y8G("ngIf",a.isLoading),e.R7$(),e.Y8G("ngIf",!a.isLoading),e.R7$(),e.Y8G("ngIf",!a.isLoading),e.R7$(),e.Y8G("ngIf",!a.isLoading),e.R7$(),e.Y8G("ngIf",!a.isLoading),e.R7$(),e.Y8G("isOpen",a.showDetailModal)("pharmacy",a.selectedPharmacy),e.R7$(),e.Y8G("isOpen",a.showFormModal)("pharmacy",a.selectedPharmacy)("isEditMode",a.isEditMode))},dependencies:[u.MD,u.YU,u.Sq,u.bT,p.YN,p.xH,p.y7,p.me,p.wz,p.BC,p.vS,o.flO,o.WGl,F.m,P.Z,y.E],styles:[".skip-link[_ngcontent-%COMP%]{position:absolute;top:-40px;left:6px;background:#000;color:#fff;padding:8px;text-decoration:none;border-radius:4px;z-index:1000}.skip-link[_ngcontent-%COMP%]:focus{top:6px}.fade-in-scale[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_fadeInScale .6s ease-out}@keyframes _ngcontent-%COMP%_fadeInScale{0%{opacity:0;transform:scale(.95)}to{opacity:1;transform:scale(1)}}.stagger-animation[_ngcontent-%COMP%]{opacity:0;animation:_ngcontent-%COMP%_staggerFadeIn .5s ease-out forwards;animation-delay:calc(var(--stagger-delay) * .1s)}@keyframes _ngcontent-%COMP%_staggerFadeIn{0%{opacity:0;transform:translateY(20px)}to{opacity:1;transform:translateY(0)}}.slide-in-right[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_slideInRight .4s ease-out}@keyframes _ngcontent-%COMP%_slideInRight{0%{opacity:0;transform:translate(20px)}to{opacity:1;transform:translate(0)}}.stat-card[_ngcontent-%COMP%]{transition:all .3s ease;border:1px solid #e5e7eb}.stat-card[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:0 10px 25px -3px #0000001a,0 4px 6px -2px #0000000d}.stat-icon[_ngcontent-%COMP%]{transition:transform .2s ease}.stat-card[_ngcontent-%COMP%]:hover   .stat-icon[_ngcontent-%COMP%]{transform:scale(1.1)}.stat-total[_ngcontent-%COMP%]:hover{border-color:#3b82f6}.stat-active[_ngcontent-%COMP%]:hover{border-color:#10b981}.stat-inactive[_ngcontent-%COMP%]:hover{border-color:#6b7280}.stat-suspended[_ngcontent-%COMP%]:hover{border-color:#f59e0b}.stat-provinces[_ngcontent-%COMP%]:hover{border-color:#8b5cf6}.filter-container[_ngcontent-%COMP%]{background:#fff;border:1px solid #e5e7eb}.filter-input[_ngcontent-%COMP%]{border:1px solid #d1d5db;transition:all .2s ease}.filter-input[_ngcontent-%COMP%]:focus{outline:none;ring:2px;ring-color:#3b82f6;border-color:#3b82f6}.filter-select[_ngcontent-%COMP%]{border:1px solid #d1d5db;transition:all .2s ease}.filter-select[_ngcontent-%COMP%]:focus{outline:none;ring:2px;ring-color:#3b82f6;border-color:#3b82f6}.pagination-button[_ngcontent-%COMP%]{transition:all .2s ease}.pagination-button[_ngcontent-%COMP%]:hover:not(:disabled){background-color:#f3f4f6}.pagination-button.active[_ngcontent-%COMP%]{background-color:#3b82f6;color:#fff}.pagination-button.active[_ngcontent-%COMP%]:hover{background-color:#2563eb}.focus-visible[_ngcontent-%COMP%]:focus{outline:2px solid #3b82f6;outline-offset:2px}.line-clamp-2[_ngcontent-%COMP%]{display:-webkit-box;-webkit-line-clamp:2;-webkit-box-orient:vertical;overflow:hidden}@media (max-width: 768px){.stat-card[_ngcontent-%COMP%]{padding:12px}.stat-card[_ngcontent-%COMP%]   .text-2xl[_ngcontent-%COMP%]{font-size:1.5rem}.filter-container[_ngcontent-%COMP%]{padding:16px}}@media (prefers-reduced-motion: reduce){.fade-in-scale[_ngcontent-%COMP%], .stagger-animation[_ngcontent-%COMP%], .slide-in-right[_ngcontent-%COMP%], .stat-card[_ngcontent-%COMP%], .stat-icon[_ngcontent-%COMP%], .filter-input[_ngcontent-%COMP%], .filter-select[_ngcontent-%COMP%], .pagination-button[_ngcontent-%COMP%]{animation:none;transition:none}}.hover\\:bg-blue-50\\/50[_ngcontent-%COMP%]:hover{background-color:#eff6ff80}.animate-spin[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_spin 1s linear infinite}@keyframes _ngcontent-%COMP%_spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}"]})}}return s})()}}]);